var lm=Object.defineProperty;var um=(t,e,n)=>e in t?lm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>um(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function am(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rd={exports:{}},po={},id={exports:{}},D={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=Symbol.for("react.element"),cm=Symbol.for("react.portal"),fm=Symbol.for("react.fragment"),dm=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),pm=Symbol.for("react.provider"),gm=Symbol.for("react.context"),mm=Symbol.for("react.forward_ref"),vm=Symbol.for("react.suspense"),ym=Symbol.for("react.memo"),_m=Symbol.for("react.lazy"),mc=Symbol.iterator;function wm(t){return t===null||typeof t!="object"?null:(t=mc&&t[mc]||t["@@iterator"],typeof t=="function"?t:null)}var sd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},od=Object.assign,ld={};function Lr(t,e,n){this.props=t,this.context=e,this.refs=ld,this.updater=n||sd}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Lr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ud(){}ud.prototype=Lr.prototype;function Fu(t,e,n){this.props=t,this.context=e,this.refs=ld,this.updater=n||sd}var Bu=Fu.prototype=new ud;Bu.constructor=Fu;od(Bu,Lr.prototype);Bu.isPureReactComponent=!0;var vc=Array.isArray,ad=Object.prototype.hasOwnProperty,ju={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function fd(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ad.call(e,r)&&!cd.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zi,type:t,key:s,ref:o,props:i,_owner:ju.current}}function Em(t,e){return{$$typeof:zi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $u(t){return typeof t=="object"&&t!==null&&t.$$typeof===zi}function Sm(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yc=/\/+/g;function Vo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sm(""+t.key):e.toString(36)}function _s(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zi:case cm:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Vo(o,0):r,vc(i)?(n="",t!=null&&(n=t.replace(yc,"$&/")+"/"),_s(i,e,n,"",function(c){return c})):i!=null&&($u(i)&&(i=Em(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Vo(s,l);o+=_s(s,e,n,a,i)}else if(a=wm(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Vo(s,l++),o+=_s(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xi(t,e,n){if(t==null)return t;var r=[],i=0;return _s(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xm(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ce={current:null},ws={transition:null},Tm={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ws,ReactCurrentOwner:ju};function dd(){throw Error("act(...) is not supported in production builds of React.")}D.Children={map:Xi,forEach:function(t,e,n){Xi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xi(t,function(){e++}),e},toArray:function(t){return Xi(t,function(e){return e})||[]},only:function(t){if(!$u(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};D.Component=Lr;D.Fragment=fm;D.Profiler=hm;D.PureComponent=Fu;D.StrictMode=dm;D.Suspense=vm;D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tm;D.act=dd;D.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=od({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ju.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)ad.call(e,a)&&!cd.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:zi,type:t.type,key:i,ref:s,props:r,_owner:o}};D.createContext=function(t){return t={$$typeof:gm,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pm,_context:t},t.Consumer=t};D.createElement=fd;D.createFactory=function(t){var e=fd.bind(null,t);return e.type=t,e};D.createRef=function(){return{current:null}};D.forwardRef=function(t){return{$$typeof:mm,render:t}};D.isValidElement=$u;D.lazy=function(t){return{$$typeof:_m,_payload:{_status:-1,_result:t},_init:xm}};D.memo=function(t,e){return{$$typeof:ym,type:t,compare:e===void 0?null:e}};D.startTransition=function(t){var e=ws.transition;ws.transition={};try{t()}finally{ws.transition=e}};D.unstable_act=dd;D.useCallback=function(t,e){return Ce.current.useCallback(t,e)};D.useContext=function(t){return Ce.current.useContext(t)};D.useDebugValue=function(){};D.useDeferredValue=function(t){return Ce.current.useDeferredValue(t)};D.useEffect=function(t,e){return Ce.current.useEffect(t,e)};D.useId=function(){return Ce.current.useId()};D.useImperativeHandle=function(t,e,n){return Ce.current.useImperativeHandle(t,e,n)};D.useInsertionEffect=function(t,e){return Ce.current.useInsertionEffect(t,e)};D.useLayoutEffect=function(t,e){return Ce.current.useLayoutEffect(t,e)};D.useMemo=function(t,e){return Ce.current.useMemo(t,e)};D.useReducer=function(t,e,n){return Ce.current.useReducer(t,e,n)};D.useRef=function(t){return Ce.current.useRef(t)};D.useState=function(t){return Ce.current.useState(t)};D.useSyncExternalStore=function(t,e,n){return Ce.current.useSyncExternalStore(t,e,n)};D.useTransition=function(){return Ce.current.useTransition()};D.version="18.3.1";id.exports=D;var A=id.exports;const Im=am(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm=A,Pm=Symbol.for("react.element"),Lm=Symbol.for("react.fragment"),km=Object.prototype.hasOwnProperty,Am=Cm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nm={key:!0,ref:!0,__self:!0,__source:!0};function hd(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)km.call(e,r)&&!Nm.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pm,type:t,key:s,ref:o,props:i,_owner:Am.current}}po.Fragment=Lm;po.jsx=hd;po.jsxs=hd;rd.exports=po;var R=rd.exports,Sl={},pd={exports:{}},$e={},gd={exports:{}},md={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,O){var M=L.length;L.push(O);e:for(;0<M;){var te=M-1>>>1,ce=L[te];if(0<i(ce,O))L[te]=O,L[M]=ce,M=te;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var O=L[0],M=L.pop();if(M!==O){L[0]=M;e:for(var te=0,ce=L.length,qi=ce>>>1;te<qi;){var ln=2*(te+1)-1,Wo=L[ln],un=ln+1,Ji=L[un];if(0>i(Wo,M))un<ce&&0>i(Ji,Wo)?(L[te]=Ji,L[un]=M,te=un):(L[te]=Wo,L[ln]=M,te=ln);else if(un<ce&&0>i(Ji,M))L[te]=Ji,L[un]=M,te=un;else break e}}return O}function i(L,O){var M=L.sortIndex-O.sortIndex;return M!==0?M:L.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],f=1,d=null,h=3,v=!1,y=!1,_=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(L){for(var O=n(c);O!==null;){if(O.callback===null)r(c);else if(O.startTime<=L)r(c),O.sortIndex=O.expirationTime,e(a,O);else break;O=n(c)}}function w(L){if(_=!1,m(L),!y)if(n(a)!==null)y=!0,jo(S);else{var O=n(c);O!==null&&$o(w,O.startTime-L)}}function S(L,O){y=!1,_&&(_=!1,g(k),k=-1),v=!0;var M=h;try{for(m(O),d=n(a);d!==null&&(!(d.expirationTime>O)||L&&!Me());){var te=d.callback;if(typeof te=="function"){d.callback=null,h=d.priorityLevel;var ce=te(d.expirationTime<=O);O=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(a)&&r(a),m(O)}else r(a);d=n(a)}if(d!==null)var qi=!0;else{var ln=n(c);ln!==null&&$o(w,ln.startTime-O),qi=!1}return qi}finally{d=null,h=M,v=!1}}var T=!1,P=null,k=-1,B=5,N=-1;function Me(){return!(t.unstable_now()-N<B)}function Br(){if(P!==null){var L=t.unstable_now();N=L;var O=!0;try{O=P(!0,L)}finally{O?jr():(T=!1,P=null)}}else T=!1}var jr;if(typeof p=="function")jr=function(){p(Br)};else if(typeof MessageChannel<"u"){var gc=new MessageChannel,om=gc.port2;gc.port1.onmessage=Br,jr=function(){om.postMessage(null)}}else jr=function(){C(Br,0)};function jo(L){P=L,T||(T=!0,jr())}function $o(L,O){k=C(function(){L(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,jo(S))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var M=h;h=O;try{return L()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,O){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var M=h;h=L;try{return O()}finally{h=M}},t.unstable_scheduleCallback=function(L,O,M){var te=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?te+M:te):M=te,L){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=M+ce,L={id:f++,callback:O,priorityLevel:L,startTime:M,expirationTime:ce,sortIndex:-1},M>te?(L.sortIndex=M,e(c,L),n(a)===null&&L===n(c)&&(_?(g(k),k=-1):_=!0,$o(w,M-te))):(L.sortIndex=ce,e(a,L),y||v||(y=!0,jo(S))),L},t.unstable_shouldYield=Me,t.unstable_wrapCallback=function(L){var O=h;return function(){var M=h;h=O;try{return L.apply(this,arguments)}finally{h=M}}}})(md);gd.exports=md;var Om=gd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=A,je=Om;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vd=new Set,gi={};function Rn(t,e){fr(t,e),fr(t+"Capture",e)}function fr(t,e){for(gi[t]=e,t=0;t<e.length;t++)vd.add(e[t])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xl=Object.prototype.hasOwnProperty,Mm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_c={},wc={};function zm(t){return xl.call(wc,t)?!0:xl.call(_c,t)?!1:Mm.test(t)?wc[t]=!0:(_c[t]=!0,!1)}function Dm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Um(t,e,n,r){if(e===null||typeof e>"u"||Dm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ye[t]=new Pe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ye[e]=new Pe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ye[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ye[t]=new Pe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ye[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ye[t]=new Pe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ye[t]=new Pe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ye[t]=new Pe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ye[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wu=/[\-:]([a-z])/g;function Vu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wu,Vu);ye[e]=new Pe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wu,Vu);ye[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wu,Vu);ye[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ye[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ye[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hu(t,e,n,r){var i=ye.hasOwnProperty(e)?ye[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Um(e,n,i,r)&&(n=null),r||i===null?zm(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lt=Rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zi=Symbol.for("react.element"),Vn=Symbol.for("react.portal"),Hn=Symbol.for("react.fragment"),Gu=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),_d=Symbol.for("react.context"),Qu=Symbol.for("react.forward_ref"),Il=Symbol.for("react.suspense"),Cl=Symbol.for("react.suspense_list"),bu=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),wd=Symbol.for("react.offscreen"),Ec=Symbol.iterator;function Wr(t){return t===null||typeof t!="object"?null:(t=Ec&&t[Ec]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Object.assign,Ho;function Xr(t){if(Ho===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ho=e&&e[1]||""}return`
`+Ho+t}var Go=!1;function Qo(t,e){if(!t||Go)return"";Go=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Go=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xr(t):""}function Fm(t){switch(t.tag){case 5:return Xr(t.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return t=Qo(t.type,!1),t;case 11:return t=Qo(t.type.render,!1),t;case 1:return t=Qo(t.type,!0),t;default:return""}}function Pl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hn:return"Fragment";case Vn:return"Portal";case Tl:return"Profiler";case Gu:return"StrictMode";case Il:return"Suspense";case Cl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _d:return(t.displayName||"Context")+".Consumer";case yd:return(t._context.displayName||"Context")+".Provider";case Qu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bu:return e=t.displayName||null,e!==null?e:Pl(t.type)||"Memo";case At:e=t._payload,t=t._init;try{return Pl(t(e))}catch{}}return null}function Bm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pl(e);case 8:return e===Gu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ed(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jm(t){var e=Ed(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function es(t){t._valueTracker||(t._valueTracker=jm(t))}function Sd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ed(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ms(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ll(t,e){var n=e.checked;return Z({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xd(t,e){e=e.checked,e!=null&&Hu(t,"checked",e,!1)}function kl(t,e){xd(t,e);var n=Kt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Al(t,e.type,n):e.hasOwnProperty("defaultValue")&&Al(t,e.type,Kt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Al(t,e,n){(e!=="number"||Ms(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zr=Array.isArray;function ir(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Nl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return Z({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Zr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kt(n)}}function Td(t,e){var n=Kt(e.value),r=Kt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ic(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Id(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ol(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Id(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ts,Cd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$m=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){$m.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function Pd(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function Ld(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Pd(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Wm=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rl(t,e){if(e){if(Wm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function Ml(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Yu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dl=null,sr=null,or=null;function Cc(t){if(t=Fi(t)){if(typeof Dl!="function")throw Error(E(280));var e=t.stateNode;e&&(e=_o(e),Dl(t.stateNode,t.type,e))}}function kd(t){sr?or?or.push(t):or=[t]:sr=t}function Ad(){if(sr){var t=sr,e=or;if(or=sr=null,Cc(t),e)for(t=0;t<e.length;t++)Cc(e[t])}}function Nd(t,e){return t(e)}function Od(){}var bo=!1;function Rd(t,e,n){if(bo)return t(e,n);bo=!0;try{return Nd(t,e,n)}finally{bo=!1,(sr!==null||or!==null)&&(Od(),Ad())}}function vi(t,e){var n=t.stateNode;if(n===null)return null;var r=_o(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var Ul=!1;if(xt)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Ul=!1}function Vm(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ii=!1,zs=null,Ds=!1,Fl=null,Hm={onError:function(t){ii=!0,zs=t}};function Gm(t,e,n,r,i,s,o,l,a){ii=!1,zs=null,Vm.apply(Hm,arguments)}function Qm(t,e,n,r,i,s,o,l,a){if(Gm.apply(this,arguments),ii){if(ii){var c=zs;ii=!1,zs=null}else throw Error(E(198));Ds||(Ds=!0,Fl=c)}}function Mn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Md(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pc(t){if(Mn(t)!==t)throw Error(E(188))}function bm(t){var e=t.alternate;if(!e){if(e=Mn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pc(i),t;if(s===r)return Pc(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function zd(t){return t=bm(t),t!==null?Dd(t):null}function Dd(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dd(t);if(e!==null)return e;t=t.sibling}return null}var Ud=je.unstable_scheduleCallback,Lc=je.unstable_cancelCallback,Ym=je.unstable_shouldYield,Km=je.unstable_requestPaint,re=je.unstable_now,qm=je.unstable_getCurrentPriorityLevel,Ku=je.unstable_ImmediatePriority,Fd=je.unstable_UserBlockingPriority,Us=je.unstable_NormalPriority,Jm=je.unstable_LowPriority,Bd=je.unstable_IdlePriority,go=null,ft=null;function Xm(t){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(go,t,void 0,(t.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:t0,Zm=Math.log,e0=Math.LN2;function t0(t){return t>>>=0,t===0?32:31-(Zm(t)/e0|0)|0}var ns=64,rs=4194304;function ei(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ei(l):(s&=o,s!==0&&(r=ei(s)))}else o=n&~i,o!==0?r=ei(o):s!==0&&(r=ei(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-et(e),i=1<<n,r|=t[n],e&=~i;return r}function n0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-et(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=n0(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Bl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jd(){var t=ns;return ns<<=1,!(ns&4194240)&&(ns=64),t}function Yo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Di(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-et(e),t[e]=n}function i0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-et(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function qu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-et(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var H=0;function $d(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wd,Ju,Vd,Hd,Gd,jl=!1,is=[],jt=null,$t=null,Wt=null,yi=new Map,_i=new Map,Rt=[],s0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(t,e){switch(t){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":$t=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":yi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(e.pointerId)}}function Hr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fi(e),e!==null&&Ju(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function o0(t,e,n,r,i){switch(e){case"focusin":return jt=Hr(jt,t,e,n,r,i),!0;case"dragenter":return $t=Hr($t,t,e,n,r,i),!0;case"mouseover":return Wt=Hr(Wt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return yi.set(s,Hr(yi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,_i.set(s,Hr(_i.get(s)||null,t,e,n,r,i)),!0}return!1}function Qd(t){var e=pn(t.target);if(e!==null){var n=Mn(e);if(n!==null){if(e=n.tag,e===13){if(e=Md(n),e!==null){t.blockedOn=e,Gd(t.priority,function(){Vd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Es(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$l(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zl=r,n.target.dispatchEvent(r),zl=null}else return e=Fi(n),e!==null&&Ju(e),t.blockedOn=n,!1;e.shift()}return!0}function Ac(t,e,n){Es(t)&&n.delete(e)}function l0(){jl=!1,jt!==null&&Es(jt)&&(jt=null),$t!==null&&Es($t)&&($t=null),Wt!==null&&Es(Wt)&&(Wt=null),yi.forEach(Ac),_i.forEach(Ac)}function Gr(t,e){t.blockedOn===e&&(t.blockedOn=null,jl||(jl=!0,je.unstable_scheduleCallback(je.unstable_NormalPriority,l0)))}function wi(t){function e(i){return Gr(i,t)}if(0<is.length){Gr(is[0],t);for(var n=1;n<is.length;n++){var r=is[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jt!==null&&Gr(jt,t),$t!==null&&Gr($t,t),Wt!==null&&Gr(Wt,t),yi.forEach(e),_i.forEach(e),n=0;n<Rt.length;n++)r=Rt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rt.length&&(n=Rt[0],n.blockedOn===null);)Qd(n),n.blockedOn===null&&Rt.shift()}var lr=Lt.ReactCurrentBatchConfig,Bs=!0;function u0(t,e,n,r){var i=H,s=lr.transition;lr.transition=null;try{H=1,Xu(t,e,n,r)}finally{H=i,lr.transition=s}}function a0(t,e,n,r){var i=H,s=lr.transition;lr.transition=null;try{H=4,Xu(t,e,n,r)}finally{H=i,lr.transition=s}}function Xu(t,e,n,r){if(Bs){var i=$l(t,e,n,r);if(i===null)il(t,e,r,js,n),kc(t,r);else if(o0(i,t,e,n,r))r.stopPropagation();else if(kc(t,r),e&4&&-1<s0.indexOf(t)){for(;i!==null;){var s=Fi(i);if(s!==null&&Wd(s),s=$l(t,e,n,r),s===null&&il(t,e,r,js,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else il(t,e,r,null,n)}}var js=null;function $l(t,e,n,r){if(js=null,t=Yu(r),t=pn(t),t!==null)if(e=Mn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Md(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return js=t,null}function bd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qm()){case Ku:return 1;case Fd:return 4;case Us:case Jm:return 16;case Bd:return 536870912;default:return 16}default:return 16}}var Dt=null,Zu=null,Ss=null;function Yd(){if(Ss)return Ss;var t,e=Zu,n=e.length,r,i="value"in Dt?Dt.value:Dt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ss=i.slice(t,1<r?1-r:void 0)}function xs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ss(){return!0}function Nc(){return!1}function We(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ss:Nc,this.isPropagationStopped=Nc,this}return Z(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),e}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=We(kr),Ui=Z({},kr,{view:0,detail:0}),c0=We(Ui),Ko,qo,Qr,mo=Z({},Ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(Ko=t.screenX-Qr.screenX,qo=t.screenY-Qr.screenY):qo=Ko=0,Qr=t),Ko)},movementY:function(t){return"movementY"in t?t.movementY:qo}}),Oc=We(mo),f0=Z({},mo,{dataTransfer:0}),d0=We(f0),h0=Z({},Ui,{relatedTarget:0}),Jo=We(h0),p0=Z({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),g0=We(p0),m0=Z({},kr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v0=We(m0),y0=Z({},kr,{data:0}),Rc=We(y0),_0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E0[t])?!!e[t]:!1}function ta(){return S0}var x0=Z({},Ui,{key:function(t){if(t.key){var e=_0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(t){return t.type==="keypress"?xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T0=We(x0),I0=Z({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mc=We(I0),C0=Z({},Ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),P0=We(C0),L0=Z({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),k0=We(L0),A0=Z({},mo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N0=We(A0),O0=[9,13,27,32],na=xt&&"CompositionEvent"in window,si=null;xt&&"documentMode"in document&&(si=document.documentMode);var R0=xt&&"TextEvent"in window&&!si,Kd=xt&&(!na||si&&8<si&&11>=si),zc=" ",Dc=!1;function qd(t,e){switch(t){case"keyup":return O0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function M0(t,e){switch(t){case"compositionend":return Jd(e);case"keypress":return e.which!==32?null:(Dc=!0,zc);case"textInput":return t=e.data,t===zc&&Dc?null:t;default:return null}}function z0(t,e){if(Gn)return t==="compositionend"||!na&&qd(t,e)?(t=Yd(),Ss=Zu=Dt=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kd&&e.locale!=="ko"?null:e.data;default:return null}}var D0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!D0[t.type]:e==="textarea"}function Xd(t,e,n,r){kd(r),e=$s(e,"onChange"),0<e.length&&(n=new ea("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oi=null,Ei=null;function U0(t){ah(t,0)}function vo(t){var e=Yn(t);if(Sd(e))return t}function F0(t,e){if(t==="change")return e}var Zd=!1;if(xt){var Xo;if(xt){var Zo="oninput"in document;if(!Zo){var Fc=document.createElement("div");Fc.setAttribute("oninput","return;"),Zo=typeof Fc.oninput=="function"}Xo=Zo}else Xo=!1;Zd=Xo&&(!document.documentMode||9<document.documentMode)}function Bc(){oi&&(oi.detachEvent("onpropertychange",eh),Ei=oi=null)}function eh(t){if(t.propertyName==="value"&&vo(Ei)){var e=[];Xd(e,Ei,t,Yu(t)),Rd(U0,e)}}function B0(t,e,n){t==="focusin"?(Bc(),oi=e,Ei=n,oi.attachEvent("onpropertychange",eh)):t==="focusout"&&Bc()}function j0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vo(Ei)}function $0(t,e){if(t==="click")return vo(e)}function W0(t,e){if(t==="input"||t==="change")return vo(e)}function V0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rt=typeof Object.is=="function"?Object.is:V0;function Si(t,e){if(rt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xl.call(e,i)||!rt(t[i],e[i]))return!1}return!0}function jc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $c(t,e){var n=jc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jc(n)}}function th(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?th(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nh(){for(var t=window,e=Ms();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ms(t.document)}return e}function ra(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H0(t){var e=nh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&th(n.ownerDocument.documentElement,n)){if(r!==null&&ra(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$c(n,s);var o=$c(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var G0=xt&&"documentMode"in document&&11>=document.documentMode,Qn=null,Wl=null,li=null,Vl=!1;function Wc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vl||Qn==null||Qn!==Ms(r)||(r=Qn,"selectionStart"in r&&ra(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),li&&Si(li,r)||(li=r,r=$s(Wl,"onSelect"),0<r.length&&(e=new ea("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qn)))}function os(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bn={animationend:os("Animation","AnimationEnd"),animationiteration:os("Animation","AnimationIteration"),animationstart:os("Animation","AnimationStart"),transitionend:os("Transition","TransitionEnd")},el={},rh={};xt&&(rh=document.createElement("div").style,"AnimationEvent"in window||(delete bn.animationend.animation,delete bn.animationiteration.animation,delete bn.animationstart.animation),"TransitionEvent"in window||delete bn.transitionend.transition);function yo(t){if(el[t])return el[t];if(!bn[t])return t;var e=bn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rh)return el[t]=e[n];return t}var ih=yo("animationend"),sh=yo("animationiteration"),oh=yo("animationstart"),lh=yo("transitionend"),uh=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nn(t,e){uh.set(t,e),Rn(e,[t])}for(var tl=0;tl<Vc.length;tl++){var nl=Vc[tl],Q0=nl.toLowerCase(),b0=nl[0].toUpperCase()+nl.slice(1);nn(Q0,"on"+b0)}nn(ih,"onAnimationEnd");nn(sh,"onAnimationIteration");nn(oh,"onAnimationStart");nn("dblclick","onDoubleClick");nn("focusin","onFocus");nn("focusout","onBlur");nn(lh,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ti));function Hc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Qm(r,e,void 0,t),t.currentTarget=null}function ah(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Hc(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Hc(i,l,c),s=a}}}if(Ds)throw t=Fl,Ds=!1,Fl=null,t}function Q(t,e){var n=e[Yl];n===void 0&&(n=e[Yl]=new Set);var r=t+"__bubble";n.has(r)||(ch(e,t,2,!1),n.add(r))}function rl(t,e,n){var r=0;e&&(r|=4),ch(n,t,r,e)}var ls="_reactListening"+Math.random().toString(36).slice(2);function xi(t){if(!t[ls]){t[ls]=!0,vd.forEach(function(n){n!=="selectionchange"&&(Y0.has(n)||rl(n,!1,t),rl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ls]||(e[ls]=!0,rl("selectionchange",!1,e))}}function ch(t,e,n,r){switch(bd(e)){case 1:var i=u0;break;case 4:i=a0;break;default:i=Xu}n=i.bind(null,e,n,t),i=void 0,!Ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function il(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=pn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Rd(function(){var c=s,f=Yu(n),d=[];e:{var h=uh.get(t);if(h!==void 0){var v=ea,y=t;switch(t){case"keypress":if(xs(n)===0)break e;case"keydown":case"keyup":v=T0;break;case"focusin":y="focus",v=Jo;break;case"focusout":y="blur",v=Jo;break;case"beforeblur":case"afterblur":v=Jo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=d0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=P0;break;case ih:case sh:case oh:v=g0;break;case lh:v=k0;break;case"scroll":v=c0;break;case"wheel":v=N0;break;case"copy":case"cut":case"paste":v=v0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Mc}var _=(e&4)!==0,C=!_&&t==="scroll",g=_?h!==null?h+"Capture":null:h;_=[];for(var p=c,m;p!==null;){m=p;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,g!==null&&(w=vi(p,g),w!=null&&_.push(Ti(p,w,m)))),C)break;p=p.return}0<_.length&&(h=new v(h,y,null,n,f),d.push({event:h,listeners:_}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",h&&n!==zl&&(y=n.relatedTarget||n.fromElement)&&(pn(y)||y[Tt]))break e;if((v||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?pn(y):null,y!==null&&(C=Mn(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(_=Oc,w="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=Mc,w="onPointerLeave",g="onPointerEnter",p="pointer"),C=v==null?h:Yn(v),m=y==null?h:Yn(y),h=new _(w,p+"leave",v,n,f),h.target=C,h.relatedTarget=m,w=null,pn(f)===c&&(_=new _(g,p+"enter",y,n,f),_.target=m,_.relatedTarget=C,w=_),C=w,v&&y)t:{for(_=v,g=y,p=0,m=_;m;m=Bn(m))p++;for(m=0,w=g;w;w=Bn(w))m++;for(;0<p-m;)_=Bn(_),p--;for(;0<m-p;)g=Bn(g),m--;for(;p--;){if(_===g||g!==null&&_===g.alternate)break t;_=Bn(_),g=Bn(g)}_=null}else _=null;v!==null&&Gc(d,h,v,_,!1),y!==null&&C!==null&&Gc(d,C,y,_,!0)}}e:{if(h=c?Yn(c):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var S=F0;else if(Uc(h))if(Zd)S=W0;else{S=j0;var T=B0}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=$0);if(S&&(S=S(t,c))){Xd(d,S,n,f);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&Al(h,"number",h.value)}switch(T=c?Yn(c):window,t){case"focusin":(Uc(T)||T.contentEditable==="true")&&(Qn=T,Wl=c,li=null);break;case"focusout":li=Wl=Qn=null;break;case"mousedown":Vl=!0;break;case"contextmenu":case"mouseup":case"dragend":Vl=!1,Wc(d,n,f);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":Wc(d,n,f)}var P;if(na)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?qd(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Kd&&n.locale!=="ko"&&(Gn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Gn&&(P=Yd()):(Dt=f,Zu="value"in Dt?Dt.value:Dt.textContent,Gn=!0)),T=$s(c,k),0<T.length&&(k=new Rc(k,t,null,n,f),d.push({event:k,listeners:T}),P?k.data=P:(P=Jd(n),P!==null&&(k.data=P)))),(P=R0?M0(t,n):z0(t,n))&&(c=$s(c,"onBeforeInput"),0<c.length&&(f=new Rc("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:c}),f.data=P))}ah(d,e)})}function Ti(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $s(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vi(t,n),s!=null&&r.unshift(Ti(t,s,i)),s=vi(t,e),s!=null&&r.push(Ti(t,s,i))),t=t.return}return r}function Bn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=vi(n,s),a!=null&&o.unshift(Ti(n,a,l))):i||(a=vi(n,s),a!=null&&o.push(Ti(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var K0=/\r\n?/g,q0=/\u0000|\uFFFD/g;function Qc(t){return(typeof t=="string"?t:""+t).replace(K0,`
`).replace(q0,"")}function us(t,e,n){if(e=Qc(e),Qc(t)!==e&&n)throw Error(E(425))}function Ws(){}var Hl=null,Gl=null;function Ql(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bl=typeof setTimeout=="function"?setTimeout:void 0,J0=typeof clearTimeout=="function"?clearTimeout:void 0,bc=typeof Promise=="function"?Promise:void 0,X0=typeof queueMicrotask=="function"?queueMicrotask:typeof bc<"u"?function(t){return bc.resolve(null).then(t).catch(Z0)}:bl;function Z0(t){setTimeout(function(){throw t})}function sl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wi(e)}function Vt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),ut="__reactFiber$"+Ar,Ii="__reactProps$"+Ar,Tt="__reactContainer$"+Ar,Yl="__reactEvents$"+Ar,ev="__reactListeners$"+Ar,tv="__reactHandles$"+Ar;function pn(t){var e=t[ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tt]||n[ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yc(t);t!==null;){if(n=t[ut])return n;t=Yc(t)}return e}t=n,n=t.parentNode}return null}function Fi(t){return t=t[ut]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function _o(t){return t[Ii]||null}var Kl=[],Kn=-1;function rn(t){return{current:t}}function K(t){0>Kn||(t.current=Kl[Kn],Kl[Kn]=null,Kn--)}function G(t,e){Kn++,Kl[Kn]=t.current,t.current=e}var qt={},Se=rn(qt),Ae=rn(!1),wn=qt;function dr(t,e){var n=t.type.contextTypes;if(!n)return qt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ne(t){return t=t.childContextTypes,t!=null}function Vs(){K(Ae),K(Se)}function Kc(t,e,n){if(Se.current!==qt)throw Error(E(168));G(Se,e),G(Ae,n)}function fh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Bm(t)||"Unknown",i));return Z({},n,r)}function Hs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qt,wn=Se.current,G(Se,t),G(Ae,Ae.current),!0}function qc(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=fh(t,e,wn),r.__reactInternalMemoizedMergedChildContext=t,K(Ae),K(Se),G(Se,t)):K(Ae),G(Ae,n)}var vt=null,wo=!1,ol=!1;function dh(t){vt===null?vt=[t]:vt.push(t)}function nv(t){wo=!0,dh(t)}function sn(){if(!ol&&vt!==null){ol=!0;var t=0,e=H;try{var n=vt;for(H=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vt=null,wo=!1}catch(i){throw vt!==null&&(vt=vt.slice(t+1)),Ud(Ku,sn),i}finally{H=e,ol=!1}}return null}var qn=[],Jn=0,Gs=null,Qs=0,Ve=[],He=0,En=null,wt=1,Et="";function cn(t,e){qn[Jn++]=Qs,qn[Jn++]=Gs,Gs=t,Qs=e}function hh(t,e,n){Ve[He++]=wt,Ve[He++]=Et,Ve[He++]=En,En=t;var r=wt;t=Et;var i=32-et(r)-1;r&=~(1<<i),n+=1;var s=32-et(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wt=1<<32-et(e)+i|n<<i|r,Et=s+t}else wt=1<<s|n<<i|r,Et=t}function ia(t){t.return!==null&&(cn(t,1),hh(t,1,0))}function sa(t){for(;t===Gs;)Gs=qn[--Jn],qn[Jn]=null,Qs=qn[--Jn],qn[Jn]=null;for(;t===En;)En=Ve[--He],Ve[He]=null,Et=Ve[--He],Ve[He]=null,wt=Ve[--He],Ve[He]=null}var Be=null,Fe=null,q=!1,Xe=null;function ph(t,e){var n=Ge(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,Fe=Vt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,Fe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=En!==null?{id:wt,overflow:Et}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ge(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,Fe=null,!0):!1;default:return!1}}function ql(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jl(t){if(q){var e=Fe;if(e){var n=e;if(!Jc(t,e)){if(ql(t))throw Error(E(418));e=Vt(n.nextSibling);var r=Be;e&&Jc(t,e)?ph(r,n):(t.flags=t.flags&-4097|2,q=!1,Be=t)}}else{if(ql(t))throw Error(E(418));t.flags=t.flags&-4097|2,q=!1,Be=t}}}function Xc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function as(t){if(t!==Be)return!1;if(!q)return Xc(t),q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ql(t.type,t.memoizedProps)),e&&(e=Fe)){if(ql(t))throw gh(),Error(E(418));for(;e;)ph(t,e),e=Vt(e.nextSibling)}if(Xc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fe=Vt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fe=null}}else Fe=Be?Vt(t.stateNode.nextSibling):null;return!0}function gh(){for(var t=Fe;t;)t=Vt(t.nextSibling)}function hr(){Fe=Be=null,q=!1}function oa(t){Xe===null?Xe=[t]:Xe.push(t)}var rv=Lt.ReactCurrentBatchConfig;function br(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function cs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zc(t){var e=t._init;return e(t._payload)}function mh(t){function e(g,p){if(t){var m=g.deletions;m===null?(g.deletions=[p],g.flags|=16):m.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=bt(g,p),g.index=0,g.sibling=null,g}function s(g,p,m){return g.index=m,t?(m=g.alternate,m!==null?(m=m.index,m<p?(g.flags|=2,p):m):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,p,m,w){return p===null||p.tag!==6?(p=hl(m,g.mode,w),p.return=g,p):(p=i(p,m),p.return=g,p)}function a(g,p,m,w){var S=m.type;return S===Hn?f(g,p,m.props.children,w,m.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===At&&Zc(S)===p.type)?(w=i(p,m.props),w.ref=br(g,p,m),w.return=g,w):(w=As(m.type,m.key,m.props,null,g.mode,w),w.ref=br(g,p,m),w.return=g,w)}function c(g,p,m,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=pl(m,g.mode,w),p.return=g,p):(p=i(p,m.children||[]),p.return=g,p)}function f(g,p,m,w,S){return p===null||p.tag!==7?(p=_n(m,g.mode,w,S),p.return=g,p):(p=i(p,m),p.return=g,p)}function d(g,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=hl(""+p,g.mode,m),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Zi:return m=As(p.type,p.key,p.props,null,g.mode,m),m.ref=br(g,null,p),m.return=g,m;case Vn:return p=pl(p,g.mode,m),p.return=g,p;case At:var w=p._init;return d(g,w(p._payload),m)}if(Zr(p)||Wr(p))return p=_n(p,g.mode,m,null),p.return=g,p;cs(g,p)}return null}function h(g,p,m,w){var S=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:l(g,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Zi:return m.key===S?a(g,p,m,w):null;case Vn:return m.key===S?c(g,p,m,w):null;case At:return S=m._init,h(g,p,S(m._payload),w)}if(Zr(m)||Wr(m))return S!==null?null:f(g,p,m,w,null);cs(g,m)}return null}function v(g,p,m,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(m)||null,l(p,g,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zi:return g=g.get(w.key===null?m:w.key)||null,a(p,g,w,S);case Vn:return g=g.get(w.key===null?m:w.key)||null,c(p,g,w,S);case At:var T=w._init;return v(g,p,m,T(w._payload),S)}if(Zr(w)||Wr(w))return g=g.get(m)||null,f(p,g,w,S,null);cs(p,w)}return null}function y(g,p,m,w){for(var S=null,T=null,P=p,k=p=0,B=null;P!==null&&k<m.length;k++){P.index>k?(B=P,P=null):B=P.sibling;var N=h(g,P,m[k],w);if(N===null){P===null&&(P=B);break}t&&P&&N.alternate===null&&e(g,P),p=s(N,p,k),T===null?S=N:T.sibling=N,T=N,P=B}if(k===m.length)return n(g,P),q&&cn(g,k),S;if(P===null){for(;k<m.length;k++)P=d(g,m[k],w),P!==null&&(p=s(P,p,k),T===null?S=P:T.sibling=P,T=P);return q&&cn(g,k),S}for(P=r(g,P);k<m.length;k++)B=v(P,g,k,m[k],w),B!==null&&(t&&B.alternate!==null&&P.delete(B.key===null?k:B.key),p=s(B,p,k),T===null?S=B:T.sibling=B,T=B);return t&&P.forEach(function(Me){return e(g,Me)}),q&&cn(g,k),S}function _(g,p,m,w){var S=Wr(m);if(typeof S!="function")throw Error(E(150));if(m=S.call(m),m==null)throw Error(E(151));for(var T=S=null,P=p,k=p=0,B=null,N=m.next();P!==null&&!N.done;k++,N=m.next()){P.index>k?(B=P,P=null):B=P.sibling;var Me=h(g,P,N.value,w);if(Me===null){P===null&&(P=B);break}t&&P&&Me.alternate===null&&e(g,P),p=s(Me,p,k),T===null?S=Me:T.sibling=Me,T=Me,P=B}if(N.done)return n(g,P),q&&cn(g,k),S;if(P===null){for(;!N.done;k++,N=m.next())N=d(g,N.value,w),N!==null&&(p=s(N,p,k),T===null?S=N:T.sibling=N,T=N);return q&&cn(g,k),S}for(P=r(g,P);!N.done;k++,N=m.next())N=v(P,g,k,N.value,w),N!==null&&(t&&N.alternate!==null&&P.delete(N.key===null?k:N.key),p=s(N,p,k),T===null?S=N:T.sibling=N,T=N);return t&&P.forEach(function(Br){return e(g,Br)}),q&&cn(g,k),S}function C(g,p,m,w){if(typeof m=="object"&&m!==null&&m.type===Hn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Zi:e:{for(var S=m.key,T=p;T!==null;){if(T.key===S){if(S=m.type,S===Hn){if(T.tag===7){n(g,T.sibling),p=i(T,m.props.children),p.return=g,g=p;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===At&&Zc(S)===T.type){n(g,T.sibling),p=i(T,m.props),p.ref=br(g,T,m),p.return=g,g=p;break e}n(g,T);break}else e(g,T);T=T.sibling}m.type===Hn?(p=_n(m.props.children,g.mode,w,m.key),p.return=g,g=p):(w=As(m.type,m.key,m.props,null,g.mode,w),w.ref=br(g,p,m),w.return=g,g=w)}return o(g);case Vn:e:{for(T=m.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(g,p.sibling),p=i(p,m.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=pl(m,g.mode,w),p.return=g,g=p}return o(g);case At:return T=m._init,C(g,p,T(m._payload),w)}if(Zr(m))return y(g,p,m,w);if(Wr(m))return _(g,p,m,w);cs(g,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(g,p.sibling),p=i(p,m),p.return=g,g=p):(n(g,p),p=hl(m,g.mode,w),p.return=g,g=p),o(g)):n(g,p)}return C}var pr=mh(!0),vh=mh(!1),bs=rn(null),Ys=null,Xn=null,la=null;function ua(){la=Xn=Ys=null}function aa(t){var e=bs.current;K(bs),t._currentValue=e}function Xl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ur(t,e){Ys=t,la=Xn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ke=!0),t.firstContext=null)}function be(t){var e=t._currentValue;if(la!==t)if(t={context:t,memoizedValue:e,next:null},Xn===null){if(Ys===null)throw Error(E(308));Xn=t,Ys.dependencies={lanes:0,firstContext:t}}else Xn=Xn.next=t;return e}var gn=null;function ca(t){gn===null?gn=[t]:gn.push(t)}function yh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ca(e)):(n.next=i.next,i.next=n),e.interleaved=n,It(t,r)}function It(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nt=!1;function fa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _h(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function St(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ht(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,F&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,It(t,n)}return i=r.interleaved,i===null?(e.next=e,ca(r)):(e.next=i.next,i.next=e),r.interleaved=e,It(t,n)}function Ts(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qu(t,n)}}function ef(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ks(t,e,n,r){var i=t.updateQueue;Nt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,f=c=a=null,l=s;do{var h=l.lane,v=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,_=l;switch(h=e,v=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(v,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,h=typeof y=="function"?y.call(v,d,h):y,h==null)break e;d=Z({},d,h);break e;case 2:Nt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else v={eventTime:v,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,a=d):f=f.next=v,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xn|=o,t.lanes=o,t.memoizedState=d}}function tf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Bi={},dt=rn(Bi),Ci=rn(Bi),Pi=rn(Bi);function mn(t){if(t===Bi)throw Error(E(174));return t}function da(t,e){switch(G(Pi,e),G(Ci,t),G(dt,Bi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ol(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ol(e,t)}K(dt),G(dt,e)}function gr(){K(dt),K(Ci),K(Pi)}function wh(t){mn(Pi.current);var e=mn(dt.current),n=Ol(e,t.type);e!==n&&(G(Ci,t),G(dt,n))}function ha(t){Ci.current===t&&(K(dt),K(Ci))}var J=rn(0);function qs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ll=[];function pa(){for(var t=0;t<ll.length;t++)ll[t]._workInProgressVersionPrimary=null;ll.length=0}var Is=Lt.ReactCurrentDispatcher,ul=Lt.ReactCurrentBatchConfig,Sn=0,X=null,le=null,de=null,Js=!1,ui=!1,Li=0,iv=0;function _e(){throw Error(E(321))}function ga(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rt(t[n],e[n]))return!1;return!0}function ma(t,e,n,r,i,s){if(Sn=s,X=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Is.current=t===null||t.memoizedState===null?uv:av,t=n(r,i),ui){s=0;do{if(ui=!1,Li=0,25<=s)throw Error(E(301));s+=1,de=le=null,e.updateQueue=null,Is.current=cv,t=n(r,i)}while(ui)}if(Is.current=Xs,e=le!==null&&le.next!==null,Sn=0,de=le=X=null,Js=!1,e)throw Error(E(300));return t}function va(){var t=Li!==0;return Li=0,t}function ot(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?X.memoizedState=de=t:de=de.next=t,de}function Ye(){if(le===null){var t=X.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=de===null?X.memoizedState:de.next;if(e!==null)de=e,le=t;else{if(t===null)throw Error(E(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},de===null?X.memoizedState=de=t:de=de.next=t}return de}function ki(t,e){return typeof e=="function"?e(t):e}function al(t){var e=Ye(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=le,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var f=c.lane;if((Sn&f)===f)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,X.lanes|=f,xn|=f}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,rt(r,e.memoizedState)||(ke=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,X.lanes|=s,xn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cl(t){var e=Ye(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);rt(s,e.memoizedState)||(ke=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Eh(){}function Sh(t,e){var n=X,r=Ye(),i=e(),s=!rt(r.memoizedState,i);if(s&&(r.memoizedState=i,ke=!0),r=r.queue,ya(Ih.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,Ai(9,Th.bind(null,n,r,i,e),void 0,null),he===null)throw Error(E(349));Sn&30||xh(n,e,i)}return i}function xh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Th(t,e,n,r){e.value=n,e.getSnapshot=r,Ch(e)&&Ph(t)}function Ih(t,e,n){return n(function(){Ch(e)&&Ph(t)})}function Ch(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rt(t,n)}catch{return!0}}function Ph(t){var e=It(t,1);e!==null&&tt(e,t,1,-1)}function nf(t){var e=ot();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},e.queue=t,t=t.dispatch=lv.bind(null,X,t),[e.memoizedState,t]}function Ai(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=X.updateQueue,e===null?(e={lastEffect:null,stores:null},X.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lh(){return Ye().memoizedState}function Cs(t,e,n,r){var i=ot();X.flags|=t,i.memoizedState=Ai(1|e,n,void 0,r===void 0?null:r)}function Eo(t,e,n,r){var i=Ye();r=r===void 0?null:r;var s=void 0;if(le!==null){var o=le.memoizedState;if(s=o.destroy,r!==null&&ga(r,o.deps)){i.memoizedState=Ai(e,n,s,r);return}}X.flags|=t,i.memoizedState=Ai(1|e,n,s,r)}function rf(t,e){return Cs(8390656,8,t,e)}function ya(t,e){return Eo(2048,8,t,e)}function kh(t,e){return Eo(4,2,t,e)}function Ah(t,e){return Eo(4,4,t,e)}function Nh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Oh(t,e,n){return n=n!=null?n.concat([t]):null,Eo(4,4,Nh.bind(null,e,t),n)}function _a(){}function Rh(t,e){var n=Ye();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ga(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mh(t,e){var n=Ye();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ga(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zh(t,e,n){return Sn&21?(rt(n,e)||(n=jd(),X.lanes|=n,xn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ke=!0),t.memoizedState=n)}function sv(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var r=ul.transition;ul.transition={};try{t(!1),e()}finally{H=n,ul.transition=r}}function Dh(){return Ye().memoizedState}function ov(t,e,n){var r=Qt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Uh(t))Fh(e,n);else if(n=yh(t,e,n,r),n!==null){var i=Ie();tt(n,t,r,i),Bh(n,e,r)}}function lv(t,e,n){var r=Qt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uh(t))Fh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,rt(l,o)){var a=e.interleaved;a===null?(i.next=i,ca(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=yh(t,e,i,r),n!==null&&(i=Ie(),tt(n,t,r,i),Bh(n,e,r))}}function Uh(t){var e=t.alternate;return t===X||e!==null&&e===X}function Fh(t,e){ui=Js=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qu(t,n)}}var Xs={readContext:be,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},uv={readContext:be,useCallback:function(t,e){return ot().memoizedState=[t,e===void 0?null:e],t},useContext:be,useEffect:rf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cs(4194308,4,Nh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cs(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cs(4,2,t,e)},useMemo:function(t,e){var n=ot();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ot();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ov.bind(null,X,t),[r.memoizedState,t]},useRef:function(t){var e=ot();return t={current:t},e.memoizedState=t},useState:nf,useDebugValue:_a,useDeferredValue:function(t){return ot().memoizedState=t},useTransition:function(){var t=nf(!1),e=t[0];return t=sv.bind(null,t[1]),ot().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=X,i=ot();if(q){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),he===null)throw Error(E(349));Sn&30||xh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,rf(Ih.bind(null,r,s,t),[t]),r.flags|=2048,Ai(9,Th.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ot(),e=he.identifierPrefix;if(q){var n=Et,r=wt;n=(r&~(1<<32-et(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Li++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},av={readContext:be,useCallback:Rh,useContext:be,useEffect:ya,useImperativeHandle:Oh,useInsertionEffect:kh,useLayoutEffect:Ah,useMemo:Mh,useReducer:al,useRef:Lh,useState:function(){return al(ki)},useDebugValue:_a,useDeferredValue:function(t){var e=Ye();return zh(e,le.memoizedState,t)},useTransition:function(){var t=al(ki)[0],e=Ye().memoizedState;return[t,e]},useMutableSource:Eh,useSyncExternalStore:Sh,useId:Dh,unstable_isNewReconciler:!1},cv={readContext:be,useCallback:Rh,useContext:be,useEffect:ya,useImperativeHandle:Oh,useInsertionEffect:kh,useLayoutEffect:Ah,useMemo:Mh,useReducer:cl,useRef:Lh,useState:function(){return cl(ki)},useDebugValue:_a,useDeferredValue:function(t){var e=Ye();return le===null?e.memoizedState=t:zh(e,le.memoizedState,t)},useTransition:function(){var t=cl(ki)[0],e=Ye().memoizedState;return[t,e]},useMutableSource:Eh,useSyncExternalStore:Sh,useId:Dh,unstable_isNewReconciler:!1};function qe(t,e){if(t&&t.defaultProps){e=Z({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Z({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var So={isMounted:function(t){return(t=t._reactInternals)?Mn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Qt(t),s=St(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ht(t,s,i),e!==null&&(tt(e,t,i,r),Ts(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ie(),i=Qt(t),s=St(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ht(t,s,i),e!==null&&(tt(e,t,i,r),Ts(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ie(),r=Qt(t),i=St(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ht(t,i,r),e!==null&&(tt(e,t,r,n),Ts(e,t,r))}};function sf(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Si(n,r)||!Si(i,s):!0}function jh(t,e,n){var r=!1,i=qt,s=e.contextType;return typeof s=="object"&&s!==null?s=be(s):(i=Ne(e)?wn:Se.current,r=e.contextTypes,s=(r=r!=null)?dr(t,i):qt),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=So,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function of(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&So.enqueueReplaceState(e,e.state,null)}function eu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fa(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=be(s):(s=Ne(e)?wn:Se.current,i.context=dr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zl(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&So.enqueueReplaceState(i,i.state,null),Ks(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mr(t,e){try{var n="",r=e;do n+=Fm(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function fl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fv=typeof WeakMap=="function"?WeakMap:Map;function $h(t,e,n){n=St(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){eo||(eo=!0,fu=r),tu(t,e)},n}function Wh(t,e,n){n=St(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tu(t,e),typeof r!="function"&&(Gt===null?Gt=new Set([this]):Gt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Iv.bind(null,t,e,n),e.then(t,t))}function uf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function af(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=St(-1,1),e.tag=2,Ht(n,e,1))),n.lanes|=1),t)}var dv=Lt.ReactCurrentOwner,ke=!1;function Te(t,e,n,r){e.child=t===null?vh(e,null,n,r):pr(e,t.child,n,r)}function cf(t,e,n,r,i){n=n.render;var s=e.ref;return ur(e,i),r=ma(t,e,n,r,s,i),n=va(),t!==null&&!ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(q&&n&&ia(e),e.flags|=1,Te(t,e,r,i),e.child)}function ff(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pa(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vh(t,e,s,r,i)):(t=As(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(o,r)&&t.ref===e.ref)return Ct(t,e,i)}return e.flags|=1,t=bt(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Si(s,r)&&t.ref===e.ref)if(ke=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ke=!0);else return e.lanes=t.lanes,Ct(t,e,i)}return nu(t,e,n,r,i)}function Hh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(er,De),De|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,G(er,De),De|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,G(er,De),De|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,G(er,De),De|=r;return Te(t,e,i,n),e.child}function Gh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nu(t,e,n,r,i){var s=Ne(n)?wn:Se.current;return s=dr(e,s),ur(e,i),n=ma(t,e,n,r,s,i),r=va(),t!==null&&!ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(q&&r&&ia(e),e.flags|=1,Te(t,e,n,i),e.child)}function df(t,e,n,r,i){if(Ne(n)){var s=!0;Hs(e)}else s=!1;if(ur(e,i),e.stateNode===null)Ps(t,e),jh(e,n,r),eu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=be(c):(c=Ne(n)?wn:Se.current,c=dr(e,c));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&of(e,o,r,c),Nt=!1;var h=e.memoizedState;o.state=h,Ks(e,r,o,i),a=e.memoizedState,l!==r||h!==a||Ae.current||Nt?(typeof f=="function"&&(Zl(e,n,f,r),a=e.memoizedState),(l=Nt||sf(e,n,l,r,h,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_h(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:qe(e.type,l),o.props=c,d=e.pendingProps,h=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=be(a):(a=Ne(n)?wn:Se.current,a=dr(e,a));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==a)&&of(e,o,r,a),Nt=!1,h=e.memoizedState,o.state=h,Ks(e,r,o,i);var y=e.memoizedState;l!==d||h!==y||Ae.current||Nt?(typeof v=="function"&&(Zl(e,n,v,r),y=e.memoizedState),(c=Nt||sf(e,n,c,r,h,y,a)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ru(t,e,n,r,s,i)}function ru(t,e,n,r,i,s){Gh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qc(e,n,!1),Ct(t,e,s);r=e.stateNode,dv.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pr(e,t.child,null,s),e.child=pr(e,null,l,s)):Te(t,e,l,s),e.memoizedState=r.state,i&&qc(e,n,!0),e.child}function Qh(t){var e=t.stateNode;e.pendingContext?Kc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kc(t,e.context,!1),da(t,e.containerInfo)}function hf(t,e,n,r,i){return hr(),oa(i),e.flags|=256,Te(t,e,n,r),e.child}var iu={dehydrated:null,treeContext:null,retryLane:0};function su(t){return{baseLanes:t,cachePool:null,transitions:null}}function bh(t,e,n){var r=e.pendingProps,i=J.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),G(J,i&1),t===null)return Jl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Io(o,r,0,null),t=_n(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=su(n),e.memoizedState=iu,t):wa(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return hv(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=bt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=bt(l,s):(s=_n(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?su(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iu,r}return s=t.child,t=s.sibling,r=bt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wa(t,e){return e=Io({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fs(t,e,n,r){return r!==null&&oa(r),pr(e,t.child,null,n),t=wa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hv(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=fl(Error(E(422))),fs(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Io({mode:"visible",children:r.children},i,0,null),s=_n(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pr(e,t.child,null,o),e.child.memoizedState=su(o),e.memoizedState=iu,s);if(!(e.mode&1))return fs(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=fl(s,r,void 0),fs(t,e,o,r)}if(l=(o&t.childLanes)!==0,ke||l){if(r=he,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,It(t,i),tt(r,t,i,-1))}return Ca(),r=fl(Error(E(421))),fs(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Cv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Fe=Vt(i.nextSibling),Be=e,q=!0,Xe=null,t!==null&&(Ve[He++]=wt,Ve[He++]=Et,Ve[He++]=En,wt=t.id,Et=t.overflow,En=e),e=wa(e,r.children),e.flags|=4096,e)}function pf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xl(t.return,e,n)}function dl(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Yh(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Te(t,e,r.children,n),r=J.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pf(t,n,e);else if(t.tag===19)pf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(G(J,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&qs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),dl(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&qs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}dl(e,!0,n,null,s);break;case"together":dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ps(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=bt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pv(t,e,n){switch(e.tag){case 3:Qh(e),hr();break;case 5:wh(e);break;case 1:Ne(e.type)&&Hs(e);break;case 4:da(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;G(bs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(G(J,J.current&1),e.flags|=128,null):n&e.child.childLanes?bh(t,e,n):(G(J,J.current&1),t=Ct(t,e,n),t!==null?t.sibling:null);G(J,J.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(J,J.current),r)break;return null;case 22:case 23:return e.lanes=0,Hh(t,e,n)}return Ct(t,e,n)}var Kh,ou,qh,Jh;Kh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ou=function(){};qh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mn(dt.current);var s=null;switch(n){case"input":i=Ll(t,i),r=Ll(t,r),s=[];break;case"select":i=Z({},i,{value:void 0}),r=Z({},r,{value:void 0}),s=[];break;case"textarea":i=Nl(t,i),r=Nl(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ws)}Rl(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gi.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gi.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Q("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Jh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yr(t,e){if(!q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gv(t,e,n){var r=e.pendingProps;switch(sa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Ne(e.type)&&Vs(),we(e),null;case 3:return r=e.stateNode,gr(),K(Ae),K(Se),pa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(as(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xe!==null&&(pu(Xe),Xe=null))),ou(t,e),we(e),null;case 5:ha(e);var i=mn(Pi.current);if(n=e.type,t!==null&&e.stateNode!=null)qh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return we(e),null}if(t=mn(dt.current),as(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ut]=e,r[Ii]=s,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(i=0;i<ti.length;i++)Q(ti[i],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":Sc(r,s),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Q("invalid",r);break;case"textarea":Tc(r,s),Q("invalid",r)}Rl(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&us(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&us(r.textContent,l,t),i=["children",""+l]):gi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Q("scroll",r)}switch(n){case"input":es(r),xc(r,s,!0);break;case"textarea":es(r),Ic(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ws)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Id(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ut]=e,t[Ii]=r,Kh(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ml(n,r),n){case"dialog":Q("cancel",t),Q("close",t),i=r;break;case"iframe":case"object":case"embed":Q("load",t),i=r;break;case"video":case"audio":for(i=0;i<ti.length;i++)Q(ti[i],t);i=r;break;case"source":Q("error",t),i=r;break;case"img":case"image":case"link":Q("error",t),Q("load",t),i=r;break;case"details":Q("toggle",t),i=r;break;case"input":Sc(t,r),i=Ll(t,r),Q("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Z({},r,{value:void 0}),Q("invalid",t);break;case"textarea":Tc(t,r),i=Nl(t,r),Q("invalid",t);break;default:i=r}Rl(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Ld(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Cd(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&mi(t,a):typeof a=="number"&&mi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Q("scroll",t):a!=null&&Hu(t,s,a,o))}switch(n){case"input":es(t),xc(t,r,!1);break;case"textarea":es(t),Ic(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kt(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ir(t,!!r.multiple,s,!1):r.defaultValue!=null&&ir(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ws)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)Jh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=mn(Pi.current),mn(dt.current),as(e)){if(r=e.stateNode,n=e.memoizedProps,r[ut]=e,(s=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:us(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&us(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ut]=e,e.stateNode=r}return we(e),null;case 13:if(K(J),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(q&&Fe!==null&&e.mode&1&&!(e.flags&128))gh(),hr(),e.flags|=98560,s=!1;else if(s=as(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[ut]=e}else hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),s=!1}else Xe!==null&&(pu(Xe),Xe=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||J.current&1?ae===0&&(ae=3):Ca())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return gr(),ou(t,e),t===null&&xi(e.stateNode.containerInfo),we(e),null;case 10:return aa(e.type._context),we(e),null;case 17:return Ne(e.type)&&Vs(),we(e),null;case 19:if(K(J),s=e.memoizedState,s===null)return we(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yr(s,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qs(t),o!==null){for(e.flags|=128,Yr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return G(J,J.current&1|2),e.child}t=t.sibling}s.tail!==null&&re()>vr&&(e.flags|=128,r=!0,Yr(s,!1),e.lanes=4194304)}else{if(!r)if(t=qs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!q)return we(e),null}else 2*re()-s.renderingStartTime>vr&&n!==1073741824&&(e.flags|=128,r=!0,Yr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=re(),e.sibling=null,n=J.current,G(J,r?n&1|2:n&1),e):(we(e),null);case 22:case 23:return Ia(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?De&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function mv(t,e){switch(sa(e),e.tag){case 1:return Ne(e.type)&&Vs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gr(),K(Ae),K(Se),pa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ha(e),null;case 13:if(K(J),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return K(J),null;case 4:return gr(),null;case 10:return aa(e.type._context),null;case 22:case 23:return Ia(),null;case 24:return null;default:return null}}var ds=!1,Ee=!1,vv=typeof WeakSet=="function"?WeakSet:Set,I=null;function Zn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ee(t,e,r)}else n.current=null}function lu(t,e,n){try{n()}catch(r){ee(t,e,r)}}var gf=!1;function yv(t,e){if(Hl=Bs,t=nh(),ra(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,f=0,d=t,h=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)h=d,d=v;for(;;){if(d===t)break t;if(h===n&&++c===i&&(l=o),h===s&&++f===r&&(a=o),(v=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gl={focusedElem:t,selectionRange:n},Bs=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,C=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:qe(e.type,_),C);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(w){ee(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return y=gf,gf=!1,y}function ai(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lu(e,n,s)}i=i.next}while(i!==r)}}function xo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function uu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Xh(t){var e=t.alternate;e!==null&&(t.alternate=null,Xh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ut],delete e[Ii],delete e[Yl],delete e[ev],delete e[tv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zh(t){return t.tag===5||t.tag===3||t.tag===4}function mf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function au(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ws));else if(r!==4&&(t=t.child,t!==null))for(au(t,e,n),t=t.sibling;t!==null;)au(t,e,n),t=t.sibling}function cu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cu(t,e,n),t=t.sibling;t!==null;)cu(t,e,n),t=t.sibling}var ge=null,Je=!1;function kt(t,e,n){for(n=n.child;n!==null;)ep(t,e,n),n=n.sibling}function ep(t,e,n){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(go,n)}catch{}switch(n.tag){case 5:Ee||Zn(n,e);case 6:var r=ge,i=Je;ge=null,kt(t,e,n),ge=r,Je=i,ge!==null&&(Je?(t=ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ge.removeChild(n.stateNode));break;case 18:ge!==null&&(Je?(t=ge,n=n.stateNode,t.nodeType===8?sl(t.parentNode,n):t.nodeType===1&&sl(t,n),wi(t)):sl(ge,n.stateNode));break;case 4:r=ge,i=Je,ge=n.stateNode.containerInfo,Je=!0,kt(t,e,n),ge=r,Je=i;break;case 0:case 11:case 14:case 15:if(!Ee&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lu(n,e,o),i=i.next}while(i!==r)}kt(t,e,n);break;case 1:if(!Ee&&(Zn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ee(n,e,l)}kt(t,e,n);break;case 21:kt(t,e,n);break;case 22:n.mode&1?(Ee=(r=Ee)||n.memoizedState!==null,kt(t,e,n),Ee=r):kt(t,e,n);break;default:kt(t,e,n)}}function vf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vv),e.forEach(function(r){var i=Pv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ke(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ge=l.stateNode,Je=!1;break e;case 3:ge=l.stateNode.containerInfo,Je=!0;break e;case 4:ge=l.stateNode.containerInfo,Je=!0;break e}l=l.return}if(ge===null)throw Error(E(160));ep(s,o,i),ge=null,Je=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){ee(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tp(e,t),e=e.sibling}function tp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ke(e,t),st(t),r&4){try{ai(3,t,t.return),xo(3,t)}catch(_){ee(t,t.return,_)}try{ai(5,t,t.return)}catch(_){ee(t,t.return,_)}}break;case 1:Ke(e,t),st(t),r&512&&n!==null&&Zn(n,n.return);break;case 5:if(Ke(e,t),st(t),r&512&&n!==null&&Zn(n,n.return),t.flags&32){var i=t.stateNode;try{mi(i,"")}catch(_){ee(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&xd(i,s),Ml(l,o);var c=Ml(l,s);for(o=0;o<a.length;o+=2){var f=a[o],d=a[o+1];f==="style"?Ld(i,d):f==="dangerouslySetInnerHTML"?Cd(i,d):f==="children"?mi(i,d):Hu(i,f,d,c)}switch(l){case"input":kl(i,s);break;case"textarea":Td(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?ir(i,!!s.multiple,v,!1):h!==!!s.multiple&&(s.defaultValue!=null?ir(i,!!s.multiple,s.defaultValue,!0):ir(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ii]=s}catch(_){ee(t,t.return,_)}}break;case 6:if(Ke(e,t),st(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){ee(t,t.return,_)}}break;case 3:if(Ke(e,t),st(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wi(e.containerInfo)}catch(_){ee(t,t.return,_)}break;case 4:Ke(e,t),st(t);break;case 13:Ke(e,t),st(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xa=re())),r&4&&vf(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ee=(c=Ee)||f,Ke(e,t),Ee=c):Ke(e,t),st(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&t.mode&1)for(I=t,f=t.child;f!==null;){for(d=I=f;I!==null;){switch(h=I,v=h.child,h.tag){case 0:case 11:case 14:case 15:ai(4,h,h.return);break;case 1:Zn(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){ee(r,n,_)}}break;case 5:Zn(h,h.return);break;case 22:if(h.memoizedState!==null){_f(d);continue}}v!==null?(v.return=h,I=v):_f(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Pd("display",o))}catch(_){ee(t,t.return,_)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(_){ee(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ke(e,t),st(t),r&4&&vf(t);break;case 21:break;default:Ke(e,t),st(t)}}function st(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zh(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mi(i,""),r.flags&=-33);var s=mf(t);cu(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=mf(t);au(t,l,o);break;default:throw Error(E(161))}}catch(a){ee(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _v(t,e,n){I=t,np(t)}function np(t,e,n){for(var r=(t.mode&1)!==0;I!==null;){var i=I,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ds;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ee;l=ds;var c=Ee;if(ds=o,(Ee=a)&&!c)for(I=i;I!==null;)o=I,a=o.child,o.tag===22&&o.memoizedState!==null?wf(i):a!==null?(a.return=o,I=a):wf(i);for(;s!==null;)I=s,np(s),s=s.sibling;I=i,ds=l,Ee=c}yf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,I=s):yf(t)}}function yf(t){for(;I!==null;){var e=I;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ee||xo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ee)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:qe(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tf(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tf(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&wi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ee||e.flags&512&&uu(e)}catch(h){ee(e,e.return,h)}}if(e===t){I=null;break}if(n=e.sibling,n!==null){n.return=e.return,I=n;break}I=e.return}}function _f(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var n=e.sibling;if(n!==null){n.return=e.return,I=n;break}I=e.return}}function wf(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xo(4,e)}catch(a){ee(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ee(e,i,a)}}var s=e.return;try{uu(e)}catch(a){ee(e,s,a)}break;case 5:var o=e.return;try{uu(e)}catch(a){ee(e,o,a)}}}catch(a){ee(e,e.return,a)}if(e===t){I=null;break}var l=e.sibling;if(l!==null){l.return=e.return,I=l;break}I=e.return}}var wv=Math.ceil,Zs=Lt.ReactCurrentDispatcher,Ea=Lt.ReactCurrentOwner,Qe=Lt.ReactCurrentBatchConfig,F=0,he=null,se=null,ve=0,De=0,er=rn(0),ae=0,Ni=null,xn=0,To=0,Sa=0,ci=null,Le=null,xa=0,vr=1/0,gt=null,eo=!1,fu=null,Gt=null,hs=!1,Ut=null,to=0,fi=0,du=null,Ls=-1,ks=0;function Ie(){return F&6?re():Ls!==-1?Ls:Ls=re()}function Qt(t){return t.mode&1?F&2&&ve!==0?ve&-ve:rv.transition!==null?(ks===0&&(ks=jd()),ks):(t=H,t!==0||(t=window.event,t=t===void 0?16:bd(t.type)),t):1}function tt(t,e,n,r){if(50<fi)throw fi=0,du=null,Error(E(185));Di(t,n,r),(!(F&2)||t!==he)&&(t===he&&(!(F&2)&&(To|=n),ae===4&&Mt(t,ve)),Oe(t,r),n===1&&F===0&&!(e.mode&1)&&(vr=re()+500,wo&&sn()))}function Oe(t,e){var n=t.callbackNode;r0(t,e);var r=Fs(t,t===he?ve:0);if(r===0)n!==null&&Lc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lc(n),e===1)t.tag===0?nv(Ef.bind(null,t)):dh(Ef.bind(null,t)),X0(function(){!(F&6)&&sn()}),n=null;else{switch($d(r)){case 1:n=Ku;break;case 4:n=Fd;break;case 16:n=Us;break;case 536870912:n=Bd;break;default:n=Us}n=cp(n,rp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rp(t,e){if(Ls=-1,ks=0,F&6)throw Error(E(327));var n=t.callbackNode;if(ar()&&t.callbackNode!==n)return null;var r=Fs(t,t===he?ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=no(t,r);else{e=r;var i=F;F|=2;var s=sp();(he!==t||ve!==e)&&(gt=null,vr=re()+500,yn(t,e));do try{xv();break}catch(l){ip(t,l)}while(!0);ua(),Zs.current=s,F=i,se!==null?e=0:(he=null,ve=0,e=ae)}if(e!==0){if(e===2&&(i=Bl(t),i!==0&&(r=i,e=hu(t,i))),e===1)throw n=Ni,yn(t,0),Mt(t,r),Oe(t,re()),n;if(e===6)Mt(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ev(i)&&(e=no(t,r),e===2&&(s=Bl(t),s!==0&&(r=s,e=hu(t,s))),e===1))throw n=Ni,yn(t,0),Mt(t,r),Oe(t,re()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:fn(t,Le,gt);break;case 3:if(Mt(t,r),(r&130023424)===r&&(e=xa+500-re(),10<e)){if(Fs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ie(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bl(fn.bind(null,t,Le,gt),e);break}fn(t,Le,gt);break;case 4:if(Mt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-et(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wv(r/1960))-r,10<r){t.timeoutHandle=bl(fn.bind(null,t,Le,gt),r);break}fn(t,Le,gt);break;case 5:fn(t,Le,gt);break;default:throw Error(E(329))}}}return Oe(t,re()),t.callbackNode===n?rp.bind(null,t):null}function hu(t,e){var n=ci;return t.current.memoizedState.isDehydrated&&(yn(t,e).flags|=256),t=no(t,e),t!==2&&(e=Le,Le=n,e!==null&&pu(e)),t}function pu(t){Le===null?Le=t:Le.push.apply(Le,t)}function Ev(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!rt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mt(t,e){for(e&=~Sa,e&=~To,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-et(e),r=1<<n;t[n]=-1,e&=~r}}function Ef(t){if(F&6)throw Error(E(327));ar();var e=Fs(t,0);if(!(e&1))return Oe(t,re()),null;var n=no(t,e);if(t.tag!==0&&n===2){var r=Bl(t);r!==0&&(e=r,n=hu(t,r))}if(n===1)throw n=Ni,yn(t,0),Mt(t,e),Oe(t,re()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fn(t,Le,gt),Oe(t,re()),null}function Ta(t,e){var n=F;F|=1;try{return t(e)}finally{F=n,F===0&&(vr=re()+500,wo&&sn())}}function Tn(t){Ut!==null&&Ut.tag===0&&!(F&6)&&ar();var e=F;F|=1;var n=Qe.transition,r=H;try{if(Qe.transition=null,H=1,t)return t()}finally{H=r,Qe.transition=n,F=e,!(F&6)&&sn()}}function Ia(){De=er.current,K(er)}function yn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J0(n)),se!==null)for(n=se.return;n!==null;){var r=n;switch(sa(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vs();break;case 3:gr(),K(Ae),K(Se),pa();break;case 5:ha(r);break;case 4:gr();break;case 13:K(J);break;case 19:K(J);break;case 10:aa(r.type._context);break;case 22:case 23:Ia()}n=n.return}if(he=t,se=t=bt(t.current,null),ve=De=e,ae=0,Ni=null,Sa=To=xn=0,Le=ci=null,gn!==null){for(e=0;e<gn.length;e++)if(n=gn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}gn=null}return t}function ip(t,e){do{var n=se;try{if(ua(),Is.current=Xs,Js){for(var r=X.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Js=!1}if(Sn=0,de=le=X=null,ui=!1,Li=0,Ea.current=null,n===null||n.return===null){ae=1,Ni=e,se=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ve,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=uf(o);if(v!==null){v.flags&=-257,af(v,o,l,s,e),v.mode&1&&lf(s,c,e),e=v,a=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(a),e.updateQueue=_}else y.add(a);break e}else{if(!(e&1)){lf(s,c,e),Ca();break e}a=Error(E(426))}}else if(q&&l.mode&1){var C=uf(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),af(C,o,l,s,e),oa(mr(a,l));break e}}s=a=mr(a,l),ae!==4&&(ae=2),ci===null?ci=[s]:ci.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=$h(s,a,e);ef(s,g);break e;case 1:l=a;var p=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Gt===null||!Gt.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Wh(s,l,e);ef(s,w);break e}}s=s.return}while(s!==null)}lp(n)}catch(S){e=S,se===n&&n!==null&&(se=n=n.return);continue}break}while(!0)}function sp(){var t=Zs.current;return Zs.current=Xs,t===null?Xs:t}function Ca(){(ae===0||ae===3||ae===2)&&(ae=4),he===null||!(xn&268435455)&&!(To&268435455)||Mt(he,ve)}function no(t,e){var n=F;F|=2;var r=sp();(he!==t||ve!==e)&&(gt=null,yn(t,e));do try{Sv();break}catch(i){ip(t,i)}while(!0);if(ua(),F=n,Zs.current=r,se!==null)throw Error(E(261));return he=null,ve=0,ae}function Sv(){for(;se!==null;)op(se)}function xv(){for(;se!==null&&!Ym();)op(se)}function op(t){var e=ap(t.alternate,t,De);t.memoizedProps=t.pendingProps,e===null?lp(t):se=e,Ea.current=null}function lp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mv(n,e),n!==null){n.flags&=32767,se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,se=null;return}}else if(n=gv(n,e,De),n!==null){se=n;return}if(e=e.sibling,e!==null){se=e;return}se=e=t}while(e!==null);ae===0&&(ae=5)}function fn(t,e,n){var r=H,i=Qe.transition;try{Qe.transition=null,H=1,Tv(t,e,n,r)}finally{Qe.transition=i,H=r}return null}function Tv(t,e,n,r){do ar();while(Ut!==null);if(F&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(i0(t,s),t===he&&(se=he=null,ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hs||(hs=!0,cp(Us,function(){return ar(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Qe.transition,Qe.transition=null;var o=H;H=1;var l=F;F|=4,Ea.current=null,yv(t,n),tp(n,t),H0(Gl),Bs=!!Hl,Gl=Hl=null,t.current=n,_v(n),Km(),F=l,H=o,Qe.transition=s}else t.current=n;if(hs&&(hs=!1,Ut=t,to=i),s=t.pendingLanes,s===0&&(Gt=null),Xm(n.stateNode),Oe(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(eo)throw eo=!1,t=fu,fu=null,t;return to&1&&t.tag!==0&&ar(),s=t.pendingLanes,s&1?t===du?fi++:(fi=0,du=t):fi=0,sn(),null}function ar(){if(Ut!==null){var t=$d(to),e=Qe.transition,n=H;try{if(Qe.transition=null,H=16>t?16:t,Ut===null)var r=!1;else{if(t=Ut,Ut=null,to=0,F&6)throw Error(E(331));var i=F;for(F|=4,I=t.current;I!==null;){var s=I,o=s.child;if(I.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(I=c;I!==null;){var f=I;switch(f.tag){case 0:case 11:case 15:ai(8,f,s)}var d=f.child;if(d!==null)d.return=f,I=d;else for(;I!==null;){f=I;var h=f.sibling,v=f.return;if(Xh(f),f===c){I=null;break}if(h!==null){h.return=v,I=h;break}I=v}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var C=_.sibling;_.sibling=null,_=C}while(_!==null)}}I=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,I=o;else e:for(;I!==null;){if(s=I,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ai(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,I=g;break e}I=s.return}}var p=t.current;for(I=p;I!==null;){o=I;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,I=m;else e:for(o=p;I!==null;){if(l=I,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xo(9,l)}}catch(S){ee(l,l.return,S)}if(l===o){I=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,I=w;break e}I=l.return}}if(F=i,sn(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(go,t)}catch{}r=!0}return r}finally{H=n,Qe.transition=e}}return!1}function Sf(t,e,n){e=mr(n,e),e=$h(t,e,1),t=Ht(t,e,1),e=Ie(),t!==null&&(Di(t,1,e),Oe(t,e))}function ee(t,e,n){if(t.tag===3)Sf(t,t,n);else for(;e!==null;){if(e.tag===3){Sf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gt===null||!Gt.has(r))){t=mr(n,t),t=Wh(e,t,1),e=Ht(e,t,1),t=Ie(),e!==null&&(Di(e,1,t),Oe(e,t));break}}e=e.return}}function Iv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ie(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(ve&n)===n&&(ae===4||ae===3&&(ve&130023424)===ve&&500>re()-xa?yn(t,0):Sa|=n),Oe(t,e)}function up(t,e){e===0&&(t.mode&1?(e=rs,rs<<=1,!(rs&130023424)&&(rs=4194304)):e=1);var n=Ie();t=It(t,e),t!==null&&(Di(t,e,n),Oe(t,n))}function Cv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),up(t,n)}function Pv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),up(t,n)}var ap;ap=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ae.current)ke=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ke=!1,pv(t,e,n);ke=!!(t.flags&131072)}else ke=!1,q&&e.flags&1048576&&hh(e,Qs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ps(t,e),t=e.pendingProps;var i=dr(e,Se.current);ur(e,n),i=ma(null,e,r,t,i,n);var s=va();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ne(r)?(s=!0,Hs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fa(e),i.updater=So,e.stateNode=i,i._reactInternals=e,eu(e,r,t,n),e=ru(null,e,r,!0,s,n)):(e.tag=0,q&&s&&ia(e),Te(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ps(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kv(r),t=qe(r,t),i){case 0:e=nu(null,e,r,t,n);break e;case 1:e=df(null,e,r,t,n);break e;case 11:e=cf(null,e,r,t,n);break e;case 14:e=ff(null,e,r,qe(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),nu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),df(t,e,r,i,n);case 3:e:{if(Qh(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_h(t,e),Ks(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mr(Error(E(423)),e),e=hf(t,e,r,n,i);break e}else if(r!==i){i=mr(Error(E(424)),e),e=hf(t,e,r,n,i);break e}else for(Fe=Vt(e.stateNode.containerInfo.firstChild),Be=e,q=!0,Xe=null,n=vh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===i){e=Ct(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return wh(e),t===null&&Jl(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ql(r,i)?o=null:s!==null&&Ql(r,s)&&(e.flags|=32),Gh(t,e),Te(t,e,o,n),e.child;case 6:return t===null&&Jl(e),null;case 13:return bh(t,e,n);case 4:return da(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pr(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),cf(t,e,r,i,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,G(bs,r._currentValue),r._currentValue=o,s!==null)if(rt(s.value,o)){if(s.children===i.children&&!Ae.current){e=Ct(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=St(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Xl(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Xl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Te(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ur(e,n),i=be(i),r=r(i),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,i=qe(r,e.pendingProps),i=qe(r.type,i),ff(t,e,r,i,n);case 15:return Vh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:qe(r,i),Ps(t,e),e.tag=1,Ne(r)?(t=!0,Hs(e)):t=!1,ur(e,n),jh(e,r,i),eu(e,r,i,n),ru(null,e,r,!0,t,n);case 19:return Yh(t,e,n);case 22:return Hh(t,e,n)}throw Error(E(156,e.tag))};function cp(t,e){return Ud(t,e)}function Lv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(t,e,n,r){return new Lv(t,e,n,r)}function Pa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kv(t){if(typeof t=="function")return Pa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qu)return 11;if(t===bu)return 14}return 2}function bt(t,e){var n=t.alternate;return n===null?(n=Ge(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function As(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pa(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Hn:return _n(n.children,i,s,e);case Gu:o=8,i|=8;break;case Tl:return t=Ge(12,n,e,i|2),t.elementType=Tl,t.lanes=s,t;case Il:return t=Ge(13,n,e,i),t.elementType=Il,t.lanes=s,t;case Cl:return t=Ge(19,n,e,i),t.elementType=Cl,t.lanes=s,t;case wd:return Io(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yd:o=10;break e;case _d:o=9;break e;case Qu:o=11;break e;case bu:o=14;break e;case At:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Ge(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _n(t,e,n,r){return t=Ge(7,t,r,e),t.lanes=n,t}function Io(t,e,n,r){return t=Ge(22,t,r,e),t.elementType=wd,t.lanes=n,t.stateNode={isHidden:!1},t}function hl(t,e,n){return t=Ge(6,t,null,e),t.lanes=n,t}function pl(t,e,n){return e=Ge(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Av(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yo(0),this.expirationTimes=Yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yo(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function La(t,e,n,r,i,s,o,l,a){return t=new Av(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ge(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fa(s),t}function Nv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fp(t){if(!t)return qt;t=t._reactInternals;e:{if(Mn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ne(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Ne(n))return fh(t,n,e)}return e}function dp(t,e,n,r,i,s,o,l,a){return t=La(n,r,!0,t,i,s,o,l,a),t.context=fp(null),n=t.current,r=Ie(),i=Qt(n),s=St(r,i),s.callback=e??null,Ht(n,s,i),t.current.lanes=i,Di(t,i,r),Oe(t,r),t}function Co(t,e,n,r){var i=e.current,s=Ie(),o=Qt(i);return n=fp(n),e.context===null?e.context=n:e.pendingContext=n,e=St(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ht(i,e,o),t!==null&&(tt(t,i,o,s),Ts(t,i,o)),o}function ro(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ka(t,e){xf(t,e),(t=t.alternate)&&xf(t,e)}function Ov(){return null}var hp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Aa(t){this._internalRoot=t}Po.prototype.render=Aa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));Co(t,e,null,null)};Po.prototype.unmount=Aa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tn(function(){Co(null,t,null,null)}),e[Tt]=null}};function Po(t){this._internalRoot=t}Po.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rt.length&&e!==0&&e<Rt[n].priority;n++);Rt.splice(n,0,t),n===0&&Qd(t)}};function Na(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tf(){}function Rv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ro(o);s.call(c)}}var o=dp(e,r,t,0,null,!1,!1,"",Tf);return t._reactRootContainer=o,t[Tt]=o.current,xi(t.nodeType===8?t.parentNode:t),Tn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ro(a);l.call(c)}}var a=La(t,0,!1,null,null,!1,!1,"",Tf);return t._reactRootContainer=a,t[Tt]=a.current,xi(t.nodeType===8?t.parentNode:t),Tn(function(){Co(e,a,n,r)}),a}function ko(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ro(o);l.call(a)}}Co(e,o,t,i)}else o=Rv(n,e,t,i,r);return ro(o)}Wd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ei(e.pendingLanes);n!==0&&(qu(e,n|1),Oe(e,re()),!(F&6)&&(vr=re()+500,sn()))}break;case 13:Tn(function(){var r=It(t,1);if(r!==null){var i=Ie();tt(r,t,1,i)}}),ka(t,1)}};Ju=function(t){if(t.tag===13){var e=It(t,134217728);if(e!==null){var n=Ie();tt(e,t,134217728,n)}ka(t,134217728)}};Vd=function(t){if(t.tag===13){var e=Qt(t),n=It(t,e);if(n!==null){var r=Ie();tt(n,t,e,r)}ka(t,e)}};Hd=function(){return H};Gd=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Dl=function(t,e,n){switch(e){case"input":if(kl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_o(r);if(!i)throw Error(E(90));Sd(r),kl(r,i)}}}break;case"textarea":Td(t,n);break;case"select":e=n.value,e!=null&&ir(t,!!n.multiple,e,!1)}};Nd=Ta;Od=Tn;var Mv={usingClientEntryPoint:!1,Events:[Fi,Yn,_o,kd,Ad,Ta]},Kr={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zv={bundleType:Kr.bundleType,version:Kr.version,rendererPackageName:Kr.rendererPackageName,rendererConfig:Kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zd(t),t===null?null:t.stateNode},findFiberByHostInstance:Kr.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ps=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ps.isDisabled&&ps.supportsFiber)try{go=ps.inject(zv),ft=ps}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mv;$e.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Na(e))throw Error(E(200));return Nv(t,e,null,n)};$e.createRoot=function(t,e){if(!Na(t))throw Error(E(299));var n=!1,r="",i=hp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=La(t,1,!1,null,null,n,!1,r,i),t[Tt]=e.current,xi(t.nodeType===8?t.parentNode:t),new Aa(e)};$e.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=zd(e),t=t===null?null:t.stateNode,t};$e.flushSync=function(t){return Tn(t)};$e.hydrate=function(t,e,n){if(!Lo(e))throw Error(E(200));return ko(null,t,e,!0,n)};$e.hydrateRoot=function(t,e,n){if(!Na(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=hp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dp(e,null,t,1,n??null,i,!1,s,o),t[Tt]=e.current,xi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Po(e)};$e.render=function(t,e,n){if(!Lo(e))throw Error(E(200));return ko(null,t,e,!1,n)};$e.unmountComponentAtNode=function(t){if(!Lo(t))throw Error(E(40));return t._reactRootContainer?(Tn(function(){ko(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};$e.unstable_batchedUpdates=Ta;$e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lo(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return ko(t,e,n,!1,r)};$e.version="18.3.1-next-f1338f8080-20240426";function pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pp)}catch(t){console.error(t)}}pp(),pd.exports=$e;var Dv=pd.exports,If=Dv;Sl.createRoot=If.createRoot,Sl.hydrateRoot=If.hydrateRoot;const Uv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M2 2l11 11M1.5 2.5a1 1 0 110-2 1 1 0 010 2zm12 12a1 1 0 110-2 1 1 0 010 2z",stroke:"currentColor"})),Fv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M13.5.5h-12a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1v-12a1 1 0 00-1-1z",stroke:"currentColor"})),Bv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M.5 7.5a7 7 0 1014 0 7 7 0 00-14 0z",stroke:"currentColor"})),jv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M.5.5l6 14 2-6 6-2-14-6z",stroke:"currentColor",strokeLinejoin:"round"})),$v=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-7 4V4H3v.5h.5zm2 0H6V4h-.5v.5zm0 2V7H6v-.5h-.5zm-2 0H3V7h.5v-.5zm8-2h.5V4h-.5v.5zm0 2V7h.5v-.5h-.5zm-2 0H9V7h.5v-.5zm0-2V4H9v.5h.5zm-6 6V10H3v.5h.5zm2 0H6V10h-.5v.5zm0 2v.5H6v-.5h-.5zm-2 0H3v.5h.5v-.5zm6-2V10H9v.5h.5zm0 2H9v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zm0-2h.5V10h-.5v.5zm1 3.5h-10v1h10v-1zM2 13.5v-12H1v12h1zm11-10v10h1v-10h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2.5 14a.5.5 0 01-.5-.5H1A1.5 1.5 0 002.5 15v-1zm10 1a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM3.5 5h2V4h-2v1zM5 4.5v2h1v-2H5zM5.5 6h-2v1h2V6zM4 6.5v-2H3v2h1zm7-2v2h1v-2h-1zm.5 1.5h-2v1h2V6zm-1.5.5v-2H9v2h1zM9.5 5h2V4h-2v1zm-6 6h2v-1h-2v1zm1.5-.5v2h1v-2H5zm.5 1.5h-2v1h2v-1zm-1.5.5v-2H3v2h1zm5-2v2h1v-2H9zm.5 2.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1zm-.5-2.5h-2v1h2v-1zm-6-4h4V5h-4v1zM4 6.5v4h1v-4H4zm6 0v4h1v-4h-1zM5.5 12h4v-1h-4v1z",fill:"currentColor"})),Wv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M4.5 4.5v-3a1 1 0 011-1h8a1 1 0 011 1v8a1 1 0 01-1 1h-3m-6-6h-3a1 1 0 00-1 1v8a1 1 0 001 1h8a1 1 0 001-1v-3m-6-6V7m0-2.5H7m3.5 6H8m2.5 0V8M8 4.5h2.5V7m-6 1v2.5H7",stroke:"currentColor"})),Vv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M13.5 3.5h.5v-.207l-.146-.147-.354.354zm-3-3l.354-.354L10.707 0H10.5v.5zm-8 6V6H2v.5h.5zm0 2H2V9h.5v-.5zm2 0H5V8h-.5v.5zm0 2v.5H5v-.5h-.5zm2-1H6v.207l.146.147L6.5 9.5zm1 1l-.354.354.354.353.354-.353L7.5 10.5zm1-1l.354.354L9 9.707V9.5h-.5zm2-3V6H10v.5h.5zm0 4H10v.5h.5v-.5zm2 0v.5h.5v-.5h-.5zM2 5V1.5H1V5h1zm11-1.5V5h1V3.5h-1zM2.5 1h8V0h-8v1zm7.646-.146l3 3 .708-.708-3-3-.708.708zM2 1.5a.5.5 0 01.5-.5V0A1.5 1.5 0 001 1.5h1zM1 12v1.5h1V12H1zm1.5 3h10v-1h-10v1zM14 13.5V12h-1v1.5h1zM12.5 15a1.5 1.5 0 001.5-1.5h-1a.5.5 0 01-.5.5v1zM1 13.5A1.5 1.5 0 002.5 15v-1a.5.5 0 01-.5-.5H1zM5 6H2.5v1H5V6zm-3 .5v2h1v-2H2zM2.5 9h2V8h-2v1zM4 8.5v2h1v-2H4zm.5 1.5H2v1h2.5v-1zM6 6v3.5h1V6H6zm.146 3.854l1 1 .708-.708-1-1-.708.708zm1.708 1l1-1-.708-.708-1 1 .708.708zM9 9.5V6H8v3.5h1zM13 6h-2.5v1H13V6zm-3 .5v4h1v-4h-1zm.5 4.5h2v-1h-2v1zm2.5-.5v-2h-1v2h1z",fill:"currentColor"})),Hv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M7.5 12L0 4h15l-7.5 8z",fill:"currentColor"})),Gv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M7.5 3l7.5 8H0l7.5-8z",fill:"currentColor"})),Qv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M7.5 4.793L3.293 9h8.414L7.5 4.793z",fill:"currentColor"})),bv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M7.5 10.207L11.707 6H3.293L7.5 10.207z",fill:"currentColor"})),Yv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M6.5 2.499l-.354-.354-.353.354.353.353L6.5 2.5zm1-.5H7v1h.5v-1zM2 8.495v-.5H1v.5h1zM8.145.146l-1.999 2 .708.706L8.853.854 8.145.146zM6.146 2.852l2 1.999.707-.707-2-1.999-.707.707zM7.5 3C10.537 3 13 5.461 13 8.496h1A6.499 6.499 0 007.5 2v1zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1z",fill:"currentColor"})),Kv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M14 8.495v-.5h-1v.5h1zM7.5 2.999H8v-1h-.5v1zm1-.5l.353.353.354-.353-.354-.354-.353.354zM13 8.495a5.499 5.499 0 01-5.5 5.496v1c3.589 0 6.5-2.909 6.5-6.496h-1zM7.5 13.99A5.499 5.499 0 012 8.495H1a6.499 6.499 0 006.5 6.496v-1zM2 8.495a5.499 5.499 0 015.5-5.496v-1A6.499 6.499 0 001 8.495h1zM6.147.854l2 1.998.706-.707-2-1.999-.706.708zm2 1.291l-2 1.999.706.707 2-1.999-.706-.707z",fill:"currentColor"})),qv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M5.65 12.477a.5.5 0 10-.3-.954l.3.954zm-3.648-2.96l-.484-.128-.254.968.484.127.254-.968zM9 14.5v.5h1v-.5H9zm.063-4.813l-.054-.497a.5.5 0 00-.299.852l.352-.354zM12.5 5.913h.5V5.91l-.5.002zm-.833-2.007l-.466-.18a.5.5 0 00.112.533l.354-.353zm-.05-2.017l.456-.204a.5.5 0 00-.319-.276l-.137.48zm-2.173.792l-.126.484a.5.5 0 00.398-.064l-.272-.42zm-3.888 0l-.272.42a.5.5 0 00.398.064l-.126-.484zM3.383 1.89l-.137-.48a.5.5 0 00-.32.276l.457.204zm-.05 2.017l.354.353a.5.5 0 00.112-.534l-.466.181zM2.5 5.93H3v-.002l-.5.002zm3.438 3.758l.352.355a.5.5 0 00-.293-.851l-.06.496zM5.5 11H6l-.001-.037L5.5 11zM5 14.5v.5h1v-.5H5zm.35-2.977c-.603.19-.986.169-1.24.085-.251-.083-.444-.25-.629-.49a4.8 4.8 0 01-.27-.402c-.085-.139-.182-.302-.28-.447-.191-.281-.473-.633-.929-.753l-.254.968c.08.02.184.095.355.346.082.122.16.252.258.412.094.152.202.32.327.484.253.33.598.663 1.11.832.51.168 1.116.15 1.852-.081l-.3-.954zm4.65-.585c0-.318-.014-.608-.104-.878-.096-.288-.262-.51-.481-.727l-.705.71c.155.153.208.245.237.333.035.105.053.254.053.562h1zm-.884-.753c.903-.097 1.888-.325 2.647-.982.78-.675 1.237-1.729 1.237-3.29h-1c0 1.359-.39 2.1-.892 2.534-.524.454-1.258.653-2.099.743l.107.995zM13 5.91a3.354 3.354 0 00-.98-2.358l-.707.706c.438.44.685 1.034.687 1.655l1-.003zm-.867-1.824c.15-.384.22-.794.21-1.207l-1 .025a2.12 2.12 0 01-.142.82l.932.362zm.21-1.207a3.119 3.119 0 00-.27-1.195l-.913.408c.115.256.177.532.184.812l1-.025zm-.726-.99c.137-.481.137-.482.136-.482h-.003l-.004-.002a.462.462 0 00-.03-.007 1.261 1.261 0 00-.212-.024 2.172 2.172 0 00-.51.054c-.425.091-1.024.317-1.82.832l.542.84c.719-.464 1.206-.634 1.488-.694a1.2 1.2 0 01.306-.03l-.008-.001a.278.278 0 01-.01-.002l-.006-.002h-.003l-.002-.001c-.001 0-.002 0 .136-.482zm-2.047.307a8.209 8.209 0 00-4.14 0l.252.968a7.209 7.209 0 013.636 0l.252-.968zm-3.743.064c-.797-.514-1.397-.74-1.822-.83a2.17 2.17 0 00-.51-.053 1.259 1.259 0 00-.241.03l-.004.002h-.003l.136.481.137.481h-.001l-.002.001-.003.001a.327.327 0 01-.016.004l-.008.001h.008a1.19 1.19 0 01.298.03c.282.06.769.23 1.488.694l.543-.84zm-2.9-.576a3.12 3.12 0 00-.27 1.195l1 .025a2.09 2.09 0 01.183-.812l-.913-.408zm-.27 1.195c-.01.413.06.823.21 1.207l.932-.362a2.12 2.12 0 01-.143-.82l-1-.025zm.322.673a3.354 3.354 0 00-.726 1.091l.924.38c.118-.285.292-.545.51-.765l-.708-.706zm-.726 1.091A3.354 3.354 0 002 5.93l1-.003c0-.31.06-.616.177-.902l-.924-.38zM2 5.93c0 1.553.458 2.597 1.239 3.268.757.65 1.74.88 2.64.987l.118-.993C5.15 9.09 4.416 8.89 3.89 8.438 3.388 8.007 3 7.276 3 5.928H2zm3.585 3.404c-.5.498-.629 1.09-.584 1.704L6 10.963c-.03-.408.052-.683.291-.921l-.705-.709zM5 11v3.5h1V11H5zm5 3.5V13H9v1.5h1zm0-1.5v-2.063H9V13h1z",fill:"currentColor"})),Jv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M3.5 3.5h8v8m-8-8V0m0 3.5H0m11.5 8h-8V6m8 5.5V15m0-3.5H15",stroke:"currentColor"})),Xv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M.5 12.5v-10a1 1 0 011-1h4l2 2h6a1 1 0 011 1v8a1 1 0 01-1 1h-12a1 1 0 01-1-1z",stroke:"currentColor"})),Zv=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M13.5 13.5H10m3.5 0V10m0 3.5l-4-4m.5-8h3.5m0 0V5m0-3.5l-4 4M5 1.5H1.5m0 0V5m0-3.5l4 4m-4 4.5v3.5m0 0H5m-3.5 0l4-4",stroke:"currentColor"})),ey=t=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},A.createElement("path",{d:"M4.5 14.5v-3a1 1 0 011-1h4a1 1 0 011 1v3m3 0h-12a1 1 0 01-1-1v-12a1 1 0 011-1h8.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V13.5a1 1 0 01-1 1z",stroke:"currentColor"}));var ze=(t=>(t.Line="Line",t.Square="Square",t.Circle="Circle",t.Direction="Direction",t.VectorDocument="VectorDocument",t.LayersDifference="LayersDifference",t.AntiClockwise="AntiClockwise",t.Clockwise="Clockwise",t.Github="Github",t.Crop="Crop",t.Folder="Folder",t.Save="Save",t.Svg="Svg",t.Expand="Expand",t.SolidDown="SolidDown",t.SolidUp="SolidUp",t.SolidUpSmall="SolidUpSmall",t.SolidDownSmall="SolidDownSmall",t))(ze||{});const ty={Line:Uv,Square:Fv,Circle:Bv,Direction:jv,VectorDocument:$v,LayersDifference:Wv,AntiClockwise:Yv,Clockwise:Kv,Github:qv,Crop:Jv,Folder:Xv,Save:ey,Svg:Vv,Expand:Zv,SolidDown:Hv,SolidUp:Gv,SolidUpSmall:Qv,SolidDownSmall:bv},gp=({name:t,className:e})=>{const n=ty[t];return R.jsx("div",{className:"icon w-5"+(e?" "+e:""),children:R.jsx(n,{})})};var V=(t=>(t.SELECT="SELECT",t.LINE="LINE",t.RECTANGLE="RECTANGLE",t.CIRCLE="CIRCLE",t.MOVE="MOVE",t.ERASER="ERASER",t))(V||{});const ne=({label:t,title:e,icon:n,onClick:r,active:i=!1,children:s,className:o,style:l})=>R.jsx(R.Fragment,{children:R.jsxs("button",{className:"bg-gray-950 text-blue-700 font-semibold py-2 px-2 border border-blue-500 rounded w-10 h-10 flex flex-row justify-center items-center hover:bg-blue-500 hover:text-white hover:border-transparent  data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:border-transparent"+(o?" "+o:""),style:l,"data-active":i,onClick:r,title:e,children:[n&&R.jsx(gp,{name:n}),t&&R.jsx("span",{children:t}),s]})}),gl=({label:t,title:e,icon:n,className:r,style:i,buttonStyle:s,children:o})=>{const[l,a]=A.useState(!1);return R.jsxs("div",{className:"flex flex-row gap-2 relative"+(r?" "+r:""),style:i,children:[R.jsx(ne,{icon:n,label:t,title:e,"data-active":l,onClick:()=>a(!l),style:s}),R.jsx(gp,{name:ze.SolidDownSmall,className:"-rotate-45 absolute -bottom-1 left-6 text-blue-700"}),l&&R.jsx("div",{className:"flex flex-row gap-1",onClick:()=>a(!1),children:o})]})},mp=!0,ny=!1,Ns={CCW:-1,CW:1,NOT_ORIENTABLE:0},ry=2*Math.PI,io=1,vp=0,lt=2,iy=3,sy=4,oy=1,ly=2,Oa=0,di=1,cr=2;var so=Object.freeze({__proto__:null,BOUNDARY:lt,CCW:mp,CONTAINS:iy,CW:ny,END_VERTEX:cr,INSIDE:io,INTERLACE:sy,NOT_VERTEX:Oa,ORIENTATION:Ns,OUTSIDE:vp,OVERLAP_OPPOSITE:ly,OVERLAP_SAME:oy,PIx2:ry,START_VERTEX:di});let ht=1e-6;function yp(t){ht=t}function _p(){return ht}const uy=3;function gu(t){return t<ht&&t>-ht}function In(t,e){return t-e<ht&&t-e>-ht}function wp(t,e){return t-e>ht}function ay(t,e){return t-e>-ht}function Ep(t,e){return t-e<-ht}function cy(t,e){return t-e<ht}var fy=Object.freeze({__proto__:null,DECIMALS:uy,EQ:In,EQ_0:gu,GE:ay,GT:wp,LE:cy,LT:Ep,getTolerance:_p,setTolerance:yp});let u={Utils:fy,Errors:void 0,Matrix:void 0,Planar_set:void 0,Point:void 0,Vector:void 0,Line:void 0,Circle:void 0,Segment:void 0,Arc:void 0,Box:void 0,Edge:void 0,Face:void 0,Ray:void 0,Ray_shooting:void 0,Multiline:void 0,Polygon:void 0,Distance:void 0,Inversion:void 0};for(let t in so)u[t]=so[t];Object.defineProperty(u,"DP_TOL",{get:function(){return _p()},set:function(t){yp(t)}});class b{static get ILLEGAL_PARAMETERS(){return new ReferenceError("Illegal Parameters")}static get ZERO_DIVISION(){return new Error("Zero division")}static get UNRESOLVED_BOUNDARY_CONFLICT(){return new Error("Unresolved boundary conflict in boolean operation")}static get INFINITE_LOOP(){return new Error("Infinite loop")}static get CANNOT_COMPLETE_BOOLEAN_OPERATION(){return new Error("Cannot complete boolean operation")}static get CANNOT_INVOKE_ABSTRACT_METHOD(){return new Error("Abstract method cannot be invoked")}static get OPERATION_IS_NOT_SUPPORTED(){return new Error("Operation is not supported")}static get UNSUPPORTED_SHAPE_TYPE(){return new Error("Unsupported shape type")}}u.Errors=b;class Ra{constructor(e,n){this.first=e,this.last=n||this.first}[Symbol.iterator](){let e;return{next:()=>(e=e?e.next:this.first,{value:e,done:e===void 0})}}get size(){let e=0;for(let n of this)e++;return e}toArray(e=void 0,n=void 0){let r=[],i=e||this.first,s=n||this.last,o=i;if(o===void 0)return r;do r.push(o),o=o.next;while(o!==s.next);return r}append(e){return this.isEmpty()?this.first=e:(e.prev=this.last,this.last.next=e),this.last=e,this.last.next=void 0,this.first.prev=void 0,this}insert(e,n){if(this.isEmpty())this.first=e,this.last=e;else if(n==null)e.next=this.first,this.first.prev=e,this.first=e;else{let r=n.next;n.next=e,r&&(r.prev=e),e.prev=n,e.next=r,this.last===n&&(this.last=e)}return this.last.next=void 0,this.first.prev=void 0,this}remove(e){return e===this.first&&e===this.last?(this.first=void 0,this.last=void 0):(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),e===this.last&&(this.last=e.prev)),this}isEmpty(){return this.first===void 0}static testInfiniteLoop(e){let n=e,r=e;do{if(n!=e&&n===r)throw b.INFINITE_LOOP;n=n.next,r=r.next.next}while(n!=e)}}const Cf={stroke:"black"};class dy{constructor(e=Cf){for(const n in e)this[n]=e[n];this.stroke=e.stroke??Cf.stroke}toAttributesString(){return Object.keys(this).reduce((e,n)=>e+(this[n]!==void 0?this.toAttrString(n,this[n]):""),"")}toAttrString(e,n){const r=e==="className"?"class":this.convertCamelToKebabCase(e);return n===null?`${r} `:`${r}="${n.toString()}" `}convertCamelToKebabCase(e){return e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).join("-").toLowerCase()}}function zn(t){return new dy(t).toAttributesString()}function Nr(t,e){let n=[],[r,i,s]=t.standard,[o,l,a]=e.standard,c=r*l-i*o,f=s*l-i*a,d=r*a-s*o;if(!u.Utils.EQ_0(c)){let h,v;i===0?(h=s/r,v=d/c):l===0?(h=a/o,v=d/c):r===0?(h=f/c,v=s/i):o===0?(h=f/c,v=a/l):(h=f/c,v=d/c),n.push(new u.Point(h,v))}return n}function Dn(t,e){let n=[],r=e.pc.projectionOn(t),i=e.pc.distanceTo(r)[0];if(u.Utils.EQ(i,e.r))n.push(r);else if(u.Utils.LT(i,e.r)){let s=Math.sqrt(e.r*e.r-i*i),o,l;o=t.norm.rotate90CCW().multiply(s),l=r.translate(o),n.push(l),o=t.norm.rotate90CW().multiply(s),l=r.translate(o),n.push(l)}return n}function yr(t,e){let n=[];for(let r of e.toSegments()){let i=ji(r,t);for(let s of i)Ap(s,n)||n.push(s)}return n}function Ao(t,e){let n=[];if(yr(t,e.box).length===0)return n;let r=new u.Circle(e.pc,e.r),i=Dn(t,r);for(let s of i)s.on(e)&&n.push(s);return n}function ji(t,e){let n=[];if(t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&!t.isZeroLength()&&n.push(t.pe),n.length>0||t.isZeroLength()||t.ps.leftTo(e)&&t.pe.leftTo(e)||!t.ps.leftTo(e)&&!t.pe.leftTo(e))return n;let r=new u.Line(t.ps,t.pe);return Nr(r,e)}function No(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;if(e.isZeroLength())return e.ps.on(t)&&n.push(e.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Line(e.ps,e.pe);if(r.incidentTo(i))t.ps.on(e)&&n.push(t.ps),t.pe.on(e)&&n.push(t.pe),e.ps.on(t)&&!e.ps.equalTo(t.ps)&&!e.ps.equalTo(t.pe)&&n.push(e.ps),e.pe.on(t)&&!e.pe.equalTo(t.ps)&&!e.pe.equalTo(t.pe)&&n.push(e.pe);else{let s=Nr(r,i);s.length>0&&Pf(s[0],t)&&Pf(s[0],e)&&n.push(s[0])}return n}function Pf(t,e){const n=e.box;return u.Utils.LE(t.x,n.xmax)&&u.Utils.GE(t.x,n.xmin)&&u.Utils.LE(t.y,n.ymax)&&u.Utils.GE(t.y,n.ymin)}function Oo(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength()){let[s,o]=t.ps.distanceTo(e.pc);return u.Utils.EQ(s,e.r)&&n.push(t.ps),n}let r=new u.Line(t.ps,t.pe),i=Dn(r,e);for(let s of i)s.on(t)&&n.push(s);return n}function Or(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.isZeroLength())return t.ps.on(e)&&n.push(t.ps),n;let r=new u.Line(t.ps,t.pe),i=new u.Circle(e.pc,e.r),s=Dn(r,i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function hy(t,e){let n=[];for(let r of e.toSegments()){let i=No(r,t);for(let s of i)n.push(s)}return n}function Sp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;let r=new u.Vector(t.pc,e.pc),i=t.r,s=e.r;if(u.Utils.EQ_0(i)||u.Utils.EQ_0(s))return n;if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y)&&u.Utils.EQ(i,s))return n.push(t.pc.translate(-i,0)),n;let o=t.pc.distanceTo(e.pc)[0];if(u.Utils.GT(o,i+s)||u.Utils.LT(o,Math.abs(i-s)))return n;r.x/=o,r.y/=o;let l;if(u.Utils.EQ(o,i+s)||u.Utils.EQ(o,Math.abs(i-s)))return l=t.pc.translate(i*r.x,i*r.y),n.push(l),n;let a=i*i/(2*o)-s*s/(2*o)+o/2,c=t.pc.translate(a*r.x,a*r.y),f=Math.sqrt(i*i-a*a);return l=c.translate(r.rotate90CCW().multiply(f)),n.push(l),l=c.translate(r.rotate90CW().multiply(f)),n.push(l),n}function py(t,e){let n=[];for(let r of e.toSegments()){let i=Oo(r,t);for(let s of i)n.push(s)}return n}function xp(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(t.pc.equalTo(e.pc)&&u.Utils.EQ(t.r,e.r)){let o;return o=t.start,o.on(e)&&n.push(o),o=t.end,o.on(e)&&n.push(o),o=e.start,o.on(t)&&n.push(o),o=e.end,o.on(t)&&n.push(o),n}let r=new u.Circle(t.pc,t.r),i=new u.Circle(e.pc,e.r),s=r.intersect(i);for(let o of s)o.on(t)&&o.on(e)&&n.push(o);return n}function Ma(t,e){let n=[];if(t.box.not_intersect(e.box))return n;if(e.pc.equalTo(t.pc)&&u.Utils.EQ(e.r,t.r))return n.push(t.start),n.push(t.end),n;let r=e,i=new u.Circle(t.pc,t.r),s=Sp(r,i);for(let o of s)o.on(t)&&n.push(o);return n}function gy(t,e){let n=[];for(let r of e.toSegments()){let i=Or(r,t);for(let s of i)n.push(s)}return n}function Tp(t,e){return t.isSegment?No(t.shape,e):Or(e,t.shape)}function Ip(t,e){return t.isSegment?Or(t.shape,e):xp(t.shape,e)}function Cp(t,e){return t.isSegment?ji(t.shape,e):Ao(e,t.shape)}function my(t,e){return t.isSegment?Ua(e,t.shape):Fa(e,t.shape)}function vy(t,e){return t.isSegment?Oo(t.shape,e):Ma(t.shape,e)}function za(t,e){let n=[];for(let r of e.edges)for(let i of Tp(r,t))n.push(i);return n}function Da(t,e){let n=[];for(let r of e.edges)for(let i of Ip(r,t))n.push(i);return n}function $i(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of Cp(r,t))Ap(i,n)||n.push(i);return t.sortPoints(n)}function Pp(t,e){let n=[];if(e.isEmpty())return n;for(let r of e.edges)for(let i of vy(r,t))n.push(i);return n}function Lp(t,e){return t.isSegment?Tp(e,t.shape):t.isArc?Ip(e,t.shape):t.isLine?Cp(e,t.shape):t.isRay?my(e,t.shape):[]}function kp(t,e){let n=[];if(e.isEmpty()||t.shape.box.not_intersect(e.box))return n;let r=e.edges.search(t.shape.box);for(let i of r)n=[...n,...Lp(t,i)];return n}function yy(t,e){let n=[];if(e.isEmpty()||t.size===0)return n;for(let r of t)n=[...n,...kp(r,e)];return n}function _y(t,e){let n=[];if(t.isEmpty()||e.isEmpty()||t.box.not_intersect(e.box))return n;for(let r of t.edges)n=[...n,...kp(r,e)];return n}function wy(t,e){return t instanceof u.Line?$i(t,e):t instanceof u.Segment?za(t,e):t instanceof u.Arc?Da(t,e):[]}function Ap(t,e){return e.some(n=>n.equalTo(t))}function Jt(t){return new u.Line(t.start,t.norm)}function Ua(t,e){return ji(e,Jt(t)).filter(n=>t.contains(n))}function Fa(t,e){return Ao(Jt(t),e).filter(n=>t.contains(n))}function Np(t,e){return Dn(Jt(t),e).filter(n=>t.contains(n))}function Ey(t,e){return yr(Jt(t),e).filter(n=>t.contains(n))}function Op(t,e){return Nr(Jt(t),e).filter(n=>t.contains(n))}function Sy(t,e){return Nr(Jt(t),Jt(e)).filter(n=>t.contains(n)).filter(n=>e.contains(n))}function Rp(t,e){return $i(Jt(t),e).filter(n=>t.contains(n))}function Mp(t,e){if(t.intersect&&t.intersect instanceof Function)return t.intersect(e);throw b.UNSUPPORTED_SHAPE_TYPE}function Wi(t,e){let n=[];for(let r of e)n=[...n,...Mp(r,r.shape)];return n}function xy(t,e){let n=[];for(let r of t)for(let i of e)n=[...n,...Mp(r,i)];return n}let Un=class ni extends Ra{constructor(...e){if(super(),this.isInfinite=!1,e.length===1&&e[0]instanceof Array&&e[0].length>0){let n=!1;const r=e[0],i=r.length,s=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray||a instanceof u.Line,o=a=>a instanceof u.Segment||a instanceof u.Arc||a instanceof u.Ray,l=a=>a instanceof u.Segment||a instanceof u.Arc;if(n=i===1&&s(r[0])||i>1&&o(r[0])&&o(r[i-1])&&r.slice(1,i-1).every(l),n){this.isInfinite=r.some(a=>a instanceof u.Ray||a instanceof u.Line);for(let a of r){let c=new u.Edge(a);this.append(c)}this.setArcLength()}else throw u.Errors.ILLEGAL_PARAMETERS}}get edges(){return[...this]}get box(){return this.edges.reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){let e=this.edges.map(n=>n.start);return e.push(this.last.end),e}get length(){if(this.isEmpty())return 0;if(this.isInfinite)return Number.POSITIVE_INFINITY;let e=0;for(let n of this)e+=n.length;return e}clone(){return new ni(this.toShapes())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e)}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}pointAtLength(e){if(e>this.length||e<0||this.isInfinite)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return this.insert(i,s),n.shape=r[1],i}getChain(e,n){let r=[];for(let i=e;i!==n.next;i=i.next)r.push(i);return r}split(e){for(let n of e){let r=this.findEdgeByPoint(n);this.addVertex(n,r)}return this}findEdgeByPoint(e){let n;for(let r of this)if(r.shape.contains(e)){n=r;break}return n}distanceTo(e){if(e instanceof Point){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Line){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Circle){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Segment){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){const[n,r]=u.Distance.shape2multiline(e,this);return[n,r.reverse()]}if(e instanceof u.Multiline)return u.Distance.multiline2multiline(this,e);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}intersect(e){return e instanceof u.Multiline?xy(this,e):Wi(e,this)}contains(e){if(e instanceof u.Point)return this.edges.some(n=>n.shape.contains(e));throw u.Errors.UNSUPPORTED_SHAPE_TYPE}translate(e){return new ni(this.edges.map(n=>n.shape.translate(e)))}rotate(e=0,n=new u.Point){return new ni(this.edges.map(r=>r.shape.rotate(e,n)))}transform(e=new u.Matrix){return new ni(this.edges.map(n=>n.shape.transform(e)))}toShapes(){return this.edges.map(e=>e.shape.clone())}toJSON(){return this.edges.map(e=>e.toJSON())}svgPoints(){return this.vertices.map(e=>`${e.x},${e.y}`).join(" ")}dpath(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e}svg(e={}){let n=`
<path ${zn({fill:"none",...e})} d="`;n+=`
M${this.first.start.x},${this.first.start.y}`;for(let r of this)n+=r.svg();return n+=`" >
</path>`,n}};u.Multiline=Un;const Ty=(...t)=>new u.Multiline(...t);u.multiline=Ty;function _r(t,e,n){let r=n.length,i=t.shape.split(e);if(i.length===0)return;let s=0;i[0]===null?s=0:i[1]===null?s=t.shape.length:s=i[0].length;let o=Oa;In(s,0)&&(o|=di),In(s,t.shape.length)&&(o|=cr);let l;s===1/0?l=i[0].coord(e):l=o&cr&&t.next&&t.next.arc_length===0?0:t.arc_length+s,n.push({id:r,pt:e,arc_length:l,edge_before:t,edge_after:void 0,face:t.face,is_vertex:o})}function Oi(t){t.int_points1_sorted=Ot(t.int_points1),t.int_points2_sorted=Ot(t.int_points2)}function Ot(t){let e=new Map,n=0;for(let i of t)e.has(i.face)||(e.set(i.face,n),n++);for(let i of t)i.faceId=e.get(i.face);return t.slice().sort(Iy)}function Iy(t,e){return t.faceId<e.faceId?-1:t.faceId>e.faceId?1:t.arc_length<e.arc_length?-1:t.arc_length>e.arc_length?1:0}function Ba(t){if(t.int_points1.length<2)return;let e=!1,n,r,i,s;for(let o=0;o<t.int_points1_sorted.length;o++)if(t.int_points1_sorted[o].id!==-1){n=t.int_points1_sorted[o],r=t.int_points2[n.id];for(let l=o+1;l<t.int_points1_sorted.length&&(i=t.int_points1_sorted[l],!!In(i.arc_length,n.arc_length));l++)i.id!==-1&&(s=t.int_points2[i.id],s.id!==-1&&i.edge_before===n.edge_before&&i.edge_after===n.edge_after&&s.edge_before===r.edge_before&&s.edge_after===r.edge_after&&(i.id=-1,s.id=-1,e=!0))}r=t.int_points2_sorted[0],n=t.int_points1[r.id];for(let o=1;o<t.int_points2_sorted.length;o++){let l=t.int_points2_sorted[o];if(l.id===-1)continue;if(r.id===-1||!In(l.arc_length,r.arc_length)){r=l,n=t.int_points1[r.id];continue}let a=t.int_points1[l.id];a.edge_before===n.edge_before&&a.edge_after===n.edge_after&&l.edge_before===r.edge_before&&l.edge_after===r.edge_after&&(a.id=-1,l.id=-1,e=!0)}e&&(t.int_points1=t.int_points1.filter(o=>o.id>=0),t.int_points2=t.int_points2.filter(o=>o.id>=0),t.int_points1.forEach((o,l)=>o.id=l),t.int_points2.forEach((o,l)=>o.id=l))}function mu(t){for(let e of t)e.edge_before&&(e.edge_before.bvStart=void 0,e.edge_before.bvEnd=void 0,e.edge_before.bv=void 0,e.edge_before.overlap=void 0),e.edge_after&&(e.edge_after.bvStart=void 0,e.edge_after.bvEnd=void 0,e.edge_after.bv=void 0,e.edge_after.overlap=void 0);for(let e of t)e.edge_before&&(e.edge_before.bvEnd=lt),e.edge_after&&(e.edge_after.bvStart=lt)}function vu(t,e){for(let n of t)n.edge_before&&n.edge_before.setInclusion(e),n.edge_after&&n.edge_after.setInclusion(e)}function Cy(t){let e,n,r,i=t.int_points1.length;for(let s=0;s<i;s++){let o=t.int_points1_sorted[s];o.face!==e&&(n=s,e=o.face);let l=s,a=wr(t.int_points1_sorted,s,e),c;l+a<i&&t.int_points1_sorted[l+a].face===e?c=l+a:c=n;let f=wr(t.int_points1_sorted,c,e);r=null;for(let g=c;g<c+f;g++){let p=t.int_points1_sorted[g];if(p.face===e&&t.int_points2[p.id].face===t.int_points2[o.id].face){r=p;break}}if(r===null)continue;let d=o.edge_after,h=r.edge_before;if(!(d.bv===lt&&h.bv===lt)||d!==h)continue;let v=t.int_points2[o.id],y=t.int_points2[r.id],_=v.edge_after,C=y.edge_before;_.bv===lt&&C.bv===lt&&_===C||(v=t.int_points2[r.id],y=t.int_points2[o.id],_=v.edge_after,C=y.edge_before),_.bv===lt&&C.bv===lt&&_===C&&d.setOverlap(_)}}function wr(t,e,n){let r,i,s=1;if(t.length===1)return 1;r=t[e];for(let o=e+1;o<t.length&&!(r.face!==n||(i=t[o],!(i.pt.equalTo(r.pt)&&i.edge_before===r.edge_before&&i.edge_after===r.edge_after)));o++)s++;return s}function Er(t,e){if(e){for(let n of e){let r=n.edge_before;if(n.is_vertex=Oa,r.shape.start&&r.shape.start.equalTo(n.pt)&&(n.is_vertex|=di),r.shape.end&&r.shape.end.equalTo(n.pt)&&(n.is_vertex|=cr),n.is_vertex&di){n.edge_before=r.prev,r.prev&&(n.is_vertex=cr);continue}if(n.is_vertex&cr)continue;let i=t.addVertex(n.pt,r);n.edge_before=i}for(let n of e)n.edge_before?n.edge_after=n.edge_before.next:t instanceof Un&&n.is_vertex&di&&(n.edge_after=t.first)}}function Lf(t,e,n){const r=t.edge_before,i=e.edge_after,s=n.length;r.next=n[0],n[0].prev=r,n[s-1].next=i,i.prev=n[s-1]}const{INSIDE:at,OUTSIDE:ct,BOUNDARY:fe,OVERLAP_SAME:Py,OVERLAP_OPPOSITE:Ly}=so,{NOT_VERTEX:gE,START_VERTEX:kf,END_VERTEX:Af}=so,Ro=1,Vi=2,Cn=3;function ky(t,e){let[n,r]=Hi(t,e,Ro,!0);return n}function yu(t,e){let r=e.clone().reverse(),[i,s]=Hi(t,r,Cn,!0);return i}function zp(t,e){let[n,r]=Hi(t,e,Vi,!0);return n}function Dp(t,e){let[n,r]=Hi(t,e,Vi,!1),i=[];for(let o of n.faces)i=[...i,...[...o.edges].map(l=>l.shape)];let s=[];for(let o of r.faces)s=[...s,...[...o.edges].map(l=>l.shape)];return[i,s]}function _u(t,e){let[n,r]=Hi(t,e,Cn,!1),i=[];for(let s of n.faces)i=[...i,...[...s.edges].map(o=>o.shape)];return i}function Up(t,e){let n=t.clone(),r=e.clone(),i=Fp(n,r);Oi(i),Er(n,i.int_points1_sorted),Er(r,i.int_points2_sorted),Ba(i),Oi(i);let s=i.int_points1_sorted.map(l=>l.pt),o=i.int_points2_sorted.map(l=>l.pt);return[s,o]}function Ay(t,e,n,r){let i=Nf(t,n.int_points1),s=Nf(e,n.int_points2);for(Of(i,e),Of(s,t),mu(n.int_points1),mu(n.int_points2),vu(n.int_points1,e),vu(n.int_points2,t);Oy(t,e,n.int_points1,n.int_points1_sorted,n.int_points2,n););Cy(n),wu(t,r,n.int_points1_sorted,!0),wu(e,r,n.int_points2_sorted,!1),Rf(t,i,r,!0),Rf(e,s,r,!1)}function Ny(t,e,n,r){Ry(t,e,r,n.int_points2),My(t,e,n),Eu(t,n.int_points1),Eu(e,n.int_points2),Su(t,n.int_points1,n.int_points2),Su(t,n.int_points2,n.int_points1)}function Hi(t,e,n,r){let i=t.clone(),s=e.clone(),o=Fp(i,s);return Oi(o),Er(i,o.int_points1_sorted),Er(s,o.int_points2_sorted),Ba(o),Oi(o),Ay(i,s,o,n),r&&Ny(i,s,o,n),[i,s]}function Fp(t,e){let n={int_points1:[],int_points2:[]};for(let r of t.edges){let i=e.edges.search(r.box);for(let s of i){let o=r.shape.intersect(s.shape);for(let l of o)_r(r,l,n.int_points1),_r(s,l,n.int_points2)}}return n}function Nf(t,e){let n=[];for(let r of t.faces)e.find(i=>i.face===r)||n.push(r);return n}function Of(t,e){for(let n of t)n.first.bv=n.first.bvStart=n.first.bvEnd=void 0,n.first.setInclusion(e)}function Oy(t,e,n,r,i,s){let o,l,a,c=r.length,f=!1;for(let d=0;d<c;d++){let h=r[d];h.face!==o&&(l=d,o=h.face);let v=d,y=wr(r,d,o),_;v+y<c&&r[v+y].face===o?_=v+y:_=l;let C=wr(r,_,o);a=null;for(let m=_;m<_+C;m++){let w=r[m];if(w.face===o&&i[w.id].face===i[h.id].face){a=w;break}}if(a===null)continue;let g=h.edge_after,p=a.edge_before;if(g.bv===fe&&p.bv!=fe){g.bv=p.bv;continue}if(g.bv!=fe&&p.bv===fe){p.bv=g.bv;continue}if(g.bv===fe&&p.bv===fe&&g!=p||g.bv===at&&p.bv===ct||g.bv===ct&&p.bv===at){let m=g.next;for(;m!=p;)m.bvStart=void 0,m.bvEnd=void 0,m.bv=void 0,m.setInclusion(e),m=m.next}if(g.bv===fe&&p.bv===fe&&g!=p){let m=g.next,w;for(;m!=p;){if(m.bv!=fe){if(w===void 0)w=m.bv;else if(m.bv!=w)throw b.UNRESOLVED_BOUNDARY_CONFLICT}m=m.next}w!=null&&(g.bv=w,p.bv=w);continue}if(g.bv===at&&p.bv===ct||g.bv===ct&&p.bv===at){let m=g;for(;m!=p;){if(m.bvStart===g.bv&&m.bvEnd===p.bv){let[w,S]=m.shape.distanceTo(e);if(w<10*u.DP_TOL){_r(m,S.ps,n);let T=n[n.length-1];if(T.is_vertex&kf)T.edge_after=m,T.edge_before=m.prev,m.bvStart=fe,m.bv=void 0,m.setInclusion(e);else if(T.is_vertex&Af)T.edge_after=m.next,m.bvEnd=fe,m.bv=void 0,m.setInclusion(e);else{let B=e.addVertex(T.pt,m);T.edge_before=B,T.edge_after=B.next,B.setInclusion(e),B.next.bvStart=fe,B.next.bvEnd=void 0,B.next.bv=void 0,B.next.setInclusion(e)}let P=e.findEdgeByPoint(S.pe);_r(P,S.pe,i);let k=i[i.length-1];if(k.is_vertex&kf)k.edge_after=P,k.edge_before=P.prev;else if(k.is_vertex&Af)k.edge_after=P.next;else{let B=i.find(Me=>Me.edge_after===P),N=e.addVertex(k.pt,P);k.edge_before=N,k.edge_after=N.next,B&&(B.edge_after=N),N.bvStart=void 0,N.bvEnd=fe,N.bv=void 0,N.setInclusion(t),N.next.bvStart=fe,N.next.bvEnd=void 0,N.next.bv=void 0,N.next.setInclusion(t)}Oi(s),f=!0;break}}m=m.next}if(f)break;throw b.UNRESOLVED_BOUNDARY_CONFLICT}}return f}function wu(t,e,n,r){if(!n)return;let i,s,o,l;for(let a=0;a<n.length;a++){if(o=n[a],o.face!==i&&(s=a,i=o.face),i.isEmpty())continue;let c=a,f=wr(n,a,i),d;c+f<n.length&&n[c+f].face===o.face?d=c+f:d=s,l=n[d];let h=d,v=wr(n,h,i),y=o.edge_after,_=l.edge_before;if(y.bv===at&&_.bv===at&&e===Ro||y.bv===ct&&_.bv===ct&&e===Vi||(y.bv===ct||_.bv===ct)&&e===Cn&&!r||(y.bv===at||_.bv===at)&&e===Cn&&r||y.bv===fe&&_.bv===fe&&y.overlap&Py&&r||y.bv===fe&&_.bv===fe&&y.overlap&Ly){t.removeChain(i,y,_);for(let C=c;C<c+f;C++)n[C].edge_after=void 0;for(let C=h;C<h+v;C++)n[C].edge_before=void 0}a+=f-1}}function Ry(t,e,n,r){for(let i of e.faces){for(let s of i)t.edges.add(s);r.find(s=>s.face===i)===void 0&&t.addFace(i.first,i.last)}}function My(t,e,n){if(n.int_points1.length!==0)for(let r=0;r<n.int_points1.length;r++){let i=n.int_points1[r],s=n.int_points2[r];if(i.edge_before!==void 0&&i.edge_after===void 0&&s.edge_before===void 0&&s.edge_after!==void 0&&(i.edge_before.next=s.edge_after,s.edge_after.prev=i.edge_before,i.edge_after=s.edge_after,s.edge_before=i.edge_before),s.edge_before!==void 0&&s.edge_after===void 0&&i.edge_before===void 0&&i.edge_after!==void 0&&(s.edge_before.next=i.edge_after,i.edge_after.prev=s.edge_before,s.edge_after=i.edge_after,i.edge_before=s.edge_before),i.edge_before!==void 0&&i.edge_after===void 0)for(let o of n.int_points1_sorted)o!==i&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(i.pt)&&(i.edge_before.next=o.edge_after,o.edge_after.prev=i.edge_before,i.edge_after=o.edge_after,o.edge_before=i.edge_before);if(s.edge_before!==void 0&&s.edge_after===void 0)for(let o of n.int_points2_sorted)o!==s&&o.edge_before===void 0&&o.edge_after!==void 0&&o.pt.equalTo(s.pt)&&(s.edge_before.next=o.edge_after,o.edge_after.prev=s.edge_before,s.edge_after=o.edge_after,o.edge_before=s.edge_before)}}function Eu(t,e){for(let n of e)t.faces.delete(n.face),n.face=void 0,n.edge_before&&(n.edge_before.face=void 0),n.edge_after&&(n.edge_after.face=void 0)}function Su(t,e,n){for(let r of e){if(r.edge_before===void 0||r.edge_after===void 0||r.face||r.edge_after.face||r.edge_before.face)continue;let i=r.edge_after,s=r.edge_before;try{Ra.testInfiniteLoop(i)}catch{throw b.CANNOT_COMPLETE_BOOLEAN_OPERATION}let o=t.addFace(i,s);for(let l of e)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o);for(let l of n)l.edge_before&&l.edge_after&&l.edge_before.face===o&&l.edge_after.face===o&&(l.face=o)}}function Rf(t,e,n,r){for(let i of e){let s=i.first.bv;(n===Ro&&s===at||n===Cn&&s===at&&r||n===Cn&&s===ct&&!r||n===Vi&&s===ct)&&t.deleteFace(i)}}var zy=Object.freeze({__proto__:null,BOOLEAN_INTERSECT:Vi,BOOLEAN_SUBTRACT:Cn,BOOLEAN_UNION:Ro,calculateIntersections:Up,innerClip:Dp,intersect:zp,outerClip:_u,removeNotRelevantChains:wu,removeOldFaces:Eu,restoreFaces:Su,subtract:yu,unify:ky});const Dy=RegExp("T.F..FFF.|T.F...F.."),Uy=RegExp("T........|.T.......|...T.....|....T...."),Fy=RegExp("FT.......|F..T.....|F...T...."),By=RegExp("T.F..F..."),jy=RegExp("T.F..F...|.TF..F...|..FT.F...|..F.TF...");class Rr{constructor(){this.m=new Array(9).fill(void 0)}get I2I(){return this.m[0]}set I2I(e){this.m[0]=e}get I2B(){return this.m[1]}set I2B(e){this.m[1]=e}get I2E(){return this.m[2]}set I2E(e){this.m[2]=e}get B2I(){return this.m[3]}set B2I(e){this.m[3]=e}get B2B(){return this.m[4]}set B2B(e){this.m[4]=e}get B2E(){return this.m[5]}set B2E(e){this.m[5]=e}get E2I(){return this.m[6]}set E2I(e){this.m[6]=e}get E2B(){return this.m[7]}set E2B(e){this.m[7]=e}get E2E(){return this.m[8]}set E2E(e){this.m[8]=e}toString(){return this.m.map(e=>e instanceof Array&&e.length>0?"T":e instanceof Array&&e.length===0?"F":"*").join("")}equal(){return Dy.test(this.toString())}intersect(){return Uy.test(this.toString())}touch(){return Fy.test(this.toString())}inside(){return By.test(this.toString())}covered(){return jy.test(this.toString())}}function hi(t,e){let n,r=new u.Ray(e),i=new u.Line(r.pt,r.norm);const s=new u.Box(r.box.xmin-u.DP_TOL,r.box.ymin-u.DP_TOL,r.box.xmax,r.box.ymax+u.DP_TOL);if(t.box.not_intersect(s))return u.OUTSIDE;let o=t.edges.search(s);if(o.length===0)return u.OUTSIDE;for(let f of o)if(f.shape.contains(e))return u.BOUNDARY;let l=[...t.faces],a=[];for(let f of o)for(let d of r.intersect(f.shape)){if(d.equalTo(e))return u.BOUNDARY;a.push({pt:d,edge:f,face_index:l.indexOf(f.face)})}a.sort((f,d)=>Ep(f.pt.x,d.pt.x)?-1:wp(f.pt.x,d.pt.x)?1:f.face_index<d.face_index?-1:f.face_index>d.face_index?1:f.edge.arc_length<d.edge.arc_length?-1:f.edge.arc_length>d.edge.arc_length?1:0);let c=0;for(let f=0;f<a.length;f++){let d=a[f];if(d.pt.equalTo(d.edge.shape.start)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.prev===a[f-1].edge)continue;let h=d.edge.prev;for(;gu(h.length);)h=h.prev;let v=h.shape.tangentInEnd(),y=d.pt.translate(v),_=d.edge.shape.tangentInStart(),C=d.pt.translate(_),g=y.leftTo(i),p=C.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.pt.equalTo(d.edge.shape.end)){if(f>0&&d.pt.equalTo(a[f-1].pt)&&d.face_index===a[f-1].face_index&&d.edge.next===a[f-1].edge)continue;let h=d.edge.next;for(;gu(h.length);)h=h.next;let v=h.shape.tangentInStart(),y=d.pt.translate(v),_=d.edge.shape.tangentInEnd(),C=d.pt.translate(_),g=y.leftTo(i),p=C.leftTo(i);(g&&!p||!g&&p)&&c++}else if(d.edge.shape instanceof u.Segment)c++;else{let h=d.edge.shape.box;In(d.pt.y,h.ymin)||In(d.pt.y,h.ymax)||c++}}return n=c%2===1?io:vp,n}function $y(t,e){return Mr(t,e).equal()}function Bp(t,e){return Mr(t,e).intersect()}function Wy(t,e){return Mr(t,e).touch()}function Vy(t,e){return!Bp(t,e)}function jp(t,e){return Mr(t,e).inside()}function $p(t,e){return Mr(t,e).covered()}function Hy(t,e){return jp(e,t)}function Wp(t,e){return $p(e,t)}function Mr(t,e){if(t instanceof u.Line&&e instanceof u.Line)return Gy(t,e);if(t instanceof u.Line&&e instanceof u.Circle)return Qy(t,e);if(t instanceof u.Line&&e instanceof u.Box)return by(t,e);if(t instanceof u.Line&&e instanceof u.Polygon)return Yy(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&e instanceof u.Polygon)return Mf(t,e);if((t instanceof u.Segment||t instanceof u.Arc)&&(e instanceof u.Circle||e instanceof u.Box))return Mf(t,new u.Polygon(e));if(t instanceof u.Polygon&&e instanceof u.Polygon)return gs(t,e);if((t instanceof u.Circle||t instanceof u.Box)&&(e instanceof u.Circle||e instanceof u.Box))return gs(new u.Polygon(t),new u.Polygon(e));if((t instanceof u.Circle||t instanceof u.Box)&&e instanceof u.Polygon)return gs(new u.Polygon(t),e);if(t instanceof u.Polygon&&(e instanceof u.Circle||e instanceof u.Box))return gs(t,new u.Polygon(e))}function Gy(t,e){let n=new Rr,r=Nr(t,e);return r.length===0?t.contains(e.pt)&&e.contains(t.pt)?(n.I2I=[t],n.I2E=[],n.E2I=[]):(n.I2I=[],n.I2E=[t],n.E2I=[e]):(n.I2I=r,n.I2E=t.split(r),n.E2I=e.split(r)),n}function Qy(t,e){let n=new Rr,r=Dn(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Un([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon([e.toArc()]).cutWithLine(t)}return n}function by(t,e){let n=new Rr,r=yr(t,e);if(r.length===0)n.I2I=[],n.I2B=[],n.I2E=[t],n.E2I=[e];else if(r.length===1)n.I2I=[],n.I2B=r,n.I2E=t.split(r),n.E2I=[e];else{let i=new Un([t]),s=t.sortPoints(r);i.split(s);let o=i.toShapes();e.toSegments().some(l=>l.contains(r[0])&&l.contains(r[1]))?(n.I2I=[],n.I2B=[o[1]],n.I2E=[o[0],o[2]],n.E2I=[e]):(n.I2I=[o[1]],n.I2B=s,n.I2E=[o[0],o[2]],n.E2I=new u.Polygon(e.toSegments()).cutWithLine(t))}return n}function Yy(t,e){let n=new Rr,r=$i(t,e),i=new Un([t]),s=r.length>0?r.slice():t.sortPoints(r);return i.split(s),[...i].forEach(o=>o.setInclusion(e)),n.I2I=[...i].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...i].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...i].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.E2I=e.cutWithLine(t),n}function Mf(t,e){let n=new Rr,r=wy(t,e),i=r.length>0?r.slice():t.sortPoints(r),s=new Un([t]);s.split(i),[...s].forEach(o=>o.setInclusion(e)),n.I2I=[...s].filter(o=>o.bv===u.INSIDE).map(o=>o.shape),n.I2B=[...s].slice(1).map(o=>o.bv===u.BOUNDARY?o.shape:o.shape.start),n.I2E=[...s].filter(o=>o.bv===u.OUTSIDE).map(o=>o.shape),n.B2I=[],n.B2B=[],n.B2E=[];for(let o of[t.start,t.end])switch(hi(e,o)){case u.INSIDE:n.B2I.push(o);break;case u.BOUNDARY:n.B2B.push(o);break;case u.OUTSIDE:n.B2E.push(o);break}return n}function gs(t,e){let n=new Rr,[r,i]=Up(t,e),s=zp(t,e),o=yu(t,e),l=yu(e,t),[a,c]=Dp(t,e),f=_u(t,e),d=_u(e,t);return n.I2I=s.isEmpty()?[]:[s],n.I2B=c,n.I2E=o.isEmpty()?[]:[o],n.B2I=a,n.B2B=r,n.B2E=f,n.E2I=l.isEmpty()?[]:[l],n.E2B=d,n}var Vp=Object.freeze({__proto__:null,contain:Hy,cover:Wp,covered:$p,disjoint:Vy,equal:$y,inside:jp,intersect:Bp,relate:Mr,touch:Wy});class Ze{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}clone(){return new Ze(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new Ze(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let n,r;if(e.length==1&&!isNaN(e[0].x)&&!isNaN(e[0].y))n=e[0].x,r=e[0].y;else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=e[0],r=e[1];else throw b.ILLEGAL_PARAMETERS;return this.multiply(new Ze(1,0,0,1,n,r))}rotate(e,n=0,r=0){let i=Math.cos(e),s=Math.sin(e);return this.translate(n,r).multiply(new Ze(i,s,-s,i,0,0)).translate(-n,-r)}scale(e,n){return this.multiply(new Ze(e,0,0,n,0,0))}equalTo(e){return!(!u.Utils.EQ(this.tx,e.tx)||!u.Utils.EQ(this.ty,e.ty)||!u.Utils.EQ(this.a,e.a)||!u.Utils.EQ(this.b,e.b)||!u.Utils.EQ(this.c,e.c)||!u.Utils.EQ(this.d,e.d))}}u.Matrix=Ze;const Ky=(...t)=>new u.Matrix(...t);u.matrix=Ky;const qy=class xu{constructor(e,n){this.low=e,this.high=n}clone(){return new xu(this.low,this.high)}get max(){return this.clone()}less_than(e){return this.low<e.low||this.low===e.low&&this.high<e.high}equal_to(e){return this.low===e.low&&this.high===e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}merge(e){return new xu(this.low===void 0?e.low:this.low<e.low?this.low:e.low,this.high===void 0?e.high:this.high>e.high?this.high:e.high)}output(){return[this.low,this.high]}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e<n}},pe=0,W=1;class an{constructor(e=void 0,n=void 0,r=null,i=null,s=null,o=W){if(this.left=r,this.right=i,this.parent=s,this.color=o,this.item={key:e,value:n},e&&e instanceof Array&&e.length===2&&!Number.isNaN(e[0])&&!Number.isNaN(e[1])){let[l,a]=e;l>a&&([l,a]=[a,l]),this.item.key=new qy(l,a)}this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===W}_value_less_than(e){return this.item.value&&e.item.value&&this.item.value.less_than?this.item.value.less_than(e.item.value):this.item.value<e.item.value}less_than(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.less_than(e.item.key):this.item.key.less_than(e.item.key)||this.item.key.equal_to(e.item.key)&&this._value_less_than(e)}_value_equal(e){return this.item.value&&e.item.value&&this.item.value.equal_to?this.item.value.equal_to(e.item.value):this.item.value===e.item.value}equal_to(e){return this.item.value===this.item.key&&e.item.value===e.item.key?this.item.key.equal_to(e.item.key):this.item.key.equal_to(e.item.key)&&this._value_equal(e)}intersect(e){return this.item.key.intersect(e.item.key)}copy_data(e){this.item.key=e.item.key,this.item.value=e.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.right.max)}if(this.left&&this.left.max){const e=this.item.key.constructor.comparable_max;this.max=e(this.max,this.left.max)}}not_intersect_left_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.left.max.high!==void 0?this.left.max.high:this.left.max;return n(r,e.item.key.low)}not_intersect_right_subtree(e){const n=this.item.key.constructor.comparable_less_than;let r=this.right.max.low!==void 0?this.right.max.low:this.right.item.key.low;return n(e.item.key.high,r)}}class Ri{constructor(){this.root=null,this.nil_node=new an}get size(){let e=0;return this.tree_walk(this.root,()=>e++),e}get keys(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.key.output?n.item.key.output():n.item.key)),e}get values(){let e=[];return this.tree_walk(this.root,n=>e.push(n.item.value)),e}get items(){let e=[];return this.tree_walk(this.root,n=>e.push({key:n.item.key.output?n.item.key.output():n.item.key,value:n.item.value})),e}isEmpty(){return this.root==null||this.root===this.nil_node}clear(){this.root=null}insert(e,n=e){if(e===void 0)return;let r=new an(e,n,this.nil_node,this.nil_node,null,pe);return this.tree_insert(r),this.recalc_max(r),r}exist(e,n=e){let r=new an(e,n);return!!this.tree_search(this.root,r)}remove(e,n=e){let r=new an(e,n),i=this.tree_search(this.root,r);return i&&this.tree_delete(i),i}search(e,n=(r,i)=>r===i?i.output():r){let r=new an(e),i=[];return this.tree_search_interval(this.root,r,i),i.map(s=>n(s.item.value,s.item.key))}intersect_any(e){let n=new an(e);return this.tree_find_any_interval(this.root,n)}forEach(e){this.tree_walk(this.root,n=>e(n.item.key,n.item.value))}map(e){const n=new Ri;return this.tree_walk(this.root,r=>n.insert(r.item.key,e(r.item.value,r.item.key))),n}*iterate(e,n=(r,i)=>r===i?i.output():r){let r;for(e?r=this.tree_search_nearest_forward(this.root,new an(e)):this.root&&(r=this.local_minimum(this.root));r;)yield n(r.item.value,r.item.key),r=this.tree_successor(r)}recalc_max(e){let n=e;for(;n.parent!=null;)n.parent.update_max(),n=n.parent}tree_insert(e){let n=this.root,r=null;if(this.root==null||this.root===this.nil_node)this.root=e;else{for(;n!==this.nil_node;)r=n,e.less_than(n)?n=n.left:n=n.right;e.parent=r,e.less_than(r)?r.left=e:r.right=e}this.insert_fixup(e)}insert_fixup(e){let n,r;for(n=e;n!==this.root&&n.parent.color===pe;)n.parent===n.parent.parent.left?(r=n.parent.parent.right,r.color===pe?(n.parent.color=W,r.color=W,n.parent.parent.color=pe,n=n.parent.parent):(n===n.parent.right&&(n=n.parent,this.rotate_left(n)),n.parent.color=W,n.parent.parent.color=pe,this.rotate_right(n.parent.parent))):(r=n.parent.parent.left,r.color===pe?(n.parent.color=W,r.color=W,n.parent.parent.color=pe,n=n.parent.parent):(n===n.parent.left&&(n=n.parent,this.rotate_right(n)),n.parent.color=W,n.parent.parent.color=pe,this.rotate_left(n.parent.parent)));this.root.color=W}tree_delete(e){let n,r;e.left===this.nil_node||e.right===this.nil_node?n=e:n=this.tree_successor(e),n.left!==this.nil_node?r=n.left:r=n.right,r.parent=n.parent,n===this.root?this.root=r:(n===n.parent.left?n.parent.left=r:n.parent.right=r,n.parent.update_max()),this.recalc_max(r),n!==e&&(e.copy_data(n),e.update_max(),this.recalc_max(e)),n.color===W&&this.delete_fixup(r)}delete_fixup(e){let n=e,r;for(;n!==this.root&&n.parent!=null&&n.color===W;)n===n.parent.left?(r=n.parent.right,r.color===pe&&(r.color=W,n.parent.color=pe,this.rotate_left(n.parent),r=n.parent.right),r.left.color===W&&r.right.color===W?(r.color=pe,n=n.parent):(r.right.color===W&&(r.color=pe,r.left.color=W,this.rotate_right(r),r=n.parent.right),r.color=n.parent.color,n.parent.color=W,r.right.color=W,this.rotate_left(n.parent),n=this.root)):(r=n.parent.left,r.color===pe&&(r.color=W,n.parent.color=pe,this.rotate_right(n.parent),r=n.parent.left),r.left.color===W&&r.right.color===W?(r.color=pe,n=n.parent):(r.left.color===W&&(r.color=pe,r.right.color=W,this.rotate_left(r),r=n.parent.left),r.color=n.parent.color,n.parent.color=W,r.left.color=W,this.rotate_right(n.parent),n=this.root));n.color=W}tree_search(e,n){if(!(e==null||e===this.nil_node))return n.equal_to(e)?e:n.less_than(e)?this.tree_search(e.left,n):this.tree_search(e.right,n)}tree_search_nearest_forward(e,n){let r,i=e;for(;i&&i!==this.nil_node;)i.less_than(n)?i.intersect(n)?(r=i,i=i.left):i=i.right:((!r||i.less_than(r))&&(r=i),i=i.left);return r||null}tree_search_interval(e,n,r){e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&this.tree_search_interval(e.left,n,r),e.intersect(n)&&r.push(e),e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&this.tree_search_interval(e.right,n,r))}tree_find_any_interval(e,n){let r=!1;return e!=null&&e!==this.nil_node&&(e.left!==this.nil_node&&!e.not_intersect_left_subtree(n)&&(r=this.tree_find_any_interval(e.left,n)),r||(r=e.intersect(n)),!r&&e.right!==this.nil_node&&!e.not_intersect_right_subtree(n)&&(r=this.tree_find_any_interval(e.right,n))),r}local_minimum(e){let n=e;for(;n.left!=null&&n.left!==this.nil_node;)n=n.left;return n}local_maximum(e){let n=e;for(;n.right!=null&&n.right!==this.nil_node;)n=n.right;return n}tree_successor(e){let n,r,i;if(e.right!==this.nil_node)n=this.local_minimum(e.right);else{for(r=e,i=e.parent;i!=null&&i.right===r;)r=i,i=i.parent;n=i}return n}rotate_left(e){let n=e.right;e.right=n.left,n.left!==this.nil_node&&(n.left.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,e!=null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}rotate_right(e){let n=e.left;e.left=n.right,n.right!==this.nil_node&&(n.right.parent=e),n.parent=e.parent,e===this.root?this.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.right=e,e.parent=n,e!==null&&e!==this.nil_node&&e.update_max(),n=e.parent,n!=null&&n!==this.nil_node&&n.update_max()}tree_walk(e,n){e!=null&&e!==this.nil_node&&(this.tree_walk(e.left,n),n(e),this.tree_walk(e.right,n))}testRedBlackProperty(){let e=!0;return this.tree_walk(this.root,function(n){n.color===pe&&(n.left.color===W&&n.right.color===W||(e=!1))}),e}testBlackHeightProperty(e){let n=0,r=0,i=0;if(e.color===W&&n++,e.left!==this.nil_node?r=this.testBlackHeightProperty(e.left):r=1,e.right!==this.nil_node?i=this.testBlackHeightProperty(e.right):i=1,r!==i)throw new Error("Red-black height property violated");return n+=r,n}}class Jy extends Set{constructor(e){super(e),this.index=new Ri,this.forEach(n=>this.index.insert(n))}add(e){let n=this.size;const{key:r,value:i}=e,s=r||e.box,o=i||e;return super.add(o),this.size>n&&this.index.insert(s,o),this}delete(e){const{key:n,value:r}=e,i=n||e.box,s=r||e;let o=super.delete(s);return o&&this.index.remove(i,s),o}clear(){super.clear(),this.index=new Ri}search(e){return this.index.search(e)}hit(e){let n=new u.Box(e.x-1,e.y-1,e.x+1,e.y+1);return this.index.search(n).filter(i=>e.on(i))}svg(){return[...this].reduce((n,r)=>n+r.svg(),"")}}u.PlanarSet=Jy;class on{get name(){throw b.CANNOT_INVOKE_ABSTRACT_METHOD}get box(){throw b.CANNOT_INVOKE_ABSTRACT_METHOD}clone(){throw b.CANNOT_INVOKE_ABSTRACT_METHOD}translate(...e){return this.transform(new Ze().translate(...e))}rotate(e,n=new u.Point){return this.transform(new Ze().rotate(e,n.x,n.y))}scale(e,n){return this.transform(new Ze().scale(e,n))}transform(...e){throw b.CANNOT_INVOKE_ABSTRACT_METHOD}toJSON(){return Object.assign({},this,{name:this.name})}svg(e={}){throw b.CANNOT_INVOKE_ABSTRACT_METHOD}}let z=class Hp extends on{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw b.ILLEGAL_PARAMETERS}}get box(){return new u.Box(this.x,this.y,this.x,this.y)}clone(){return new u.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}lessThan(e){return!!(u.Utils.LT(this.y,e.y)||u.Utils.EQ(this.y,e.y)&&u.Utils.LT(this.x,e.x))}transform(e){return new u.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let n=new u.Vector(this,e.pt);if(u.Utils.EQ_0(n.cross(e.norm)))return e.pt.clone();let r=n.dot(e.norm),i=e.norm.multiply(r);return this.translate(i)}leftTo(e){let n=new u.Vector(e.pt,this);return u.Utils.GT(n.dot(e.norm),0)}distanceTo(e){if(e instanceof Hp){let n=e.x-this.x,r=e.y-this.y;return[Math.sqrt(n*n+r*r),new u.Segment(this,e)]}if(e instanceof u.Line)return u.Distance.point2line(this,e);if(e instanceof u.Circle)return u.Distance.point2circle(this,e);if(e instanceof u.Segment)return u.Distance.point2segment(this,e);if(e instanceof u.Arc)return u.Distance.point2arc(this,e);if(e instanceof u.Polygon)return u.Distance.point2polygon(this,e);if(e instanceof u.PlanarSet)return u.Distance.shape2planarSet(this,e);if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}on(e){if(e instanceof u.Point)return this.equalTo(e);if(e.contains&&e.contains instanceof Function)return e.contains(this);throw u.Errors.UNSUPPORTED_SHAPE_TYPE}get name(){return"point"}svg(e={}){const n=e.r??3;return`
<circle cx="${this.x}" cy="${this.y}" r="${n}"
            ${zn({fill:"red",...e})} />`}};u.Point=z;const Xy=(...t)=>new u.Point(...t);u.point=Xy;let Gp=class extends on{constructor(...e){if(super(),this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let n=e[0];if(typeof n[0]=="number"&&typeof n[1]=="number"){this.x=n[0],this.y=n[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:n,y:r}=e[0];this.x=n,this.y=r;return}if(e.length===2){let n=e[0],r=e[1];if(typeof n=="number"&&typeof r=="number"){this.x=n,this.y=r;return}if(n instanceof u.Point&&r instanceof u.Point){this.x=r.x-n.x,this.y=r.y-n.y;return}}throw b.ILLEGAL_PARAMETERS}}clone(){return new u.Vector(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return u.Utils.EQ(this.x,e.x)&&u.Utils.EQ(this.y,e.y)}multiply(e){return new u.Vector(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!u.Utils.EQ_0(this.length))return new u.Vector(this.x/this.length,this.y/this.length);throw b.ZERO_DIVISION}rotate(e,n=new u.Point){if(n.x===0&&n.y===0)return this.transform(new Ze().rotate(e));throw b.OPERATION_IS_NOT_SUPPORTED}transform(e){return new u.Vector(e.transform([this.x,this.y]))}rotate90CCW(){return new u.Vector(-this.y,this.x)}rotate90CW(){return new u.Vector(this.y,-this.x)}invert(){return new u.Vector(-this.x,-this.y)}add(e){return new u.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new u.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let n=this.normalize(),r=e.normalize(),i=Math.atan2(n.cross(r),n.dot(r));return i<0&&(i+=2*Math.PI),i}projectionOn(e){let n=e.normalize(),r=this.dot(n);return n.multiply(r)}get name(){return"vector"}};u.Vector=Gp;const Qp=(...t)=>new u.Vector(...t);u.vector=Qp;let Tu=class Iu extends on{constructor(...e){if(super(),this.ps=new u.Point,this.pe=new u.Point,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===4){let n=e[0];this.ps=new u.Point(n[0],n[1]),this.pe=new u.Point(n[2],n[3]);return}if(e.length===1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:n,pe:r}=e[0];this.ps=new u.Point(n.x,n.y),this.pe=new u.Point(r.x,r.y);return}if(e.length===1&&e[0]instanceof u.Point){this.ps=e[0].clone();return}if(e.length===2&&e[0]instanceof u.Point&&e[1]instanceof u.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length===4){this.ps=new u.Point(e[0],e[1]),this.pe=new u.Point(e[2],e[3]);return}throw b.ILLEGAL_PARAMETERS}}clone(){return new u.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new u.Vector(this.start,this.end).slope}get box(){return new u.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return u.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return ji(this,e);if(e instanceof u.Ray)return Ua(e,this);if(e instanceof u.Segment)return No(this,e);if(e instanceof u.Circle)return Oo(this,e);if(e instanceof u.Box)return hy(this,e);if(e instanceof u.Arc)return Or(this,e);if(e instanceof u.Polygon)return za(this,e);if(e instanceof u.Multiline)return Wi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2segment(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.segment2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.segment2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2segment(this,e);return[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.segment2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}tangentInStart(){return new u.Vector(this.start,this.end).normalize()}tangentInEnd(){return new u.Vector(this.end,this.start).normalize()}reverse(){return new Iu(this.end,this.start)}split(e){return this.start.equalTo(e)?[null,this.clone()]:this.end.equalTo(e)?[this.clone(),null]:[new u.Segment(this.start,e),new u.Segment(e,this.end)]}middle(){return new u.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}pointAtLength(e){if(e>this.length||e<0)return null;if(e==0)return this.start;if(e==this.length)return this.end;let n=e/this.length;return new u.Point((this.end.x-this.start.x)*n+this.start.x,(this.end.y-this.start.y)*n+this.start.y)}distanceToPoint(e){let[n,...r]=u.Distance.point2segment(e,this);return n}definiteIntegral(e=0){let n=this.end.x-this.start.x,r=this.start.y-e,i=this.end.y-e;return n*(r+i)/2}transform(e=new u.Matrix){return new Iu(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}sortPoints(e){return new u.Line(this.start,this.end).sortPoints(e)}get name(){return"segment"}svg(e={}){return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" ${zn(e)} />`}};u.Segment=Tu;const Zy=(...t)=>new u.Segment(...t);u.segment=Zy;let{vector:qr}=u,Mo=class bp extends on{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0){if(e.length===1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:n,norm:r}=e[0];this.pt=new u.Point(n),this.norm=new u.Vector(r);return}if(e.length===2){let n=e[0],r=e[1];if(n instanceof u.Point&&r instanceof u.Point){this.pt=n,this.norm=bp.points2norm(n,r),this.norm.dot(qr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Point&&r instanceof u.Vector){if(u.Utils.EQ_0(r.x)&&u.Utils.EQ_0(r.y))throw b.ILLEGAL_PARAMETERS;this.pt=n.clone(),this.norm=r.clone(),this.norm=this.norm.normalize(),this.norm.dot(qr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}if(n instanceof u.Vector&&r instanceof u.Point){if(u.Utils.EQ_0(n.x)&&u.Utils.EQ_0(n.y))throw b.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=n.clone(),this.norm=this.norm.normalize(),this.norm.dot(qr(this.pt.x,this.pt.y))>=0&&this.norm.invert();return}}throw b.ILLEGAL_PARAMETERS}}clone(){return new u.Line(this.pt,this.norm)}get start(){}get end(){}get length(){return Number.POSITIVE_INFINITY}get box(){return new u.Box(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}get middle(){}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,n=this.norm.y,r=this.norm.dot(qr(this.pt.x,this.pt.y));return[e,n,r]}parallelTo(e){return u.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))}coord(e){return qr(e.x,e.y).cross(this.norm)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Nr(this,e);if(e instanceof u.Ray)return Op(e,this);if(e instanceof u.Circle)return Dn(this,e);if(e instanceof u.Box)return yr(this,e);if(e instanceof u.Segment)return ji(e,this);if(e instanceof u.Arc)return Ao(this,e);if(e instanceof u.Polygon)return $i(this,e);if(e instanceof u.Multiline)return Wi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2line(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2line(e,this);return[n,r.reverse()]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2line(e,this);return[n,r.reverse()]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}}split(e){if(e instanceof u.Point)return[new u.Ray(e,this.norm),new u.Ray(e,this.norm)];{let n=new u.Multiline([this]),r=this.sortPoints(e);return n.split(r),n.toShapes()}}rotate(e,n=new u.Point){return new u.Line(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Line(this.pt.transform(e),this.norm.clone())}sortPoints(e){return e.slice().sort((n,r)=>this.coord(n)<this.coord(r)?-1:this.coord(n)>this.coord(r)?1:0)}get name(){return"line"}svg(e,n={}){let r=yr(this,e);if(r.length===0)return"";let i=r[0],s=r.length===2?r[1]:r.find(l=>!l.equalTo(i));return s===void 0&&(s=i),new u.Segment(i,s).svg(n)}static points2norm(e,n){if(e.equalTo(n))throw b.ILLEGAL_PARAMETERS;return new u.Vector(e,n).normalize().rotate90CCW()}};u.Line=Mo;const e1=(...t)=>new u.Line(...t);u.line=e1;let Cu=class extends on{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,e.length===1&&e[0]instanceof Object&&e[0].name==="circle"){let{pc:n,r}=e[0];this.pc=new u.Point(n),this.r=r}else{let[n,r]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r)}}clone(){return new u.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new u.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(e){if(e instanceof u.Point)return u.Utils.LE(e.distanceTo(this.center)[0],this.r);if(e instanceof u.Segment)return u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Arc)return this.intersect(e).length===0&&u.Utils.LE(e.start.distanceTo(this.center)[0],this.r)&&u.Utils.LE(e.end.distanceTo(this.center)[0],this.r);if(e instanceof u.Circle)return this.intersect(e).length===0&&u.Utils.LE(e.r,this.r)&&u.Utils.LE(e.center.distanceTo(this.center)[0],this.r)}toArc(e=!0){return new u.Arc(this.center,this.r,Math.PI,-Math.PI,e)}scale(e,n){if(e!==n||!(this.pc.x===0&&this.pc.y===0))throw b.OPERATION_IS_NOT_SUPPORTED;return new u.Circle(this.pc,this.r*e)}transform(e=new u.Matrix){return new u.Circle(this.pc.transform(e),this.r)}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Dn(e,this);if(e instanceof u.Ray)return Np(e,this);if(e instanceof u.Segment)return Oo(e,this);if(e instanceof u.Circle)return Sp(e,this);if(e instanceof u.Box)return py(this,e);if(e instanceof u.Arc)return Ma(e,this);if(e instanceof u.Polygon)return Pp(this,e);if(e instanceof u.Multiline)return Wi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.circle2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.circle2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2circle(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline){let[n,r]=u.Distance.shape2multiline(this,e);return[n,r]}}get name(){return"circle"}svg(e={}){return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}"
                ${zn({fill:"none",...e})} />`}};u.Circle=Cu;const t1=(...t)=>new u.Circle(...t);u.circle=t1;class Pu extends on{constructor(...e){if(super(),this.pc=new u.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=u.CCW,e.length!==0)if(e.length===1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:n,r,startAngle:i,endAngle:s,counterClockwise:o}=e[0];this.pc=new u.Point(n.x,n.y),this.r=r,this.startAngle=i,this.endAngle=s,this.counterClockwise=o}else{let[n,r,i,s,o]=[...e];n&&n instanceof u.Point&&(this.pc=n.clone()),r!==void 0&&(this.r=r),i!==void 0&&(this.startAngle=i),s!==void 0&&(this.endAngle=s),o!==void 0&&(this.counterClockwise=o)}}clone(){return new u.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(u.Utils.EQ(this.startAngle,this.endAngle))return 0;if(u.Utils.EQ(Math.abs(this.startAngle-this.endAngle),u.PIx2))return u.PIx2;let e;return this.counterClockwise?e=u.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+u.PIx2:e=u.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+u.PIx2,u.Utils.GT(e,u.PIx2)&&(e-=u.PIx2),u.Utils.LT(e,0)&&(e+=u.PIx2),e}get start(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new u.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let n=this.breakToFunctional().reduce((r,i)=>r.merge(i.start.box),new u.Box);return n=n.merge(this.end.box),n}contains(e){if(!u.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let n=new u.Vector(this.pc,e).slope,r=new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise);return u.Utils.LE(r.length,this.length)}split(e){if(this.start.equalTo(e))return[null,this.clone()];if(this.end.equalTo(e))return[this.clone(),null];let n=new u.Vector(this.pc,e).slope;return[new u.Arc(this.pc,this.r,this.startAngle,n,this.counterClockwise),new u.Arc(this.pc,this.r,n,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new u.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}pointAtLength(e){if(e>this.length||e<0)return null;if(e===0)return this.start;if(e===this.length)return this.end;let n=e/this.length,r=this.counterClockwise?this.startAngle+this.sweep*n:this.startAngle-this.sweep*n;return new u.Arc(this.pc,this.r,this.startAngle,r,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return Ao(e,this);if(e instanceof u.Ray)return Fa(e,this);if(e instanceof u.Circle)return Ma(this,e);if(e instanceof u.Segment)return Or(e,this);if(e instanceof u.Box)return gy(this,e);if(e instanceof u.Arc)return xp(this,e);if(e instanceof u.Polygon)return Da(this,e);if(e instanceof u.Multiline)return Wi(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle){let[n,r]=u.Distance.arc2circle(this,e);return[n,r]}if(e instanceof u.Line){let[n,r]=u.Distance.arc2line(this,e);return[n,r]}if(e instanceof u.Segment){let[n,r]=u.Distance.segment2arc(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Arc){let[n,r]=u.Distance.arc2arc(this,e);return[n,r]}if(e instanceof u.Polygon){let[n,r]=u.Distance.shape2polygon(this,e);return[n,r]}if(e instanceof u.PlanarSet){let[n,r]=u.Distance.shape2planarSet(this,e);return[n,r]}if(e instanceof u.Multiline)return u.Distance.shape2multiline(this,e)}breakToFunctional(){let e=[],n=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],i=[];for(let s=0;s<4;s++)r[s].on(this)&&i.push(new u.Arc(this.pc,this.r,this.startAngle,n[s],this.counterClockwise));if(i.length===0)e.push(this.clone());else{i.sort((l,a)=>l.length-a.length);for(let l=0;l<i.length;l++){let a=e.length>0?e[e.length-1]:void 0,c;a?c=new u.Arc(this.pc,this.r,a.endAngle,i[l].endAngle,this.counterClockwise):c=new u.Arc(this.pc,this.r,this.startAngle,i[l].endAngle,this.counterClockwise),u.Utils.EQ_0(c.length)||e.push(c.clone())}let s=e.length>0?e[e.length-1]:void 0,o;s?o=new u.Arc(this.pc,this.r,s.endAngle,this.endAngle,this.counterClockwise):o=new u.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),!u.Utils.EQ_0(o.length)&&!u.Utils.EQ(o.sweep,2*Math.PI)&&e.push(o.clone())}return e}tangentInStart(){let e=new u.Vector(this.pc,this.start),n=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(n).normalize()}tangentInEnd(){let e=new u.Vector(this.pc,this.end),n=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(n).normalize()}reverse(){return new u.Arc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}transform(e=new u.Matrix){let n=this.start.transform(e),r=this.end.transform(e),i=this.pc.transform(e),s=this.counterClockwise;return e.a*e.d<0&&(s=!s),u.Arc.arcSE(i,n,r,s)}static arcSE(e,n,r,i){let{vector:s}=u,o=s(e,n).slope,l=s(e,r).slope;u.Utils.EQ(o,l)&&(l+=2*Math.PI,i=!0);let a=s(e,n).length;return new u.Arc(e,a,o,l,i)}definiteIntegral(e=0){return this.breakToFunctional().reduce((i,s)=>i+s.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let n=new u.Line(this.start,this.end),r=this.pc.leftTo(n),s=new u.Segment(this.start,this.end).definiteIntegral(e),o=this.circularSegmentArea();return r?s-o:s+o}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}sortPoints(e){let{vector:n}=u;return e.slice().sort((r,i)=>{let s=n(this.pc,r).slope,o=n(this.pc,i).slope;return s<o?-1:s>o?1:0})}get name(){return"arc"}svg(e={}){let n=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0";return u.Utils.EQ(this.sweep,2*Math.PI)?new u.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${n},${r} ${this.end.x},${this.end.y}"
                    ${zn({fill:"none",...e})} />`}}u.Arc=Pu;const n1=(...t)=>new u.Arc(...t);u.arc=n1;class Yt extends on{constructor(e=void 0,n=void 0,r=void 0,i=void 0){super(),this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}clone(){return new Yt(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new u.Point(this.xmin,this.ymin)}get high(){return new u.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new u.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}get width(){return Math.abs(this.xmax-this.xmin)}get height(){return Math.abs(this.ymax-this.ymin)}get box(){return this.clone()}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new Yt(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}static comparable_max(e,n){return e.merge(n)}static comparable_less_than(e,n){return e.lessThan(n)}set(e,n,r,i){this.xmin=e,this.ymin=n,this.xmax=r,this.ymax=i}toPoints(){return[new u.Point(this.xmin,this.ymin),new u.Point(this.xmax,this.ymin),new u.Point(this.xmax,this.ymax),new u.Point(this.xmin,this.ymax)]}toSegments(){let e=this.toPoints();return[new u.Segment(e[0],e[1]),new u.Segment(e[1],e[2]),new u.Segment(e[2],e[3]),new u.Segment(e[3],e[0])]}rotate(e,n=new u.Point){throw b.OPERATION_IS_NOT_SUPPORTED}transform(e=new u.Matrix){return this.toPoints().map(r=>r.transform(e)).reduce((r,i)=>r.merge(i.box),new Yt)}contains(e){if(e instanceof u.Point)return e.x>=this.xmin&&e.x<=this.xmax&&e.y>=this.ymin&&e.y<=this.ymax;if(e instanceof u.Segment)return e.vertices.every(n=>this.contains(n));if(e instanceof u.Box)return e.toSegments().every(n=>this.contains(n));if(e instanceof u.Circle)return this.contains(e.box);if(e instanceof u.Arc)return e.vertices.every(n=>this.contains(n))&&e.toSegments().every(n=>Or(n,e).length===0);if(e instanceof u.Line||e instanceof u.Ray)return!1;if(e instanceof u.Multiline)return e.toShapes().every(n=>this.contains(n));if(e instanceof u.Polygon)return this.contains(e.box)}distanceTo(e){const n=this.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}get name(){return"box"}svg(e={}){const n=this.xmax-this.xmin,r=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width="${n}" height="${r}"
                ${zn({fill:"none",...e})} />`}}u.Box=Yt;const r1=(...t)=>new u.Box(...t);u.box=r1;class i1{constructor(e){this.shape=e,this.next=void 0,this.prev=void 0,this.face=void 0,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}get isSegment(){return this.shape instanceof u.Segment}get isArc(){return this.shape instanceof u.Arc}get isLine(){return this.shape instanceof u.Line}get isRay(){return this.shape instanceof u.Ray}middle(){return this.shape.middle()}pointAtLength(e){return this.shape.pointAtLength(e)}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.shape instanceof u.Line||this.shape instanceof u.Ray)return this.bv=u.OUTSIDE,this.bv;if(this.bvStart===void 0&&(this.bvStart=hi(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=hi(e,this.end)),this.bvStart===u.OUTSIDE||this.bvEnd==u.OUTSIDE)this.bv=u.OUTSIDE;else if(this.bvStart===u.INSIDE||this.bvEnd==u.INSIDE)this.bv=u.INSIDE;else{let n=hi(e,this.middle());this.bv=n}return this.bv}setOverlap(e){let n,r=this.shape,i=e.shape;r instanceof u.Segment&&i instanceof u.Segment?r.start.equalTo(i.start)&&r.end.equalTo(i.end)?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&(n=u.OVERLAP_OPPOSITE):(r instanceof u.Arc&&i instanceof u.Arc||r instanceof u.Segment&&i instanceof u.Arc||r instanceof u.Arc&&i instanceof u.Segment)&&(r.start.equalTo(i.start)&&r.end.equalTo(i.end)&&r.middle().equalTo(i.middle())?n=u.OVERLAP_SAME:r.start.equalTo(i.end)&&r.end.equalTo(i.start)&&r.middle().equalTo(i.middle())&&(n=u.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=n),e.overlap===void 0&&(e.overlap=n)}svg(){if(this.shape instanceof u.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof u.Arc){let e=this.shape,n,r=e.counterClockwise?"1":"0";if(u.Utils.EQ(e.sweep,2*Math.PI)){let i=e.counterClockwise?1:-1,s=new u.Arc(e.pc,e.r,e.startAngle,e.startAngle+i*Math.PI,e.counterClockwise),o=new u.Arc(e.pc,e.r,e.startAngle+i*Math.PI,e.endAngle,e.counterClockwise);return n="0",` A${s.r},${s.r} 0 ${n},${r} ${s.end.x},${s.end.y}
                    A${o.r},${o.r} 0 ${n},${r} ${o.end.x},${o.end.y}`}else return n=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${n},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}u.Edge=i1;class s1 extends Ra{constructor(e,n){super(e,n),this.setCircularLinks()}setCircularLinks(){this.isEmpty()||(this.last.next=this.first,this.first.prev=this.last)}[Symbol.iterator](){let e;return{next:()=>{let n=e||this.first,r=this.first?e?e===this.first:!1:!0;return e=n?n.next:void 0,{value:n,done:r}}}}append(e){return super.append(e),this.setCircularLinks(),this}insert(e,n){return super.insert(e,n),this.setCircularLinks(),this}remove(e){return super.remove(e),this}}class tr extends s1{constructor(e,...n){if(super(),this._box=void 0,this._orientation=void 0,n.length!==0){if(n.length===1){if(n[0]instanceof Array){let r=n[0];if(r.length===0)return;if(r.every(i=>i instanceof u.Point)){let i=tr.points2segments(r);this.shapes2face(e.edges,i)}else if(r.every(i=>i instanceof Array&&i.length===2)){let i=r.map(o=>new u.Point(o[0],o[1])),s=tr.points2segments(i);this.shapes2face(e.edges,s)}else if(r.every(i=>i instanceof u.Segment||i instanceof u.Arc))this.shapes2face(e.edges,r);else if(r.every(i=>i.name==="segment"||i.name==="arc")){let i=[];for(let s of r){let o;s.name==="segment"?o=new u.Segment(s):o=new u.Arc(s),i.push(o)}this.shapes2face(e.edges,i)}}else if(n[0]instanceof tr){let r=n[0];this.first=r.first,this.last=r.last;for(let i of r)e.edges.add(i)}else if(n[0]instanceof u.Circle)this.shapes2face(e.edges,[n[0].toArc(mp)]);else if(n[0]instanceof u.Box){let r=n[0];this.shapes2face(e.edges,[new u.Segment(new u.Point(r.xmin,r.ymin),new u.Point(r.xmax,r.ymin)),new u.Segment(new u.Point(r.xmax,r.ymin),new u.Point(r.xmax,r.ymax)),new u.Segment(new u.Point(r.xmax,r.ymax),new u.Point(r.xmin,r.ymax)),new u.Segment(new u.Point(r.xmin,r.ymax),new u.Point(r.xmin,r.ymin))])}}n.length===2&&n[0]instanceof u.Edge&&n[1]instanceof u.Edge&&(this.first=n[0],this.last=n[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}get edges(){return this.toArray()}get shapes(){return this.edges.map(e=>e.shape.clone())}get box(){if(this._box===void 0){let e=new u.Box;for(let n of this)e=e.merge(n.box);this._box=e}return this._box}get perimeter(){return this.last.arc_length+this.last.length}pointAtLength(e){if(e>this.perimeter||e<0)return null;let n=null;for(let r of this)if(e>=r.arc_length&&(r===this.last||e<r.next.arc_length)){n=r.pointAtLength(e-r.arc_length);break}return n}static points2segments(e){let n=[];for(let r=0;r<e.length;r++)e[r].equalTo(e[(r+1)%e.length])||n.push(new u.Segment(e[r],e[(r+1)%e.length]));return n}shapes2face(e,n){for(let r of n){let i=new u.Edge(r);this.append(i),e.add(i)}}append(e){return super.append(e),this.setOneEdgeArcLength(e),e.face=this,this}insert(e,n){return super.insert(e,n),this.setOneEdgeArcLength(e),e.face=this,this}remove(e){return super.remove(e),this.setArcLength(),this}merge_with_next_edge(e){return e.shape.end.x=e.next.shape.end.x,e.shape.end.y=e.next.shape.end.y,this.remove(e.next),this}reverse(){let e=[],n=this.last;do n.shape=n.shape.reverse(),e.push(n),n=n.prev;while(n!==this.last);this.first=void 0,this.last=void 0;for(let r of e)this.first===void 0?(r.prev=r,r.next=r,this.first=r,this.last=r):(r.prev=this.last,this.last.next=r,this.last=r,this.last.next=this.first,this.first.prev=this.last),this.setOneEdgeArcLength(r);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let e of this)this.setOneEdgeArcLength(e),e.face=this}setOneEdgeArcLength(e){e===this.first?e.arc_length=0:e.arc_length=e.prev.arc_length+e.prev.length}area(){return Math.abs(this.signedArea())}signedArea(){let e=0,n=this.box.ymin;for(let r of this)e+=r.shape.definiteIntegral(n);return e}orientation(){if(this._orientation===void 0){let e=this.signedArea();u.Utils.EQ_0(e)?this._orientation=Ns.NOT_ORIENTABLE:u.Utils.LT(e,0)?this._orientation=Ns.CCW:this._orientation=Ns.CW}return this._orientation}isSimple(e){return tr.getSelfIntersections(this,e,!0).length===0}static getSelfIntersections(e,n,r=!1){let i=[];for(let s of e){let o=n.search(s.box);for(let l of o){if(s===l||l.face!==e||s.shape instanceof u.Segment&&l.shape instanceof u.Segment&&(s.next===l||s.prev===l))continue;let a=s.shape.intersect(l.shape);for(let c of a)if(!(c.equalTo(s.start)&&c.equalTo(l.end)&&l===s.prev)&&!(c.equalTo(s.end)&&c.equalTo(l.start)&&l===s.next)&&(i.push(c),r))break;if(i.length>0&&r)break}if(i.length>0&&r)break}return i}findEdgeByPoint(e){let n;for(let r of this)if(!e.equalTo(r.shape.start)&&(e.equalTo(r.shape.end)||r.shape.contains(e))){n=r;break}return n}toPolygon(){return new u.Polygon(this.shapes)}toJSON(){return this.edges.map(e=>e.toJSON())}svg(){let e=`M${this.first.start.x},${this.first.start.y}`;for(let n of this)e+=n.svg();return e+=" z",e}}u.Face=tr;class ja extends on{constructor(...e){if(super(),this.pt=new u.Point,this.norm=new u.Vector(0,1),e.length!==0&&(e.length>=1&&e[0]instanceof u.Point&&(this.pt=e[0].clone()),e.length!==1)){if(e.length===2&&e[1]instanceof u.Vector){this.norm=e[1].clone();return}throw b.ILLEGAL_PARAMETERS}}clone(){return new ja(this.pt,this.norm)}get slope(){return new u.Vector(this.norm.y,-this.norm.x).slope}get box(){let e=this.slope;return new u.Box(e>Math.PI/2&&e<3*Math.PI/2?Number.NEGATIVE_INFINITY:this.pt.x,e>=0&&e<=Math.PI?this.pt.y:Number.NEGATIVE_INFINITY,e>=Math.PI/2&&e<=3*Math.PI/2?this.pt.x:Number.POSITIVE_INFINITY,e>=Math.PI&&e<=2*Math.PI||e===0?this.pt.y:Number.POSITIVE_INFINITY)}get start(){return this.pt}get end(){}get length(){return Number.POSITIVE_INFINITY}contains(e){if(this.pt.equalTo(e))return!0;let n=new u.Vector(this.pt,e);return u.Utils.EQ_0(this.norm.dot(n))&&u.Utils.GE(n.cross(this.norm),0)}coord(e){return Qp(e.x,e.y).cross(this.norm)}split(e){return this.contains(e)?this.pt.equalTo(e)?[this]:[new u.Segment(this.pt,e),new u.Ray(e,this.norm)]:[]}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Segment)return Ua(this,e);if(e instanceof u.Arc)return Fa(this,e);if(e instanceof u.Line)return Op(this,e);if(e instanceof u.Ray)return Sy(this,e);if(e instanceof u.Circle)return Np(this,e);if(e instanceof u.Box)return Ey(this,e);if(e instanceof u.Polygon)return Rp(this,e)}rotate(e,n=new u.Point){return new u.Ray(this.pt.rotate(e,n),this.norm.rotate(e))}transform(e){return new u.Ray(this.pt.transform(e),this.norm.clone())}get name(){return"ray"}svg(e,n={}){let r=new u.Line(this.pt,this.norm),i=yr(r,e);return i=i.filter(o=>this.contains(o)),i.length===0||i.length===2?"":new u.Segment(this.pt,i[0]).svg(n)}}u.Ray=ja;const o1=(...t)=>new u.Ray(...t);u.ray=o1;let l1=class $n{constructor(){this.faces=new u.PlanarSet,this.edges=new u.PlanarSet;let e=[...arguments];if(e.length===1&&(e[0]instanceof Array&&e[0].length>0||e[0]instanceof u.Circle||e[0]instanceof u.Box)){let n=e[0];if(e[0]instanceof Array&&e[0].every(r=>r instanceof Array))if(n.every(r=>r instanceof Array&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"))this.faces.add(new u.Face(this,n));else for(let r of n)if(r instanceof Array&&r[0]instanceof Array&&r[0].every(i=>i instanceof Array&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"))for(let i of r)this.faces.add(new u.Face(this,i));else this.faces.add(new u.Face(this,r));else this.faces.add(new u.Face(this,n))}}get box(){return[...this.faces].reduce((e,n)=>e.merge(n.box),new u.Box)}get vertices(){return[...this.edges].map(e=>e.start)}clone(){let e=new $n;for(let n of this.faces)e.addFace(n.shapes);return e}isEmpty(){return this.edges.size===0}isValid(){let e=!0;for(let n of this.faces)if(!n.isSimple(this.edges)){e=!1;break}return e}area(){let e=[...this.faces].reduce((n,r)=>n+r.signedArea(),0);return Math.abs(e)}addFace(...e){let n=new u.Face(this,...e);return this.faces.add(n),n}deleteFace(e){for(let n of e)this.edges.delete(n);return this.faces.delete(e)}recreateFaces(){this.faces.clear();for(let r of this.edges)r.face=null;let e,n=!0;for(;n;){n=!1;for(let r of this.edges)if(r.face===null){e=r,n=!0;break}if(n){let r=e;do r=r.next;while(r.next!==e);this.addFace(e,r)}}}removeChain(e,n,r){if(r.next===n){this.deleteFace(e);return}for(let i=n;i!==r.next;i=i.next)if(e.remove(i),this.edges.delete(i),e.isEmpty()){this.deleteFace(e);break}}addVertex(e,n){let r=n.shape.split(e);if(r[0]===null)return n.prev;if(r[1]===null)return n;let i=new u.Edge(r[0]),s=n.prev;return n.face.insert(i,s),this.edges.delete(n),this.edges.add(i),n.shape=r[1],this.edges.add(n),i}removeEndVertex(e){const n=e.next;n!==e&&(e.face.merge_with_next_edge(e),this.edges.delete(n))}cut(e){let n=this.clone(),r={int_points1:[],int_points2:[],int_points1_sorted:[],int_points2_sorted:[]};for(let o of e.edges)for(let l of n.edges){let a=Lp(o,l);for(let c of a)_r(o,c,r.int_points1),_r(l,c,r.int_points2)}if(r.int_points1.length===0)return n;r.int_points1_sorted=Ot(r.int_points1),r.int_points2_sorted=Ot(r.int_points2),Er(e,r.int_points1_sorted),Er(n,r.int_points2_sorted),Ba(r),r.int_points1_sorted=Ot(r.int_points1),r.int_points2_sorted=Ot(r.int_points2),mu(r.int_points1),vu(r.int_points1,n);for(let o of r.int_points1_sorted)o.edge_before&&o.edge_after&&o.edge_before.bv===o.edge_after.bv&&(r.int_points2[o.id]=-1,o.id=-1);if(r.int_points1=r.int_points1.filter(o=>o.id>=0),r.int_points2=r.int_points2.filter(o=>o.id>=0),r.int_points1.forEach((o,l)=>{o.id=l}),r.int_points2.forEach((o,l)=>{o.id=l}),r.int_points1.length===0)return n;r.int_points1_sorted=Ot(r.int_points1),r.int_points2_sorted=Ot(r.int_points2);let i,s;for(let o=1;o<r.int_points1_sorted.length;o++)if(s=r.int_points1_sorted[o],i=r.int_points1_sorted[o-1],s.edge_before&&s.edge_before.bv===io){let l=i.edge_after,a=s.edge_before,c=e.getChain(l,a);Lf(r.int_points2[i.id],r.int_points2[s.id],c),c.forEach(f=>n.edges.add(f)),c=c.reverse().map(f=>new u.Edge(f.shape.reverse()));for(let f=0;f<c.length-1;f++)c[f].next=c[f+1],c[f+1].prev=c[f];Lf(r.int_points2[s.id],r.int_points2[i.id],c),c.forEach(f=>n.edges.add(f))}return n.recreateFaces(),n}cutWithLine(e){let n=new Un([e]);return this.cut(n)}findEdgeByPoint(e){let n;for(let r of this.faces)if(n=r.findEdgeByPoint(e),n!==void 0)break;return n}splitToIslands(){if(this.isEmpty())return[];let e=this.toArray();e.sort((i,s)=>s.area()-i.area());let n=[...e[0].faces][0].orientation(),r=e.filter(i=>[...i.faces][0].orientation()===n);for(let i of e){let s=[...i.faces][0];if(s.orientation()!==n){for(let o of r)if(s.shapes.every(l=>o.contains(l))){o.addFace(s.shapes);break}}}return r}reverse(){for(let e of this.faces)e.reverse();return this}contains(e){if(e instanceof u.Point){let n=hi(this,e);return n===io||n===lt}else return Wp(this,e)}distanceTo(e){if(e instanceof u.Point){let[n,r]=u.Distance.point2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Circle||e instanceof u.Line||e instanceof u.Segment||e instanceof u.Arc){let[n,r]=u.Distance.shape2polygon(e,this);return r=r.reverse(),[n,r]}if(e instanceof u.Polygon){let n=[Number.POSITIVE_INFINITY,new u.Segment],r,i;for(let s of this.edges){let o=n[0];[r,i]=u.Distance.shape2planarSet(s.shape,e.edges,o),u.Utils.LT(r,o)&&(n=[r,i])}return n}}intersect(e){if(e instanceof u.Point)return this.contains(e)?[e]:[];if(e instanceof u.Line)return $i(e,this);if(e instanceof u.Ray)return Rp(e,this);if(e instanceof u.Circle)return Pp(e,this);if(e instanceof u.Segment)return za(e,this);if(e instanceof u.Arc)return Da(e,this);if(e instanceof u.Polygon)return _y(e,this);if(e instanceof u.Multiline)return yy(e,this)}translate(e){let n=new $n;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.translate(e)));return n}rotate(e=0,n=new u.Point){let r=new $n;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.rotate(e,n)));return r}scale(e,n){let r=new $n;for(let i of this.faces)r.addFace(i.shapes.map(s=>s.scale(e,n)));return r}transform(e=new u.Matrix){let n=new $n;for(let r of this.faces)n.addFace(r.shapes.map(i=>i.transform(e)));return n}toJSON(){return[...this.faces].map(e=>e.toJSON())}toArray(){return[...this.faces].map(e=>e.toPolygon())}dpath(){return[...this.faces].reduce((e,n)=>e+n.svg(),"")}svg(e={}){let n=`
<path ${zn({fillRule:"evenodd",fill:"lightcyan",...e})} d="`;for(let r of this.faces)n+=`
${r.svg()}`;return n+=`" >
</path>`,n}};u.Polygon=l1;const u1=(...t)=>new u.Polygon(...t);u.polygon=u1;const{Circle:ml,Line:zf,Point:Df,Vector:ms,Utils:vl}=u;class pi{constructor(e){this.circle=e}get inversion_circle(){return this.circle}static inversePoint(e,n){const r=new ms(e.pc,n),i=e.r*e.r,s=r.dot(r);return vl.EQ_0(s)?new Df(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY):e.pc.translate(r.multiply(i/s))}static inverseCircle(e,n){const r=e.pc.distanceTo(n.pc)[0];if(vl.EQ(r,n.r)){let i=e.r*e.r/(2*n.r),s=new ms(e.pc,n.pc);s=s.normalize();let o=e.pc.translate(s.multiply(i));return new zf(o,s)}else{let i=new ms(e.pc,n.pc),s=e.r*e.r/(i.dot(i)-n.r*n.r),o=e.pc.translate(i.multiply(s)),l=Math.abs(s)*n.r;return new ml(o,l)}}static inverseLine(e,n){const[r,i]=e.pc.distanceTo(n);if(vl.EQ_0(r))return n.clone();{let s=e.r*e.r/(2*r),o=new ms(e.pc,i.end);return o=o.multiply(s/r),new ml(e.pc.translate(o),s)}}inverse(e){if(e instanceof Df)return pi.inversePoint(this.circle,e);if(e instanceof ml)return pi.inverseCircle(this.circle,e);if(e instanceof zf)return pi.inverseLine(this.circle,e)}}u.Inversion=pi;const a1=t=>new u.Inversion(t);u.inversion=a1;class x{static point2point(e,n){return e.distanceTo(n)}static point2line(e,n){let r=e.projectionOn(n);return[new u.Vector(e,r).length,new u.Segment(e,r)]}static point2circle(e,n){let[r,i]=e.distanceTo(n.center);if(u.Utils.EQ_0(r))return[n.r,new u.Segment(e,n.toArc().start)];{let s=Math.abs(r-n.r),o=new u.Vector(n.pc,e).normalize().multiply(n.r),l=n.pc.translate(o);return[s,new u.Segment(e,l)]}}static point2segment(e,n){if(n.start.equalTo(n.end))return x.point2point(e,n.start);let r=new u.Vector(n.start,n.end),i=new u.Vector(n.start,e),s=new u.Vector(n.end,e),o=r.dot(i),l=-r.dot(s),a,c;if(u.Utils.GE(o,0)&&u.Utils.GE(l,0)){let f=n.tangentInStart();return a=Math.abs(f.cross(i)),c=n.start.translate(f.multiply(f.dot(i))),[a,new u.Segment(e,c)]}else return o<0?e.distanceTo(n.start):e.distanceTo(n.end)}static point2arc(e,n){let r=new u.Circle(n.pc,n.r),i=[],s,o;return[s,o]=x.point2circle(e,r),o.end.on(n)&&i.push(x.point2circle(e,r)),i.push(x.point2point(e,n.start)),i.push(x.point2point(e,n.end)),x.sort(i),i[0]}static point2edge(e,n){return n.shape instanceof u.Segment?x.point2segment(e,n.shape):x.point2arc(e,n.shape)}static segment2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[];return i.push(x.point2line(e.start,n)),i.push(x.point2line(e.end,n)),x.sort(i),i[0]}static segment2segment(e,n){let r=No(e,n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=[],s,o;return[s,o]=x.point2segment(n.start,e),i.push([s,o.reverse()]),[s,o]=x.point2segment(n.end,e),i.push([s,o.reverse()]),i.push(x.point2segment(e.start,n)),i.push(x.point2segment(e.end,n)),x.sort(i),i[0]}static segment2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),[s,o]=x.point2line(n.center,i);if(u.Utils.GE(s,n.r)&&o.end.on(e))return x.point2circle(o.end,n);{let[l,a]=x.point2circle(e.start,n),[c,f]=x.point2circle(e.end,n);return u.Utils.LT(l,c)?[l,a]:[c,f]}}static segment2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Line(e.ps,e.pe),s=new u.Circle(n.pc,n.r),[o,l]=x.point2line(s.center,i);if(u.Utils.GE(o,s.r)&&l.end.on(e)){let[d,h]=x.point2circle(l.end,s);if(h.end.on(n))return[d,h]}let a=[];a.push(x.point2arc(e.start,n)),a.push(x.point2arc(e.end,n));let c,f;return[c,f]=x.point2segment(n.start,e),a.push([c,f.reverse()]),[c,f]=x.point2segment(n.end,e),a.push([c,f.reverse()]),x.sort(a),a[0]}static circle2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];if(e.center.equalTo(n.center)){let i=e.toArc(),s=n.toArc();return x.point2point(i.start,s.start)}else{let i=new u.Line(e.center,n.center),s=i.intersect(e),o=i.intersect(n),l=[];return l.push(x.point2point(s[0],o[0])),l.push(x.point2point(s[0],o[1])),l.push(x.point2point(s[1],o[0])),l.push(x.point2point(s[1],o[1])),x.sort(l),l[0]}}static circle2line(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let[i,s]=x.point2line(e.center,n),[o,l]=x.point2circle(s.end,e);return l=l.reverse(),[o,l]}static arc2line(e,n){let r=n.intersect(e);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=x.point2line(i.center,n);if(u.Utils.GE(s,i.r)){let[l,a]=x.point2circle(o.end,i);if(a.end.on(e))return[l,a]}else{let l=[];return l.push(x.point2line(e.start,n)),l.push(x.point2line(e.end,n)),x.sort(l),l[0]}}static arc2circle(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),[s,o]=x.circle2circle(i,n);if(o.start.on(e))return[s,o];{let l=[];return l.push(x.point2circle(e.start,n)),l.push(x.point2circle(e.end,n)),x.sort(l),l[0]}}static arc2arc(e,n){let r=e.intersect(n);if(r.length>0)return[0,new u.Segment(r[0],r[0])];let i=new u.Circle(e.center,e.r),s=new u.Circle(n.center,n.r),[o,l]=x.circle2circle(i,s);if(l.start.on(e)&&l.end.on(n))return[o,l];{let a=[],c,f;return[c,f]=x.point2arc(e.start,n),f.end.on(n)&&a.push([c,f]),[c,f]=x.point2arc(e.end,n),f.end.on(n)&&a.push([c,f]),[c,f]=x.point2arc(n.start,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=x.point2arc(n.end,e),f.end.on(e)&&a.push([c,f.reverse()]),[c,f]=x.point2point(e.start,n.start),a.push([c,f]),[c,f]=x.point2point(e.start,n.end),a.push([c,f]),[c,f]=x.point2point(e.end,n.start),a.push([c,f]),[c,f]=x.point2point(e.end,n.end),a.push([c,f]),x.sort(a),a[0]}}static point2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=x.point2edge(e,i);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static shape2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n.edges){let[s,o]=e.distanceTo(i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static polygon2polygon(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e.edges)for(let s of n.edges){let[o,l]=i.shape.distanceTo(s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}static box2box_minmax(e,n){let r=Math.max(Math.max(e.xmin-n.xmax,0),Math.max(n.xmin-e.xmax,0)),i=Math.max(Math.max(e.ymin-n.ymax,0),Math.max(n.ymin-e.ymax,0)),s=r*r+i*i,o=e.merge(n),l=o.xmax-o.xmin,a=o.ymax-o.ymin,c=l*l+a*a;return[s,c]}static minmax_tree_process_level(e,n,r,i){let s,o;for(let f of n)[s,o]=x.box2box_minmax(e.box,f.item.key),f.item.value instanceof u.Edge?i.insert([s,o],f.item.value.shape):i.insert([s,o],f.item.value),u.Utils.LT(o,r)&&(r=o);if(n.length===0)return r;let l=n.map(f=>f.left.isNil()?void 0:f.left).filter(f=>f!==void 0),a=n.map(f=>f.right.isNil()?void 0:f.right).filter(f=>f!==void 0),c=[...l,...a].filter(f=>{let[d,h]=x.box2box_minmax(e.box,f.max);return u.Utils.LE(d,r)});return r=x.minmax_tree_process_level(e,c,r,i),r}static minmax_tree(e,n,r){let i=new Ri,s=[n.index.root],o=r<Number.POSITIVE_INFINITY?r*r:Number.POSITIVE_INFINITY;return o=x.minmax_tree_process_level(e,s,o,i),i}static minmax_tree_calc_distance(e,n,r){let i,s;if(n!=null&&!n.isNil()){if([i,s]=x.minmax_tree_calc_distance(e,n.left,r),s)return[i,s];if(u.Utils.LT(i[0],Math.sqrt(n.item.key.low)))return[i,!0];let[o,l]=x.distance(e,n.item.value);return u.Utils.LT(o,i[0])&&(i=[o,l]),[i,s]=x.minmax_tree_calc_distance(e,n.right,i),[i,s]}return[r,!1]}static shape2planarSet(e,n,r=Number.POSITIVE_INFINITY){let i=[r,new u.Segment],s=!1;if(n instanceof u.PlanarSet){let o=x.minmax_tree(e,n,r);[i,s]=x.minmax_tree_calc_distance(e,o.root,i)}return i}static sort(e){e.sort((n,r)=>u.Utils.LT(n[0],r[0])?-1:u.Utils.GT(n[0],r[0])?1:0)}static distance(e,n){return e.distanceTo(n)}static shape2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of n){let[s,o]=x.distance(e,i.shape);u.Utils.LT(s,r[0])&&(r=[s,o])}return r}static multiline2multiline(e,n){let r=[Number.POSITIVE_INFINITY,new u.Segment];for(let i of e)for(let s of n){let[o,l]=x.distance(i.shape,s.shape);u.Utils.LT(o,r[0])&&(r=[o,l])}return r}}u.Distance=x;const{Multiline:c1,Point:Yp,Segment:f1,Polygon:Kp}=u;function $a(t){return new Yp(t.split(" ").map(Number))}function qp(t){return t.split(", ").map($a)}function Wa(t){const e=qp(t);let n=[];for(let r=0;r<e.length-1;r++)n.push(new f1(e[r],e[r+1]));return new c1(n)}function d1(t){return t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), (").map(Wa)}function Jp(t){const e=t.replace(/\(\(/,"").replace(/\)\)$/,"").split("), ("),n=new Kp;let r;return e.forEach((i,s)=>{let o=i.split(", ").map(a=>new Yp(a.split(" ").map(Number)));const l=n.addFace(o);s===0?r=l.orientation():l.orientation()===r&&l.reverse()}),n}function h1(t){const n=t.split(/\)\), \(\(/).map(s=>"(("+s+"))").map(Jp),r=new Kp;return n.reduce((s,o)=>[...s,...o==null?void 0:o.faces],[]).forEach(s=>r.addFace([...s==null?void 0:s.shapes])),r}function p1(t){if(t.startsWith("POLYGON")){const e=t.replace(/^POLYGON /,"");return Jp(e)}else{const e=t.replace(/^MULTIPOLYGON \(\(\((.*)\)\)\)$/,"$1");return h1(e)}}function g1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map($a)}function m1(t){return t.split(`
`).map(n=>n.match(/\(([^)]+)\)/)[1]).map(Wa).reduce((n,r)=>[...n,...r],[])}function Xp(t){if(t.startsWith("POINT")){const e=t.replace(/^POINT \(/,"").replace(/\)$/,"");return $a(e)}else if(t.startsWith("MULTIPOINT")){const e=t.replace(/^MULTIPOINT \(/,"").replace(/\)$/,"");return qp(e)}else if(t.startsWith("LINESTRING")){const e=t.replace(/^LINESTRING \(/,"").replace(/\)$/,"");return Wa(e)}else if(t.startsWith("MULTILINESTRING")){const e=t.replace(/^MULTILINESTRING /,"");return d1(e)}else{if(t.startsWith("POLYGON")||t.startsWith("MULTIPOLYGON"))return p1(t);if(t.startsWith("GEOMETRYCOLLECTION")){const e=/(?<type>POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON) \((?:[^\(\)]|\([^\)]*\))*\)/g,n=t.match(e);return n[0].startsWith("GEOMETRYCOLLECTION")&&(n[0]=n[0].replace("GEOMETRYCOLLECTION (","")),n.map(Xp).map(i=>i instanceof Array?i:[i]).reduce((i,s)=>[...i,...s],[])}else{if(Zp(t))return g1(t);if(eg(t))return m1(t)}}return[]}function Zp(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("POINT"))}function eg(t){var e;return(e=t.split(`
`))==null?void 0:e.every(n=>n.includes("LINESTRING"))}function v1(t){return t.startsWith("POINT")||Zp(t)||t.startsWith("LINESTRING")||eg(t)||t.startsWith("MULTILINESTRING")||t.startsWith("POLYGON")||t.startsWith("MULTIPOINT")||t.startsWith("MULTIPOLYGON")||t.startsWith("GEOMETRYCOLLECTION")}u.isWktString=v1;u.parseWKT=Xp;u.BooleanOperations=zy;u.Relations=Vp;function Xt(t){const e=Qi(),n=Zt();return new z((t.x-e.x)*n,(t.y-e.y)*n)}function zo(t){const e=Qi(),n=Zt();return new z(t.x/n+e.x,t.y/n+e.y)}var j=(t=>(t.AngleGuide="AngleGuide",t.LineEndPoint="LineEndPoint",t.Intersection="Intersection",t.CircleCenter="CircleCenter",t.CircleCardinal="CircleCardinal",t.CircleTangent="CircleTangent",t.LineMidPoint="LineMidPoint",t.Point="Point",t))(j||{}),oo=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(oo||{}),lo=(t=>(t.UPDATE_STATE="UPDATE_STATE",t))(lo||{}),Y=(t=>(t.canvasSize="canvasSize",t.canvas="canvas",t.context="context",t.screenMouseLocation="screenMouseLocation",t.activeTool="activeTool",t.entities="entities",t.activeEntity="activeEntity",t.shouldDrawCursor="shouldDrawCursor",t.helperEntities="helperEntities",t.debugEntities="debugEntities",t.angleStep="angleStep",t.screenOffset="screenOffset",t.screenScale="screenScale",t.panStartLocation="panStartLocation",t.snapPoint="snapPoint",t.snapPointOnAngleGuide="snapPointOnAngleGuide",t.hoveredSnapPoints="hoveredSnapPoints",t.lastDrawTimestamp="lastDrawTimestamp",t.activeLineColor="activeLineColor",t.activeLineWidth="activeLineWidth",t))(Y||{});function y1(){let t=[],e=t.length;function n(){return t[e-1]}return{push:r=>(t.length=e,t[e++]=r,n()),replace:r=>(t[e-1]=r,n()),peek:()=>n(),undo:()=>(e>1&&(e-=1),n()),redo:()=>(e<t.length&&(e+=1),n()),clear:r=>{e=e-t.slice(0,e).filter(i=>i.variable===r).length,t=t.filter(i=>i.variable!==r)}}}function Pt(t){const e=[];for(const n of t)n&&e.push(n);return e}function _1(t,e,n){return t<e?n==="asc"?-1:1:t>e?n==="asc"?1:-1:0}function Do(t,e){return t.slice().sort((n,r)=>{for(let i=0;i<e.length;i++){const s=e[i],o=typeof s=="function",l=o?s(n):n[s],a=o?s(r):r[s],c=_1(l,a,"asc");if(c!==0)return c}return 0})}function Gi(t,e){const n=[];for(const r of t)n.every(s=>!e(s,r))&&n.push(r);return n}function w1(){}function Uf(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(t.toString()!=="[object Object]")return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const E1="[object RegExp]",S1="[object String]",x1="[object Number]",T1="[object Boolean]",Ff="[object Arguments]",I1="[object Symbol]",C1="[object Date]",P1="[object Map]",L1="[object Set]",k1="[object Array]",A1="[object Function]",N1="[object ArrayBuffer]",yl="[object Object]",O1="[object Error]",R1="[object DataView]",M1="[object Uint8Array]",z1="[object Uint8ClampedArray]",D1="[object Uint16Array]",U1="[object Uint32Array]",F1="[object BigUint64Array]",B1="[object Int8Array]",j1="[object Int16Array]",$1="[object Int32Array]",W1="[object BigInt64Array]",V1="[object Float32Array]",H1="[object Float64Array]";function Bf(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function jf(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function G1(t,e){if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return mt(t,e)}return mt(t,e)}function mt(t,e,n){if(Object.is(t,e))return!0;let r=jf(t),i=jf(e);if(r===Ff&&(r=yl),i===Ff&&(i=yl),r!==i)return!1;switch(r){case S1:return t.toString()===e.toString();case x1:{const l=t.valueOf(),a=e.valueOf();return l===a||Number.isNaN(l)&&Number.isNaN(a)}case T1:case C1:case I1:return Object.is(t.valueOf(),e.valueOf());case E1:return t.source===e.source&&t.flags===e.flags;case A1:return t===e}n=n??new Map;const s=n.get(t),o=n.get(e);if(s!=null&&o!=null)return s===e;n.set(t,e),n.set(e,t);try{switch(r){case P1:{if(t.size!==e.size)return!1;for(const[l,a]of t.entries())if(!e.has(l)||!mt(a,e.get(l),n))return!1;return!0}case L1:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),a=Array.from(e.values());for(let c=0;c<l.length;c++){const f=l[c],d=a.findIndex(h=>mt(f,h,n));if(d===-1)return!1;a.splice(d,1)}return!0}case k1:case M1:case z1:case D1:case U1:case F1:case B1:case j1:case $1:case W1:case V1:case H1:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!mt(t[l],e[l],n))return!1;return!0}case N1:return t.byteLength!==e.byteLength?!1:mt(new Uint8Array(t),new Uint8Array(e),n);case R1:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:mt(t.buffer,e.buffer,n);case O1:return t.name===e.name&&t.message===e.message;case yl:{if(!(mt(t.constructor,e.constructor,n)||Uf(t)&&Uf(e)))return!1;const a=[...Object.keys(t),...Bf(t)],c=[...Object.keys(e),...Bf(e)];if(a.length!==c.length)return!1;for(let f=0;f<a.length;f++){const d=a[f],h=t[d];if(!Object.prototype.hasOwnProperty.call(e,d))return!1;const v=e[d];if(!mt(h,v,n))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function $f(t){return t==null}let tg=new z(0,0),ng=null,Va=new z(0,0),Os=null,rg=null,Mi=[],ig=[],Uo=[],Ha=null,sg=!1,og=[],lg=!1,ug=[],Ga=45,Qa=new z(0,0),ba=1,ag=null,cg=null,fg=null,dg=[],hg=0,pg="#fff",gg=1;const Ya=()=>tg,Q1=()=>ng,mg=()=>Va,Ue=()=>Os,b1=()=>rg,Re=()=>Mi,Ft=()=>Uo,vg=()=>Ha,Y1=()=>sg,K1=()=>og,q1=()=>lg,J1=()=>ug,yg=()=>Ga,Qi=()=>Qa,Zt=()=>ba,X1=()=>ag,Ka=()=>cg,_g=()=>fg,qa=()=>dg,Z1=()=>hg,Pn=()=>pg,Ln=()=>gg,zr=()=>zo(Va),e_=()=>Mi.filter(t=>!Uo.includes(t.id)),Sr=t=>Uo.includes(t.id),Ja=t=>ig.includes(t.id),t_=t=>tg=t,n_=t=>ng=t,r_=t=>Va=t,dn=(t,e=!0)=>{var n;(n=Ue())==null||n.stop(),Os=t,Os.subscribe(r=>{var s;const i=(s=Object.values(r==null?void 0:r.getMeta())[0])==null?void 0:s.instructions;b1()!==i&&(i_(i||null),i&&console.log("STATE: "+i))}),Os.start(),e&&Fo(Y.activeTool)},i_=t=>rg=t,bi=t=>{g_(Y.entities,Mi),Mi=t},oe=t=>{Ha=t},Lu=t=>ig=t,me=t=>Uo=t,Xa=t=>sg=t,s_=t=>og=t,kn=t=>(console.log("setShouldDrawHelpers",t),Eg(null),Sg(null),lg=t),Za=t=>ug=t,o_=(t,e=!0)=>{Ga=t,e&&Fo(Y.activeTool)},wg=t=>{Qa=t},l_=t=>{ba=t},ec=t=>ag=t,Eg=t=>cg=t,Sg=t=>fg=t,u_=t=>dg=t,a_=t=>hg=t,c_=(t,e=!0)=>{pg=t,e&&Fo(Y.activeLineColor)},f_=(t,e=!0)=>{gg=t,e&&Fo(Y.activeLineWidth)},xr=t=>{const e=Re().filter(n=>n.id!==t.id);return bi(e),e},Fn=(...t)=>{const e=[...Re(),...t];return bi(e),e},d_=[Y.activeTool,Y.angleStep,Y.activeLineColor,Y.activeLineWidth],h_=[Y.entities,Y.activeEntity,Y.angleStep,Y.screenOffset,Y.screenScale],p_=[Y.angleStep,Y.screenOffset,Y.screenScale],nr=y1();function g_(t,e){if(!h_.includes(t))return;const n=nr.peek();if(!G1(e,n==null?void 0:n.value)){if(t!==Y.activeEntity&&nr.clear(Y.activeEntity),p_.includes(t)&&(n==null?void 0:n.variable)===t){nr.replace({variable:t,value:e});return}nr.push({variable:t,value:e})}}function xg(t){const e=t.variable,n=t.value;switch(e){case Y.entities:Mi=n;break;case Y.activeEntity:Ha=n;break;case Y.angleStep:Ga=n;break;case Y.screenOffset:Qa=n;break;case Y.screenScale:ba=n;break}}function Tg(){const t=nr.undo();t&&xg(t)}function Ig(){const t=nr.redo();t&&xg(t)}function Fo(t){d_.includes(t)&&window.dispatchEvent(new CustomEvent(lo.UPDATE_STATE))}var ie=(t=>(t.Line="Line",t.Circle="Circle",t.Arc="Arc",t.Rectangle="Rectangle",t.Point="Point",t))(ie||{});function An(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}const ku=1e-6,vs=10,ys=30,m_="#111",Cg="#999999",v_="#FFFF00",tc=15,y_=15,nc=15,U=15,rc=1e3,__=3,w_="#b6ff9a",E_="#6899f3",Pg=1,Lg=[5,5],S_=.1,x_=["#2f4f4f","#800000","#006400","#d2b48c","#ff0000","#00ced1","#ffa500","#ffff00","#00ff00","#0000ff","#ff00ff","#1e90ff","#dda0dd","#ff1493","#98fb98"];function it(t,e){return Math.abs(t.x-e.x)<ku&&Math.abs(t.y-e.y)<ku}function kg(t,e,n){const r=yt.getAngle(e,n),i=t.map(s=>({point:s,angle:(new Mo(e,s).slope-r+2*Math.PI)%(2*Math.PI)}));return Do(i,[s=>s.angle]).map(s=>s.point)}function Dr(t){return t.toLowerCase()==="#fff"||t.toLowerCase()==="white"||t.toLowerCase()==="#FFFFFF"?"#000":t}class yt{constructor(e,n,r,i){$(this,"id",crypto.randomUUID());$(this,"lineColor","#fff");$(this,"lineWidth",1);$(this,"lineStyle");$(this,"arc",null);$(this,"centerPoint",null);$(this,"firstPoint",null);if(e instanceof Pu){const s=e;this.arc=s,this.centerPoint=s.center,this.firstPoint=s.start}else if(e instanceof z&&!n&&!r)this.centerPoint=e;else if(e&&n&&!r)this.firstPoint=n;else if(e&&n&&r){const s=yt.getAngle(e,n),o=yt.getAngle(e,r);this.arc=new Pu(e,An(e,n),s,o,i)}}static getAngle(e,n){return new Mo(e,n).slope}draw(e){var s,o;if(!this.centerPoint)return;let n;if(this.arc)n=this.arc.r.valueOf();else if(this.centerPoint&&this.firstPoint)n=An(this.centerPoint,this.firstPoint);else return;const r=Xt(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,((s=this.arc)==null?void 0:s.startAngle)||0,((o=this.arc)==null?void 0:o.endAngle)||2*Math.PI),e.context.stroke()}move(e,n){if(this.arc){const r=this.arc.translate(e,n);return new yt(r.center,r.start,r.end,r.counterClockwise)}return this}intersectsWithBox(e){return this.arc?this.arc.intersect(e).length>0:!1}isContainedInBox(e){return this.arc?e.contains(this.arc):!1}getBoundingBox(){return this.arc?this.arc.box:null}getShape(){return this.arc}getSnapPoints(){return this.centerPoint===null||this.arc===null?[]:[{point:this.centerPoint,type:j.CircleCenter},{point:this.arc.start,type:j.LineEndPoint},{point:this.arc.end,type:j.LineEndPoint}]}getIntersections(e){const n=e.getShape();return!this.arc||!n?[]:this.arc.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.arc?this.arc.distanceTo(e):null}getSvgString(){return this.arc&&this.arc.svg({strokeWidth:this.lineWidth,stroke:Dr(this.lineColor)})||null}getType(){return ie.Arc}containsPointOnShape(e){return this.arc?this.arc.contains(e):!1}cutAtPoints(e){if(!this.arc)return[this];const n=Gi([this.arc.start,this.arc.end,...e],it),r=kg(n,this.arc.center,this.arc.start),i=[];for(let s=0;s<r.length-1;s++){const o=r[s],l=r[s+1],a=new yt(this.centerPoint||void 0,o,l,this.arc.counterClockwise);i.push(a)}return i}toJson(){return this.arc?{id:this.id,type:ie.Arc,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.arc.center.x,y:this.arc.center.y},start:{x:this.arc.start.x,y:this.arc.start.y},end:{x:this.arc.end.x,y:this.arc.end.y},counterClockwise:this.arc.counterClockwise}}:null}fromJson(e){if(e.type!==ie.Arc)throw new Error("Invalid Entity type in JSON");const n=new z(e.shapeData.center.x,e.shapeData.center.y),r=new z(e.shapeData.start.x,e.shapeData.start.y),i=new z(e.shapeData.end.x,e.shapeData.end.y),s=e.shapeData.counterClockwise,o=new yt(n,r,i,s);return o.id=e.id,o.lineColor=e.lineColor,o.lineWidth=e.lineWidth,o}}function Wf(t,e){return(t+e)%e}class Tr{constructor(e,n){$(this,"id",crypto.randomUUID());$(this,"lineColor","#fff");$(this,"lineWidth",1);$(this,"lineStyle");$(this,"circle",null);$(this,"centerPoint",null);if(e instanceof Cu){const r=e;this.circle=r,this.centerPoint=r.center}else e instanceof z&&!n?this.centerPoint=e:e instanceof z&&n&&(this.circle=new Cu(e,typeof n=="number"?n:An(e,n)),this.centerPoint=this.circle.center)}draw(e){if(!this.centerPoint)return;let n;this.circle?n=this.circle.r:n=this.centerPoint.distanceTo(e.worldMouseLocation)[0];const r=Xt(this.centerPoint),i=n*e.screenZoom;e.context.beginPath(),e.context.arc(r.x,r.y,i,0,2*Math.PI),e.context.stroke()}move(e,n){var r;return this.circle?new Tr((r=this.circle)==null?void 0:r.translate(e,n)):this}intersectsWithBox(e){return this.circle?this.circle.intersect(e).length>0:!1}isContainedInBox(e){return this.circle?e.contains(this.circle):!1}getBoundingBox(){return this.circle?this.circle.box:null}getShape(){return this.circle}getSnapPoints(){return this.centerPoint===null||this.circle===null?[]:[{point:this.centerPoint,type:j.CircleCenter},{point:new z(this.centerPoint.x+this.circle.r,this.centerPoint.y),type:j.CircleCardinal},{point:new z(this.centerPoint.x-this.circle.r,this.centerPoint.y),type:j.CircleCardinal},{point:new z(this.centerPoint.x,this.centerPoint.y+this.circle.r),type:j.CircleCardinal},{point:new z(this.centerPoint.x,this.centerPoint.y-this.circle.r),type:j.CircleCardinal}]}getIntersections(e){const n=e.getShape();return!this.circle||!n?[]:this.circle.intersect(n)}getFirstPoint(){return this.centerPoint}distanceTo(e){return this.circle?this.circle.distanceTo(e):null}getSvgString(){return this.circle&&this.circle.svg({strokeWidth:this.lineWidth,stroke:Dr(this.lineColor)})||null}getType(){return ie.Circle}containsPointOnShape(e){return this.circle?this.circle.contains(e):!1}cutAtPoints(e){if(!this.circle)return[this];const n=[],r=e.length;for(let i=0;i<r;i++){const s=e[Wf(i,r)],o=e[Wf(i+1,r)],l=new yt(this.centerPoint||void 0,s,o,!0);n.push(l)}return n}toJson(){var e;return this.circle?{id:this.id,type:ie.Circle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{center:{x:this.circle.center.x,y:this.circle.center.y},radius:(e=this.circle)==null?void 0:e.r}}:null}fromJson(e){const n=new z(e.shapeData.center.x,e.shapeData.center.y),r=e.shapeData.radius,i=new Tr(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class nt{constructor(e,n){$(this,"id",crypto.randomUUID());$(this,"lineColor","#fff");$(this,"lineWidth",1);$(this,"lineStyle");$(this,"segment",null);$(this,"startPoint",null);e instanceof Tu?(this.startPoint=e.start,this.segment=e):e&&n?(this.startPoint=e,this.segment=new Tu(e,n)):e&&(this.startPoint=e)}draw(e){if(!this.startPoint)return;let n,r;this.segment?(n=this.segment.start,r=this.segment.end):(n=this.startPoint,r=new z(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=Xt(n),s=Xt(r);e.context.beginPath(),e.context.moveTo(i.x,i.y),e.context.lineTo(s.x,s.y),e.context.stroke()}move(e,n){return this.segment?new nt(this.segment.translate(e,n)):this}intersectsWithBox(e){return this.segment?this.segment.intersect(e).length>0:!1}isContainedInBox(e){return this.segment?e.contains(this.segment):!1}getBoundingBox(){return this.segment?this.segment.box:null}getShape(){return this.segment}getSnapPoints(){var e,n;return!((e=this.segment)!=null&&e.start)||!((n=this.segment)!=null&&n.end)?[]:[{point:this.segment.start,type:j.LineEndPoint},{point:this.segment.end,type:j.LineEndPoint},{point:this.segment.middle(),type:j.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.segment||!n?[]:this.segment.intersect(n)}getFirstPoint(){return this.startPoint}distanceTo(e){return this.segment?this.segment.distanceTo(e):null}getSvgString(){return this.segment&&this.segment.svg({strokeWidth:this.lineWidth,stroke:Dr(this.lineColor)})||null}getType(){return ie.Line}containsPointOnShape(e){return this.segment?this.segment.contains(e):!1}cutAtPoints(e){if(!this.segment)return[this];const n=Gi([this.segment.start,this.segment.end,...e],it),r=Do(n,[s=>An(this.segment.start,s)]),i=[];for(let s=0;s<r.length-1;s++)i.push(new nt(r[s],r[s+1]));return i}toJson(){return this.segment?{id:this.id,type:ie.Line,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{startPoint:{x:this.segment.start.x,y:this.segment.start.y},endPoint:{x:this.segment.end.x,y:this.segment.end.y}}}:null}fromJson(e){const n=new z(e.shapeData.startPoint.x,e.shapeData.startPoint.y),r=new z(e.shapeData.endPoint.x,e.shapeData.endPoint.y),i=new nt(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}class Nn{constructor(e,n){$(this,"id",crypto.randomUUID());$(this,"lineColor","#fff");$(this,"lineWidth",1);$(this,"lineStyle");$(this,"point",null);!$f(e)&&!$f(n)&&(this.point=new z(e,n))}draw(e){if(!this.point)return;const n=Xt(this.point);e.context.beginPath(),e.context.arc(n.x,n.y,5,0,Math.PI*2),e.context.stroke()}move(e,n){return this.point?new Nn(this.point.translate(e,n)):this}intersectsWithBox(){return!1}isContainedInBox(e){return this.point?e.contains(this.point):!1}getBoundingBox(){return this.point?new Yt(this.point.x,this.point.y,this.point.x,this.point.y):null}getShape(){return this.point}getSnapPoints(){return this.point?[{point:this.point,type:j.Point}]:[]}getIntersections(){return[]}getFirstPoint(){return this.point}distanceTo(e){return this.point?this.point.distanceTo(e):null}getSvgString(){return this.point&&this.point.svg({strokeWidth:this.lineWidth,stroke:Dr(this.lineColor)})||null}getType(){return ie.Point}containsPointOnShape(e){return this.point?this.point.equalTo(e):!1}toJson(){return this.point?{id:this.id,type:ie.Point,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{point:{x:this.point.x,y:this.point.y}}}:null}fromJson(e){const n=new z(e.shapeData.point.x,e.shapeData.point.y),r=new Nn(n);return r.id=e.id,r.lineColor=e.lineColor,r.lineWidth=e.lineWidth,r}}class en{constructor(e,n){$(this,"id",crypto.randomUUID());$(this,"lineColor","#fff");$(this,"lineWidth",1);$(this,"lineStyle");$(this,"rectangle",null);$(this,"startPoint",null);if(e instanceof Yt){const r=e;this.startPoint=new z(r.xmin,r.ymin),this.rectangle=r}else e&&!n?this.startPoint=e:e&&n&&(this.rectangle=new Yt(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.max(e.x,n.x),Math.max(e.y,n.y)))}draw(e){if(!this.startPoint&&!this.rectangle)return;let n,r;this.rectangle?(n=this.rectangle.high,r=this.rectangle.low):(n=this.startPoint,r=new z(e.worldMouseLocation.x,e.worldMouseLocation.y));const i=Xt(n),s=Xt(r);e.context.beginPath(),e.context.strokeRect(i.x,i.y,s.x-i.x,s.y-i.y)}move(e,n){return this.rectangle?new en(this.rectangle.translate(e,n)):this}intersectsWithBox(e){return this.rectangle?Vp.relate(this.rectangle,e).B2B.length>0:!1}isContainedInBox(e){return this.rectangle?e.contains(this.rectangle):!1}distanceTo(e){if(!this.rectangle)return null;const n=this.rectangle.toSegments().map(i=>i.distanceTo(e));let r=[Number.MAX_SAFE_INTEGER,null];return n.forEach(i=>{i[0]<r[0]&&(r=i)}),r}getBoundingBox(){return this.rectangle?this.rectangle:null}getShape(){return this.rectangle}getSnapPoints(){if(!this.rectangle)return[];const e=this.rectangle.toPoints(),n=this.rectangle.toSegments();return[{point:e[0],type:j.LineEndPoint},{point:e[1],type:j.LineEndPoint},{point:e[2],type:j.LineEndPoint},{point:e[3],type:j.LineEndPoint},{point:n[0].middle(),type:j.LineMidPoint},{point:n[1].middle(),type:j.LineMidPoint},{point:n[2].middle(),type:j.LineMidPoint},{point:n[3].middle(),type:j.LineMidPoint}]}getIntersections(e){const n=e.getShape();return!this.rectangle||!n?[]:this.rectangle.toSegments().flatMap(r=>r.intersect(n))}getFirstPoint(){return this.startPoint}getSvgString(){return this.rectangle?this.rectangle.svg({strokeWidth:this.lineWidth,stroke:Dr(this.lineColor)}):null}getType(){return ie.Rectangle}containsPointOnShape(e){return this.rectangle?this.rectangle.toSegments().some(n=>n.contains(e)):!1}toJson(){return this.rectangle?{id:this.id,type:ie.Rectangle,lineColor:this.lineColor,lineWidth:this.lineWidth,shapeData:{xmin:this.rectangle.xmin,ymin:this.rectangle.ymin,xmax:this.rectangle.xmax,ymax:this.rectangle.ymax}}:null}fromJson(e){const n=new z(e.shapeData.xmin,e.shapeData.ymin),r=new z(e.shapeData.xmax,e.shapeData.ymax),i=new en(n,r);return i.id=e.id,i.lineColor=e.lineColor,i.lineWidth=e.lineWidth,i}}function T_(t){return new Promise((e,n)=>{if(!t)return;const r=new FileReader;r.addEventListener("load",async()=>{const i=r.result,s=JSON.parse(i);s.entities||n(new Error("Invalid JSON file"));const o=Pt(s.entities.map(l=>{switch(l.type){case ie.Arc:return new yt().fromJson(l);case ie.Circle:return new Tr().fromJson(l);case ie.Line:return new nt().fromJson(l);case ie.Point:return new Nn().fromJson(l);case ie.Rectangle:return new en().fromJson(l);default:n(new Error("Invalid entity type: "+l.type))}}));bi(o),e()}),r.readAsText(t,"utf-8")})}var Ag={exports:{}};(function(t,e){(function(n,r){r()})($r,function(){function n(c,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,f,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){a(h.response,f,d)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var f=new XMLHttpRequest;f.open("HEAD",c,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(f)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof $r=="object"&&$r.global===$r?$r:void 0,l=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(c,f,d){var h=o.URL||o.webkitURL,v=document.createElement("a");f=f||c.name||"download",v.download=f,v.rel="noopener",typeof c=="string"?(v.href=c,v.origin===location.origin?s(v):i(v.href)?r(c,f,d):s(v,v.target="_blank")):(v.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(c,f,d){if(f=f||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),f);else if(i(c))r(c,f,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){s(h)})}}:function(c,f,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,f,d);var v=c.type==="application/octet-stream",y=/constructor/i.test(o.HTMLElement)||o.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||v&&y||l)&&typeof FileReader<"u"){var C=new FileReader;C.onloadend=function(){var m=C.result;m=_?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=m:location=m,h=null},C.readAsDataURL(c)}else{var g=o.URL||o.webkitURL,p=g.createObjectURL(c);h?h.location=p:location.href=p,h=null,setTimeout(function(){g.revokeObjectURL(p)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})})(Ag);var ic=Ag.exports;function I_(){const t=Re(),n={entities:Pt(t.map(s=>s.toJson()))},r=JSON.stringify(n,null,2),i=new Blob([r],{type:"text/json;charset=utf-8"});ic.saveAs(i,"open-web-cad--drawing.json")}function Ng(t,e){let n=e.x,r=e.y,i=0,s=0;const o=[];t.forEach(f=>{const d=f.getBoundingBox();d&&(n=Math.min(n,d.xmin),r=Math.min(r,d.ymin),i=Math.max(i,d.xmax),s=Math.max(s,d.ymax))}),console.log("exporting svg",o);const l=i-n+vs*2,a=s-r+vs*2;return t.forEach(f=>{const d=f.getShape();if(!d)return;const v=d.translate(new Gp(new z(n,r),new z(vs,vs))).svg({stroke:Dr(f.lineColor),strokeWidth:f.lineWidth});v&&o.push(v)}),{svgString:`
      <svg width="${l}" height="${a}" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="0" width="${l}" height="${a}" fill="white" />
        ${o.join("")}
      </svg>
    `,width:l,height:a}}function C_(){const t=Re(),e=Ya(),n=Ng(t,e),r=new Blob([n.svgString],{type:"text/svg;charset=utf-8"});ic.saveAs(r,"open-web-cad--drawing.svg")}function P_(t,e,n,r){return new Promise((i,s)=>{const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Could not get canvas context");const a=new Image,c=new Blob([t],{type:"image/svg+xml"}),f=URL.createObjectURL(c);a.onload=()=>{o.width=e+r*2,o.height=n+r*2,l.fillStyle="white",l.fillRect(0,0,o.width,o.height),l.drawImage(a,r,r),URL.revokeObjectURL(f),o.toBlob(d=>{d?i(d):s(new Error("Could not convert canvas to blob"))},"image/png")},a.src=f})}async function L_(){const t=Re(),e=Ya(),n=Ng(t,e),r=await P_(n.svgString,n.width,n.height,20);ic.saveAs(r,"open-web-cad--drawing.png")}function Og(t,e=n=>n){let n=0;const r=[];for(;n<t;)r.push(e(n)),n++;return r}function k_(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function A_(){const t=k_();if(t.__xstate__)return t.__xstate__}const N_=t=>{if(typeof window>"u")return;const e=A_();e&&e.register(t)};class Vf{constructor(e){this._process=e,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(e){const n={value:e,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const e=this._current;this._process(e.value),this._current=e.next}this._last=null}}const Rg=".",O_="",Mg="",R_="#",M_="*",zg="xstate.init",z_="xstate.error",Au="xstate.stop";function D_(t,e){return{type:`xstate.after.${t}.${e}`}}function Nu(t,e){return{type:`xstate.done.state.${t}`,output:e}}function U_(t,e){return{type:`xstate.done.actor.${t}`,output:e,actorId:t}}function Dg(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function Ug(t){return{type:zg,input:t}}function pt(t){setTimeout(()=>{throw t})}const F_=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fg(t,e){const n=Hf(t),r=Hf(e);return typeof r=="string"?typeof n=="string"?r===n:!1:typeof n=="string"?n in r:Object.keys(n).every(i=>i in r?Fg(n[i],r[i]):!1)}function sc(t){if(jg(t))return t;let e=[],n="";for(let r=0;r<t.length;r++){switch(t.charCodeAt(r)){case 92:n+=t[r+1],r++;continue;case 46:e.push(n),n="";continue}n+=t[r]}return e.push(n),e}function Hf(t){if(mw(t))return t.value;if(typeof t!="string")return t;const e=sc(t);return B_(e)}function B_(t){if(t.length===1)return t[0];const e={};let n=e;for(let r=0;r<t.length-1;r++)if(r===t.length-2)n[t[r]]=t[r+1];else{const i=n;n={},i[t[r]]=n}return e}function Gf(t,e){const n={},r=Object.keys(t);for(let i=0;i<r.length;i++){const s=r[i];n[s]=e(t[s],s,t,i)}return n}function Bg(t){return jg(t)?t:[t]}function Bt(t){return t===void 0?[]:Bg(t)}function Ou(t,e,n,r){return typeof t=="function"?t({context:e,event:n,self:r}):t}function jg(t){return Array.isArray(t)}function j_(t){return t.type.startsWith("xstate.error.actor")}function Wn(t){return Bg(t).map(e=>typeof e>"u"||typeof e=="string"?{target:e}:e)}function $g(t){if(!(t===void 0||t===O_))return Bt(t)}function Ru(t,e,n){var s,o,l;const r=typeof t=="object",i=r?t:void 0;return{next:(s=r?t.next:t)==null?void 0:s.bind(i),error:(o=r?t.error:e)==null?void 0:o.bind(i),complete:(l=r?t.complete:n)==null?void 0:l.bind(i)}}function Qf(t,e){return`${e}.${t}`}function oc(t,e){const n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];const[,r,i]=n,o=t.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[r]:o).src}function bf(t,e){return`${t.sessionId}.${e}`}let $_=0;function W_(t,e){const n=new Map,r=new Map,i=new WeakMap,s=new Set,o={},{clock:l,logger:a}=e,c={schedule:(h,v,y,_,C=Math.random().toString(36).slice(2))=>{const g={source:h,target:v,event:y,delay:_,id:C,startedAt:Date.now()},p=bf(h,C);d._snapshot._scheduledEvents[p]=g;const m=l.setTimeout(()=>{delete o[p],delete d._snapshot._scheduledEvents[p],d._relay(h,v,y)},_);o[p]=m},cancel:(h,v)=>{const y=bf(h,v),_=o[y];delete o[y],delete d._snapshot._scheduledEvents[y],_!==void 0&&l.clearTimeout(_)},cancelAll:h=>{for(const v in d._snapshot._scheduledEvents){const y=d._snapshot._scheduledEvents[v];y.source===h&&c.cancel(h,y.id)}}},f=h=>{if(!s.size)return;const v={...h,rootId:t.sessionId};s.forEach(y=>{var _;return(_=y.next)==null?void 0:_.call(y,v)})},d={_snapshot:{_scheduledEvents:((e==null?void 0:e.snapshot)&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${$_++}`,_register:(h,v)=>(n.set(h,v),h),_unregister:h=>{n.delete(h.sessionId);const v=i.get(h);v!==void 0&&(r.delete(v),i.delete(h))},get:h=>r.get(h),_set:(h,v)=>{const y=r.get(h);if(y&&y!==v)throw new Error(`Actor with system ID '${h}' already exists.`);r.set(h,v),i.set(v,h)},inspect:h=>{const v=Ru(h);return s.add(v),{unsubscribe(){s.delete(v)}}},_sendInspectionEvent:f,_relay:(h,v,y)=>{d._sendInspectionEvent({type:"@xstate.event",sourceRef:h,actorRef:v,event:y}),v._send(y)},scheduler:c,getSnapshot:()=>({_scheduledEvents:{...d._snapshot._scheduledEvents}}),start:()=>{const h=d._snapshot._scheduledEvents;d._snapshot._scheduledEvents={};for(const v in h){const{source:y,target:_,event:C,delay:g,id:p}=h[v];c.schedule(y,_,C,g,p)}},_clock:l,_logger:a};return d}const lc=1;let xe=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({});const V_={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class zt{constructor(e,n){this.logic=e,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Vf(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=xe.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const r={...V_,...n},{clock:i,logger:s,parent:o,syncSnapshot:l,id:a,systemId:c,inspect:f}=r;this.system=o?o.system:W_(this,{clock:i,logger:s}),f&&!o&&this.system.inspect(Ru(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=o,this._syncSnapshot=l,this.options=r,this.src=r.src??e,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:d=>{this._deferred.push(d)},system:this.system,stopChild:d=>{if(d._parent!==this)throw new Error(`Cannot stop child actor ${d.id} of ${this.id} because it is not a child`);d._stop()},emit:d=>{const h=this.eventListeners.get(d.type),v=this.eventListeners.get("*");if(!h&&!v)return;const y=new Set([...h?h.values():[],...v?v.values():[]]);for(const _ of Array.from(y))_(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),c&&(this._systemId=c,this.system._set(c,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),c&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(e){var n;try{this._snapshot=e?this.logic.restoreSnapshot?this.logic.restoreSnapshot(e,this._actorScope):e:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(r){this._snapshot={status:"error",output:void 0,error:r}}}update(e,n){var i,s;this._snapshot=e;let r;for(;r=this._deferred.shift();)try{r()}catch(o){this._deferred.length=0,this._snapshot={...e,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(i=o.next)==null||i.call(o,e)}catch(l){pt(l)}break;case"done":for(const o of this.observers)try{(s=o.next)==null||s.call(o,e)}catch(l){pt(l)}this._stopProcedure(),this._complete(),this._doneEvent=U_(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:e})}subscribe(e,n,r){var s;const i=Ru(e,n,r);if(this._processingStatus!==xe.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(s=i.complete)==null||s.call(i)}catch(o){pt(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)pt(o);else try{i.error(o)}catch(l){pt(l)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(e,n){let r=this.eventListeners.get(e);r||(r=new Set,this.eventListeners.set(e,r));const i=n.bind(void 0);return r.add(i),{unsubscribe:()=>{r.delete(i)}}}start(){if(this._processingStatus===xe.Running)return this;this._syncSnapshot&&this.subscribe({next:r=>{r.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:r})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=xe.Running;const e=Ug(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:e}),this._snapshot.status){case"done":return this.update(this._snapshot,e),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(r){return this._snapshot={...this._snapshot,status:"error",error:r},this._error(r),this}return this.update(this._snapshot,e),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(e){let n,r;try{n=this.logic.transition(this._snapshot,e,this._actorScope)}catch(i){r={err:i}}if(r){const{err:i}=r;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,e),e.type===Au&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===xe.Stopped?this:(this.mailbox.clear(),this._processingStatus===xe.NotStarted?(this._processingStatus=xe.Stopped,this):(this.mailbox.enqueue({type:Au}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var e;for(const n of this.observers)try{(e=n.complete)==null||e.call(n)}catch(r){pt(r)}this.observers.clear()}_reportError(e){if(!this.observers.size){this._parent||pt(e);return}let n=!1;for(const r of this.observers){const i=r.error;n||(n=!i);try{i==null||i(e)}catch(s){pt(s)}}this.observers.clear(),n&&pt(e)}_error(e){this._stopProcedure(),this._reportError(e),this._parent&&this.system._relay(this,this._parent,Dg(this.id,e))}_stopProcedure(){return this._processingStatus!==xe.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Vf(this._process.bind(this)),this._processingStatus=xe.Stopped,this.system._unregister(this),this)}_send(e){this._processingStatus!==xe.Stopped&&this.mailbox.enqueue(e)}send(e){this.system._relay(void 0,this,e)}attachDevTools(){const{devTools:e}=this.options;e&&(typeof e=="function"?e:N_)(this)}toJSON(){return{xstate$$type:lc,id:this.id}}getPersistedSnapshot(e){return this.logic.getPersistedSnapshot(this._snapshot,e)}[F_](){return this}getSnapshot(){return this._snapshot}}function uo(t,...[e]){return new zt(t,e)}function H_(t,e,n,r,{sendId:i}){const s=typeof i=="function"?i(n,r):i;return[e,s]}function G_(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e)})}function Q_(t){function e(n,r){}return e.type="xstate.cancel",e.sendId=t,e.resolve=H_,e.execute=G_,e}function b_(t,e,n,r,{id:i,systemId:s,src:o,input:l,syncSnapshot:a}){const c=typeof o=="string"?oc(e.machine,o):o,f=typeof i=="function"?i(n):i;let d;return c&&(d=uo(c,{id:f,src:o,parent:t.self,syncSnapshot:a,systemId:s,input:typeof l=="function"?l({context:e.context,event:n.event,self:t.self}):l})),[On(e,{children:{...e.children,[f]:d}}),{id:i,actorRef:d}]}function Y_(t,{id:e,actorRef:n}){n&&t.defer(()=>{n._processingStatus!==xe.Stopped&&n.start()})}function K_(...[t,{id:e,systemId:n,input:r,syncSnapshot:i=!1}={}]){function s(o,l){}return s.type="snapshot.spawnChild",s.id=e,s.systemId=n,s.src=t,s.input=r,s.syncSnapshot=i,s.resolve=b_,s.execute=Y_,s}function q_(t,e,n,r,{actorRef:i}){const s=typeof i=="function"?i(n,r):i,o=typeof s=="string"?e.children[s]:s;let l=e.children;return o&&(l={...l},delete l[o.id]),[On(e,{children:l}),o]}function J_(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==xe.Running){t.stopChild(e);return}t.defer(()=>{t.stopChild(e)})}}function Wg(t){function e(n,r){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=q_,e.execute=J_,e}function uc(t,e,n,r){const{machine:i}=r,s=typeof t=="function",o=s?t:i.implementations.guards[typeof t=="string"?t:t.type];if(!s&&!o)throw new Error(`Guard '${typeof t=="string"?t:t.type}' is not implemented.'.`);if(typeof o!="function")return uc(o,e,n,r);const l={context:e,event:n},a=s||typeof t=="string"?void 0:"params"in t?typeof t.params=="function"?t.params({context:e,event:n}):t.params:void 0;return"check"in o?o.check(r,l,o):o(l,a)}const ac=t=>t.type==="atomic"||t.type==="final";function Ir(t){return Object.values(t.states).filter(e=>e.type!=="history")}function Yi(t,e){const n=[];if(e===t)return n;let r=t.parent;for(;r&&r!==e;)n.push(r),r=r.parent;return n}function ao(t){const e=new Set(t),n=Hg(e);for(const r of e)if(r.type==="compound"&&(!n.get(r)||!n.get(r).length))Yf(r).forEach(i=>e.add(i));else if(r.type==="parallel"){for(const i of Ir(r))if(i.type!=="history"&&!e.has(i)){const s=Yf(i);for(const o of s)e.add(o)}}for(const r of e){let i=r.parent;for(;i;)e.add(i),i=i.parent}return e}function Vg(t,e){const n=e.get(t);if(!n)return{};if(t.type==="compound"){const i=n[0];if(i){if(ac(i))return i.key}else return{}}const r={};for(const i of n)r[i.key]=Vg(i,e);return r}function Hg(t){const e=new Map;for(const n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function Gg(t,e){const n=ao(e);return Vg(t,Hg(n))}function cc(t,e){return e.type==="compound"?Ir(e).some(n=>n.type==="final"&&t.has(n)):e.type==="parallel"?Ir(e).every(n=>cc(t,n)):e.type==="final"}const Bo=t=>t[0]===R_;function X_(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(r=>{if(r===M_)return!0;if(!r.endsWith(".*"))return!1;const i=r.split("."),s=e.split(".");for(let o=0;o<i.length;o++){const l=i[o],a=s[o];if(l==="*")return o===i.length-1;if(l!==a)return!1}return!0}).sort((r,i)=>i.length-r.length).flatMap(r=>t.transitions.get(r))}function Z_(t){const e=t.config.after;if(!e)return[];const n=(i,s)=>{const o=D_(i,t.id),l=o.type;return t.entry.push(Iw(o,{id:l,delay:i})),t.exit.push(Q_(l)),l};return Object.keys(e).flatMap((i,s)=>{const o=e[i],l=typeof o=="string"?{target:o}:o,a=Number.isNaN(+i)?i:+i,c=n(a);return Bt(l).map(f=>({...f,event:c,delay:a}))}).map(i=>{const{delay:s}=i;return{...hn(t,i.event,i),delay:s}})}function hn(t,e,n){const r=$g(n.target),i=n.reenter??!1,s=nw(t,r),o={...n,actions:Bt(n.actions),guard:n.guard,target:s,source:t,reenter:i,eventType:e,toJSON:()=>({...o,source:`#${t.id}`,target:s?s.map(l=>`#${l.id}`):void 0})};return o}function ew(t){const e=new Map;if(t.config.on)for(const n of Object.keys(t.config.on)){if(n===Mg)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const r=t.config.on[n];e.set(n,Wn(r).map(i=>hn(t,n,i)))}if(t.config.onDone){const n=`xstate.done.state.${t.id}`;e.set(n,Wn(t.config.onDone).map(r=>hn(t,n,r)))}for(const n of t.invoke){if(n.onDone){const r=`xstate.done.actor.${n.id}`;e.set(r,Wn(n.onDone).map(i=>hn(t,r,i)))}if(n.onError){const r=`xstate.error.actor.${n.id}`;e.set(r,Wn(n.onError).map(i=>hn(t,r,i)))}if(n.onSnapshot){const r=`xstate.snapshot.${n.id}`;e.set(r,Wn(n.onSnapshot).map(i=>hn(t,r,i)))}}for(const n of t.after){let r=e.get(n.eventType);r||(r=[],e.set(n.eventType,r)),r.push(n)}return e}function tw(t,e){const n=typeof e=="string"?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw new Error(`Initial state node "${e}" not found on parent state node #${t.id}`);const r={source:t,actions:!e||typeof e=="string"?[]:Bt(e.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...r,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return r}function nw(t,e){if(e!==void 0)return e.map(n=>{if(typeof n!="string")return n;if(Bo(n))return t.machine.getStateNodeById(n);const r=n[0]===Rg;if(r&&!t.parent)return co(t,n.slice(1));const i=r?t.key+n:n;if(t.parent)try{return co(t.parent,i)}catch(s){throw new Error(`Invalid transition definition for state node '${t.id}':
${s.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function Qg(t){const e=$g(t.config.target);return e?{target:e.map(n=>typeof n=="string"?co(t.parent,n):n)}:t.parent.initial}function vn(t){return t.type==="history"}function Yf(t){const e=bg(t);for(const n of e)for(const r of Yi(n,t))e.add(r);return e}function bg(t){const e=new Set;function n(r){if(!e.has(r)){if(e.add(r),r.type==="compound")n(r.initial.target[0]);else if(r.type==="parallel")for(const i of Ir(r))n(i)}}return n(t),e}function Cr(t,e){if(Bo(e))return t.machine.getStateNodeById(e);if(!t.states)throw new Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);const n=t.states[e];if(!n)throw new Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function co(t,e){if(typeof e=="string"&&Bo(e))try{return t.machine.getStateNodeById(e)}catch{}const n=sc(e).slice();let r=t;for(;n.length;){const i=n.shift();if(!i.length)break;r=Cr(r,i)}return r}function fo(t,e){if(typeof e=="string"){const i=t.states[e];if(!i)throw new Error(`State '${e}' does not exist on '${t.id}'`);return[t,i]}const n=Object.keys(e),r=n.map(i=>Cr(t,i)).filter(Boolean);return[t.machine.root,t].concat(r,n.reduce((i,s)=>{const o=Cr(t,s);if(!o)return i;const l=fo(o,e[s]);return i.concat(l)},[]))}function rw(t,e,n,r){const s=Cr(t,e).next(n,r);return!s||!s.length?t.next(n,r):s}function iw(t,e,n,r){const i=Object.keys(e),s=Cr(t,i[0]),o=fc(s,e[i[0]],n,r);return!o||!o.length?t.next(n,r):o}function sw(t,e,n,r){const i=[];for(const s of Object.keys(e)){const o=e[s];if(!o)continue;const l=Cr(t,s),a=fc(l,o,n,r);a&&i.push(...a)}return i.length?i:t.next(n,r)}function fc(t,e,n,r){return typeof e=="string"?rw(t,e,n,r):Object.keys(e).length===1?iw(t,e,n,r):sw(t,e,n,r)}function ow(t){return Object.keys(t.states).map(e=>t.states[e]).filter(e=>e.type==="history")}function tn(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function lw(t,e){const n=new Set(t),r=new Set(e);for(const i of n)if(r.has(i))return!0;for(const i of r)if(n.has(i))return!0;return!1}function Yg(t,e,n){const r=new Set;for(const i of t){let s=!1;const o=new Set;for(const l of r)if(lw(Mu([i],e,n),Mu([l],e,n)))if(tn(i.source,l.source))o.add(l);else{s=!0;break}if(!s){for(const l of o)r.delete(l);r.add(i)}}return Array.from(r)}function uw(t){const[e,...n]=t;for(const r of Yi(e,void 0))if(n.every(i=>tn(i,r)))return r}function dc(t,e){if(!t.target)return[];const n=new Set;for(const r of t.target)if(vn(r))if(e[r.id])for(const i of e[r.id])n.add(i);else for(const i of dc(Qg(r),e))n.add(i);else n.add(r);return[...n]}function Kg(t,e){const n=dc(t,e);if(!n)return;if(!t.reenter&&n.every(i=>i===t.source||tn(i,t.source)))return t.source;const r=uw(n.concat(t.source));if(r)return r;if(!t.reenter)return t.source.machine.root}function Mu(t,e,n){var i;const r=new Set;for(const s of t)if((i=s.target)!=null&&i.length){const o=Kg(s,n);s.reenter&&s.source===o&&r.add(o);for(const l of e)tn(l,o)&&r.add(l)}return[...r]}function aw(t,e){if(t.length!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function zu(t,e,n,r,i,s){if(!t.length)return e;const o=new Set(e._nodes);let l=e.historyValue;const a=Yg(t,o,l);let c=e;i||([c,l]=hw(c,r,n,a,o,l,s)),c=Pr(c,r,n,a.flatMap(d=>d.actions),s),c=fw(c,r,n,a,o,s,l,i);const f=[...o];c.status==="done"&&(c=Pr(c,r,n,f.sort((d,h)=>h.order-d.order).flatMap(d=>d.exit),s));try{return l===e.historyValue&&aw(e._nodes,o)?c:On(c,{_nodes:f,historyValue:l})}catch(d){throw d}}function cw(t,e,n,r,i){if(r.output===void 0)return;const s=Nu(i.id,i.output!==void 0&&i.parent?Ou(i.output,t.context,e,n.self):void 0);return Ou(r.output,t.context,s,n.self)}function fw(t,e,n,r,i,s,o,l){let a=t;const c=new Set,f=new Set;dw(r,o,f,c),l&&f.add(t.machine.root);const d=new Set;for(const h of[...c].sort((v,y)=>v.order-y.order)){i.add(h);const v=[];v.push(...h.entry);for(const y of h.invoke)v.push(K_(y.src,{...y,syncSnapshot:!!y.onSnapshot}));if(f.has(h)){const y=h.initial.actions;v.push(...y)}if(a=Pr(a,e,n,v,s,h.invoke.map(y=>y.id)),h.type==="final"){const y=h.parent;let _=(y==null?void 0:y.type)==="parallel"?y:y==null?void 0:y.parent,C=_||h;for((y==null?void 0:y.type)==="compound"&&s.push(Nu(y.id,h.output!==void 0?Ou(h.output,a.context,e,n.self):void 0));(_==null?void 0:_.type)==="parallel"&&!d.has(_)&&cc(i,_);)d.add(_),s.push(Nu(_.id)),C=_,_=_.parent;if(_)continue;a=On(a,{status:"done",output:cw(a,e,n,a.machine.root,C)})}}return a}function dw(t,e,n,r){for(const i of t){const s=Kg(i,e);for(const l of i.target||[])!vn(l)&&(i.source!==l||i.source!==s||i.reenter)&&(r.add(l),n.add(l)),rr(l,e,n,r);const o=dc(i,e);for(const l of o){const a=Yi(l,s);(s==null?void 0:s.type)==="parallel"&&a.push(s),qg(r,e,n,a,!i.source.parent&&i.reenter?void 0:s)}}}function rr(t,e,n,r){var i;if(vn(t))if(e[t.id]){const s=e[t.id];for(const o of s)r.add(o),rr(o,e,n,r);for(const o of s)_l(o,t.parent,r,e,n)}else{const s=Qg(t);for(const o of s.target)r.add(o),s===((i=t.parent)==null?void 0:i.initial)&&n.add(t.parent),rr(o,e,n,r);for(const o of s.target)_l(o,t.parent,r,e,n)}else if(t.type==="compound"){const[s]=t.initial.target;vn(s)||(r.add(s),n.add(s)),rr(s,e,n,r),_l(s,t,r,e,n)}else if(t.type==="parallel")for(const s of Ir(t).filter(o=>!vn(o)))[...r].some(o=>tn(o,s))||(vn(s)||(r.add(s),n.add(s)),rr(s,e,n,r))}function qg(t,e,n,r,i){for(const s of r)if((!i||tn(s,i))&&t.add(s),s.type==="parallel")for(const o of Ir(s).filter(l=>!vn(l)))[...t].some(l=>tn(l,o))||(t.add(o),rr(o,e,n,t))}function _l(t,e,n,r,i){qg(n,r,i,Yi(t,e))}function hw(t,e,n,r,i,s,o){let l=t;const a=Mu(r,i,s);a.sort((f,d)=>d.order-f.order);let c;for(const f of a)for(const d of ow(f)){let h;d.history==="deep"?h=v=>ac(v)&&tn(v,f):h=v=>v.parent===f,c??(c={...s}),c[d.id]=Array.from(i).filter(h)}for(const f of a)l=Pr(l,e,n,[...f.exit,...f.invoke.map(d=>Wg(d.id))],o),i.delete(f);return[l,c||s]}let Kf=!1;function Jg(t,e,n,r,i,s){const{machine:o}=t;let l=t;for(const c of r){let y=function(){n.system._sendInspectionEvent({type:"@xstate.action",actorRef:n.self,action:{type:typeof c=="string"?c:typeof c=="object"?c.type:c.name||"(anonymous)",params:v}});try{Kf=d,d(h,v)}finally{Kf=!1}};var a=y;const f=typeof c=="function",d=f?c:o.implementations.actions[typeof c=="string"?c:c.type];if(!d)continue;const h={context:l.context,event:e,self:n.self,system:n.system},v=f||typeof c=="string"?void 0:"params"in c?typeof c.params=="function"?c.params({context:l.context,event:e}):c.params:void 0;if(!("resolve"in d)){n.self._processingStatus===xe.Running?y():n.defer(()=>{y()});continue}const _=d,[C,g,p]=_.resolve(n,l,h,v,d,i);l=C,"retryResolve"in _&&(s==null||s.push([_,g])),"execute"in _&&(n.self._processingStatus===xe.Running?_.execute(n,g):n.defer(_.execute.bind(null,n,g))),p&&(l=Jg(l,e,n,p,i,s))}return l}function Pr(t,e,n,r,i,s){const o=s?[]:void 0,l=Jg(t,e,n,r,{internalQueue:i,deferredActorIds:s},o);return o==null||o.forEach(([a,c])=>{a.retryResolve(n,l,c)}),l}function wl(t,e,n,r=[]){let i=t;const s=[];function o(c,f,d){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:c,_transitions:d}),s.push(c)}if(e.type===Au)return i=On(qf(i,e,n),{status:"stopped"}),o(i,e,[]),{snapshot:i,microstates:s};let l=e;if(l.type!==zg){const c=l,f=j_(c),d=Jf(c,i);if(f&&!d.length)return i=On(t,{status:"error",error:c.error}),o(i,c,[]),{snapshot:i,microstates:s};i=zu(d,t,n,l,!1,r),o(i,c,d)}let a=!0;for(;i.status==="active";){let c=a?pw(i,l):[];const f=c.length?i:void 0;if(!c.length){if(!r.length)break;l=r.shift(),c=Jf(l,i)}i=zu(c,i,n,l,!1,r),a=i!==f,o(i,l,c)}return i.status!=="active"&&qf(i,l,n),{snapshot:i,microstates:s}}function qf(t,e,n){return Pr(t,e,n,Object.values(t.children).map(r=>Wg(r)),[])}function Jf(t,e){return e.machine.getTransitionData(e,t)}function pw(t,e){const n=new Set,r=t._nodes.filter(ac);for(const i of r)e:for(const s of[i].concat(Yi(i,void 0)))if(s.always){for(const o of s.always)if(o.guard===void 0||uc(o.guard,t.context,e,t)){n.add(o);break e}}return Yg(Array.from(n),new Set(t._nodes),t.historyValue)}function gw(t,e){const n=ao(fo(t,e));return Gg(t,[...n])}function mw(t){return!!t&&typeof t=="object"&&"machine"in t&&"value"in t}const vw=function(e){return Fg(e,this.value)},yw=function(e){return this.tags.has(e)},_w=function(e){const n=this.machine.getTransitionData(this,e);return!!(n!=null&&n.length)&&n.some(r=>r.target!==void 0||r.actions.length)},ww=function(){const{_nodes:e,tags:n,machine:r,getMeta:i,toJSON:s,can:o,hasTag:l,matches:a,...c}=this;return{...c,tags:Array.from(n)}},Ew=function(){return this._nodes.reduce((e,n)=>(n.meta!==void 0&&(e[n.id]=n.meta),e),{})};function Rs(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:Gg(e.root,t._nodes),tags:new Set(t._nodes.flatMap(n=>n.tags)),children:t.children,historyValue:t.historyValue||{},matches:vw,hasTag:yw,can:_w,getMeta:Ew,toJSON:ww}}function On(t,e={}){return Rs({...t,...e},t.machine)}function Sw(t,e){const{_nodes:n,tags:r,machine:i,children:s,context:o,can:l,hasTag:a,matches:c,getMeta:f,toJSON:d,...h}=t,v={};for(const _ in s){const C=s[_];v[_]={snapshot:C.getPersistedSnapshot(e),src:C.src,systemId:C._systemId,syncSnapshot:C._syncSnapshot}}return{...h,context:Xg(o),children:v}}function Xg(t){let e;for(const n in t){const r=t[n];if(r&&typeof r=="object")if("sessionId"in r&&"send"in r&&"ref"in r)e??(e=Array.isArray(t)?t.slice():{...t}),e[n]={xstate$$type:lc,id:r.id};else{const i=Xg(r);i!==r&&(e??(e=Array.isArray(t)?t.slice():{...t}),e[n]=i)}}return e??t}function xw(t,e,n,r,{event:i,id:s,delay:o},{internalQueue:l}){const a=e.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const c=typeof i=="function"?i(n,r):i;let f;if(typeof o=="string"){const d=a&&a[o];f=typeof d=="function"?d(n,r):d}else f=typeof o=="function"?o(n,r):o;return typeof f!="number"&&l.push(c),[e,{event:c,id:s,delay:f}]}function Tw(t,e){const{event:n,delay:r,id:i}=e;if(typeof r=="number"){t.defer(()=>{const s=t.self;t.system.scheduler.schedule(s,s,n,r,i)});return}}function Iw(t,e){function n(r,i){}return n.type="xstate.raise",n.event=t,n.id=e==null?void 0:e.id,n.delay=e==null?void 0:e.delay,n.resolve=xw,n.execute=Tw,n}function Cw(t,{machine:e,context:n},r,i){const s=(o,l={})=>{const{systemId:a,input:c}=l;if(typeof o=="string"){const f=oc(e,o);if(!f)throw new Error(`Actor logic '${o}' not implemented in machine '${e.id}'`);const d=uo(f,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:typeof c=="function"?c({context:n,event:r,self:t.self}):c,src:o,systemId:a});return i[d.id]=d,d}else return uo(o,{id:l.id,parent:t.self,syncSnapshot:l.syncSnapshot,input:l.input,src:o,systemId:a})};return(o,l)=>{const a=s(o,l);return i[a.id]=a,t.defer(()=>{a._processingStatus!==xe.Stopped&&a.start()}),a}}function Pw(t,e,n,r,{assignment:i}){if(!e.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const s={},o={context:e.context,event:n.event,spawn:Cw(t,e,n.event,s),self:t.self,system:t.system};let l={};if(typeof i=="function")l=i(o,r);else for(const c of Object.keys(i)){const f=i[c];l[c]=typeof f=="function"?f(o,r):f}const a=Object.assign({},e.context,l);return[On(e,{context:a,children:Object.keys(s).length?{...e.children,...s}:e.children})]}function ue(t){function e(n,r){}return e.type="xstate.assign",e.assignment=t,e.resolve=Pw,e}let Xf=function(t){return t.Parent="#_parent",t.Internal="#_internal",t}({});function Lw(t,e,n,r,{to:i,event:s,id:o,delay:l},a){var y;const c=e.machine.implementations.delays;if(typeof s=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${s}" }) instead`);const f=typeof s=="function"?s(n,r):s;let d;if(typeof l=="string"){const _=c&&c[l];d=typeof _=="function"?_(n,r):_}else d=typeof l=="function"?l(n,r):l;const h=typeof i=="function"?i(n,r):i;let v;if(typeof h=="string"){if(h===Xf.Parent?v=t.self._parent:h===Xf.Internal?v=t.self:h.startsWith("#_")?v=e.children[h.slice(2)]:v=(y=a.deferredActorIds)!=null&&y.includes(h)?h:e.children[h],!v)throw new Error(`Unable to send event to actor '${h}' from machine '${e.machine.id}'.`)}else v=h||t.self;return[e,{to:v,event:f,id:o,delay:d}]}function kw(t,e,n){typeof n.to=="string"&&(n.to=e.children[n.to])}function Aw(t,e){t.defer(()=>{const{to:n,event:r,delay:i,id:s}=e;if(typeof i=="number"){t.system.scheduler.schedule(t.self,n,r,i,s);return}t.system._relay(t.self,n,r.type===z_?Dg(t.self.id,r.data):r)})}function El(t,e,n){function r(i,s){}return r.type="xsnapshot.sendTo",r.to=t,r.event=e,r.id=n==null?void 0:n.id,r.delay=n==null?void 0:n.delay,r.resolve=Lw,r.retryResolve=kw,r.execute=Aw,r}const Zf=new WeakMap;function jn(t,e,n){let r=Zf.get(t);return r?e in r||(r[e]=n()):(r={[e]:n()},Zf.set(t,r)),r[e]}const Nw={},Jr=t=>typeof t=="string"?{type:t}:typeof t=="function"?"resolve"in t?{type:t.type}:{type:t.name}:t;class hc{constructor(e,n){if(this.config=e,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(Rg),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Gf(this.config.states,(r,i)=>new hc(r,{_parent:this,_key:i,_machine:this.machine})):Nw,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Bt(this.config.entry).slice(),this.exit=Bt(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Bt(e.tags).slice()}_initialize(){this.transitions=ew(this),this.config.always&&(this.always=Wn(this.config.always).map(e=>hn(this,Mg,e))),Object.keys(this.states).forEach(e=>{this.states[e]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Jr),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(e=>`#${e.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Jr),eventType:null})}:void 0,history:this.history,states:Gf(this.states,e=>e.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(e=>({...e,actions:e.actions.map(Jr)})),entry:this.entry.map(Jr),exit:this.exit.map(Jr),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return jn(this,"invoke",()=>Bt(this.config.invoke).map((e,n)=>{const{src:r,systemId:i}=e,s=e.id??Qf(this.id,n),o=typeof r=="string"?r:`xstate.invoke.${Qf(this.id,n)}`;return{...e,src:o,id:s,systemId:i,toJSON(){const{onDone:l,onError:a,...c}=e;return{...c,type:"xstate.invoke",src:o,id:s}}}}))}get on(){return jn(this,"on",()=>[...this.transitions].flatMap(([n,r])=>r.map(i=>[n,i])).reduce((n,[r,i])=>(n[r]=n[r]||[],n[r].push(i),n),{}))}get after(){return jn(this,"delayedTransitions",()=>Z_(this))}get initial(){return jn(this,"initial",()=>tw(this,this.config.initial))}next(e,n){const r=n.type,i=[];let s;const o=jn(this,`candidates-${r}`,()=>X_(this,r));for(const l of o){const{guard:a}=l,c=e.context;let f=!1;try{f=!a||uc(a,c,n,e)}catch(d){const h=typeof a=="string"?a:typeof a=="object"?a.type:void 0;throw new Error(`Unable to evaluate guard ${h?`'${h}' `:""}in transition for event '${r}' in state node '${this.id}':
${d.message}`)}if(f){i.push(...l.actions),s=l;break}}return s?[s]:void 0}get events(){return jn(this,"events",()=>{const{states:e}=this,n=new Set(this.ownEvents);if(e)for(const r of Object.keys(e)){const i=e[r];if(i.states)for(const s of i.events)n.add(`${s}`)}return Array.from(n)})}get ownEvents(){const e=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const Ow="#";class pc{constructor(e,n){this.config=e,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=e.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new hc(e,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(e){const{actions:n,guards:r,actors:i,delays:s}=this.implementations;return new pc(this.config,{actions:{...n,...e.actions},guards:{...r,...e.guards},actors:{...i,...e.actors},delays:{...s,...e.delays}})}resolveState(e){const n=gw(this.root,e.value),r=ao(fo(this.root,n));return Rs({_nodes:[...r],context:e.context||{},children:{},status:cc(r,this.root)?"done":e.status||"active",output:e.output,error:e.error,historyValue:e.historyValue},this)}transition(e,n,r){return wl(e,n,r).snapshot}microstep(e,n,r){return wl(e,n,r).microstates}getTransitionData(e,n){return fc(this.root,e.value,e,n)||[]}getPreInitialState(e,n,r){const{context:i}=this.config,s=Rs({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?Pr(s,n,e,[ue(({spawn:l,event:a,self:c})=>i({spawn:l,input:a.input,self:c}))],r):s}getInitialSnapshot(e,n){const r=Ug(n),i=[],s=this.getPreInitialState(e,r,i),o=zu([{target:[...bg(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],s,e,r,!0,i),{snapshot:l}=wl(o,r,e,i);return l}start(e){Object.values(e.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(e){const n=sc(e),r=n.slice(1),i=Bo(n[0])?n[0].slice(Ow.length):n[0],s=this.idMap.get(i);if(!s)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return co(s,r)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(e,n){return Sw(e,n)}restoreSnapshot(e,n){const r={},i=e.children;Object.keys(i).forEach(a=>{const c=i[a],f=c.snapshot,d=c.src,h=typeof d=="string"?oc(this,d):d;if(!h)return;const v=uo(h,{id:a,parent:n.self,syncSnapshot:c.syncSnapshot,snapshot:f,src:d,systemId:c.systemId});r[a]=v});const s=Rs({...e,children:r,_nodes:Array.from(ao(fo(this.root,e.value)))},this);let o=new Set;function l(a,c){if(!o.has(a)){o.add(a);for(let f in a){const d=a[f];if(d&&typeof d=="object"){if("xstate$$type"in d&&d.xstate$$type===lc){a[f]=c[d.id];continue}l(d,c)}}}}return l(s.context,r),s}}function Ur(t,e){return new pc(t,e)}const Zg=Ur({types:{},context:{startPoint:null,type:V.LINE},initial:"INIT",states:{INIT:{description:"Initializing the line tool",always:{actions:"INIT_LINE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the line",meta:{instructions:"Select the start point of the line"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the line",meta:{instructions:"Select the end point of the line"},on:{DRAW:{actions:"DRAW_TEMP_LINE"},MOUSE_CLICK:{actions:"DRAW_FINAL_LINE",target:"WAITING_FOR_END_POINT"},ESC:{target:"INIT"}}}}},{actions:{INIT_LINE_TOOL:ue(()=>(kn(!0),oe(null),me([]),{startPoint:null})),RECORD_START_POINT:ue({startPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_LINE:({context:t,event:e})=>{const n=new nt(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Pn(),n.lineWidth=Ln(),oe(n)},DRAW_FINAL_LINE:ue(({context:t,event:e})=>{console.log("drawFinalLine",{context:t,event:e});const n=e.worldClickPoint,r=new nt(t.startPoint,n);return r.lineColor=Pn(),r.lineWidth=Ln(),Fn(r),oe(new nt(n,n)),{startPoint:n}})}}),em=Ur({types:{},context:{startPoint:null,type:V.RECTANGLE},initial:"INIT",states:{INIT:{description:"Initializing the rectangle tool",always:{actions:"INIT_RECTANGLE_TOOL",target:"WAITING_FOR_START_POINT"}},WAITING_FOR_START_POINT:{description:"Select the start point of the rectangle",meta:{instructions:"Select the start point of the rectangle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_POINT"}}},WAITING_FOR_END_POINT:{description:"Select the end point of the rectangle",meta:{instructions:"Select the end point of the rectangle"},on:{DRAW:{actions:"DRAW_TEMP_RECTANGLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_RECTANGLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_RECTANGLE_TOOL:()=>{kn(!0),oe(null),me([])},RECORD_START_POINT:ue(({event:t})=>({startPoint:t.worldClickPoint})),DRAW_TEMP_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[RECTANGLE]: calling draw without start point being set");const n=new en(t.startPoint,e.drawInfo.worldMouseLocation);n.lineColor=Pn(),n.lineWidth=Ln(),oe(n)},DRAW_FINAL_RECTANGLE:ue(({context:t,event:e})=>{const n=e.worldClickPoint,r=new en(t.startPoint,n);return r.lineColor=Pn(),r.lineWidth=Ln(),Fn(r),oe(null),{startPoint:null}})}}),tm=Ur({types:{},context:{centerPoint:null,type:V.CIRCLE},initial:"INIT",states:{INIT:{description:"Initializing the circle tool",always:{actions:"INIT_CIRCLE_TOOL",target:"WAITING_FOR_CENTER_POINT"}},WAITING_FOR_CENTER_POINT:{description:"Select the center point of the circle tool",meta:{instructions:"Select the center point of the circle"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_POINT_ON_CIRCLE"}}},WAITING_FOR_POINT_ON_CIRCLE:{description:"Select a point on the circle",meta:{instructions:"Select the point on the circle"},on:{DRAW:{actions:"DRAW_TEMP_CIRCLE"},MOUSE_CLICK:{actions:"DRAW_FINAL_CIRCLE",target:"INIT"},ESC:{target:"INIT"}}}}},{actions:{INIT_CIRCLE_TOOL:ue(()=>(console.log("activate circle tool"),kn(!0),oe(null),me([]),{centerPoint:null})),RECORD_START_POINT:ue({centerPoint:({event:t})=>t.worldClickPoint}),DRAW_TEMP_CIRCLE:({context:t,event:e})=>{console.log("drawTempCircle",{context:t,event:e});const n=new Tr(t.centerPoint,e.drawInfo.worldMouseLocation);n.lineColor=Pn(),n.lineWidth=Ln(),oe(n)},DRAW_FINAL_CIRCLE:ue(({context:t,event:e})=>{console.log("drawFinalCircle",{context:t,event:e});const n=e.worldClickPoint,r=new Tr(t.centerPoint,n);return r.lineColor=Pn(),r.lineWidth=Ln(),Fn(r),oe(null),{centerPoint:null}})}});function Ki(t,e){let n=null,r=[Number.MAX_SAFE_INTEGER,null];return e.forEach(i=>{const s=i.distanceTo(t);s&&s[0]<r[0]&&(r=s,n=i)}),{distance:r[0],segment:r[1],entity:n}}function Rw(t,e){const n=Ki(e.worldClickPoint,Re());if(n&&n.distance<nc){const r=n.entity;return console.log("selecting entity close to the mouse: ",r),!e.holdingCtrl&&!e.holdingShift?me([r.id]):e.holdingCtrl?Sr(r)?me(Ft().filter(i=>i!==r.id)):me([...Ft(),r.id]):me([...Ft(),r.id]),{...t,startPoint:null}}return console.log("Start a new selection rectangle drag"),{...t,startPoint:e.worldClickPoint}}function Mw(t,e,n){const r=new en(t,e);console.log("Finish selection: ",r);const i=nm(r,t),s=Pt(Re().map(o=>{if(i){if(o.intersectsWithBox(r.getBoundingBox())||o.isContainedInBox(r.getBoundingBox()))return n&&Sr(o)?null:o.id}else if(o.isContainedInBox(r.getBoundingBox()))return n&&Sr(o)?null:o.id;return null}));me(s)}function zw(t,e){const n=new en(t,e),r=nm(n,t);n.lineColor=r?w_:E_,n.lineWidth=Pg,n.lineStyle=Lg,oe(n)}function nm(t,e){return!t.getShape()||!e?!1:Math.abs(e.x-t.getShape().xmin)>ku}const ho=Ur({types:{},context:{startPoint:null,type:V.SELECT},initial:"INIT",states:{INIT:{description:"Initializing the select tool",always:{actions:"INIT_SELECT_TOOL",target:"WAITING_FOR_FIRST_SELECT_POINT"}},WAITING_FOR_FIRST_SELECT_POINT:{description:"Select a line or select the first point of a selection rectangle",meta:{instructions:"Select a line or start drawing a selection rectangle"},on:{MOUSE_CLICK:{actions:"HANDLE_FIRST_SELECT_POINT",target:"CHECK_SELECTION"},ESC:{actions:"INIT_SELECT_TOOL"},ENTER:{target:"SELECTION_COMPLETED"},DELETE:{actions:"DELETE_SELECTED_ENTITIES",target:"INIT"}}},CHECK_SELECTION:{description:"Checking to select one line or start drawing a selection rectangle",meta:{instructions:"Select one line or start drawing a selection rectangle"},always:[{guard:({context:t})=>!!t.startPoint,target:"WAITING_FOR_SECOND_SELECT_POINT"},{guard:({context:t})=>!t.startPoint,target:"WAITING_FOR_FIRST_SELECT_POINT"}]},WAITING_FOR_SECOND_SELECT_POINT:{description:"Select the second point of a selection rectangle",meta:{instructions:"Select the second point of a selection rectangle"},on:{DRAW:{actions:"DRAW_TEMP_SELECTION_RECTANGLE"},MOUSE_CLICK:{actions:"SELECT_ENTITIES_INSIDE_RECTANGLE",target:"WAITING_FOR_FIRST_SELECT_POINT"},ESC:{target:"INIT"}}},SELECTION_COMPLETED:{description:"Selection completed",type:"final"}}},{actions:{INIT_SELECT_TOOL:()=>{console.log("activate select tool"),kn(!1),oe(null),me([])},HANDLE_FIRST_SELECT_POINT:ue(({context:t,event:e})=>(console.log("handle first select point"),Rw(t,e))),DRAW_TEMP_SELECTION_RECTANGLE:({context:t,event:e})=>{if(!t.startPoint)throw new Error("[SELECT] Calling drawTempSelectionRectangle without startPoint set");zw(t.startPoint,e.drawInfo.worldMouseLocation)},SELECT_ENTITIES_INSIDE_RECTANGLE:ue(({context:t,event:e})=>{if(console.log("select entities inside rectangle"),!t.startPoint)throw new Error("[SELECT] calling SELECT_ENTITIES_INSIDE_RECTANGLE without start point");return Mw(t.startPoint,e.worldClickPoint,e.holdingCtrl),oe(null),{startPoint:null}}),DELETE_SELECTED_ENTITIES:()=>{console.log("delete selected entities"),bi(e_()),me([]),oe(null)},RESET_SELECTION:ue(()=>(oe(null),me([]),{startPoint:null}))}});function Dw(t,e,n,r){const i=Do(Gi([e,...r,t,n],it),[o=>An(e,o)]),s=i.findIndex(o=>it(t,o));if(s===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnLine");return[i[s-1]||e,i[s+1]||n]}function Uw(t,e){const n=t.map(r=>({point:r,angle:new Mo(e,r).slope}));return Do(n,[r=>r.angle]).map(r=>r.point)}function Fw(t,e,n){const r=Uw(Gi([...n,t],it),e.getShape().center),i=r.findIndex(s=>it(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnCircle");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function Bw(t,e,n){const r=kg(Gi([...n,t],it),e.getShape().center,e.getShape().start),i=r.findIndex(s=>it(t,s));if(i===-1)throw new Error("Clicked point not found on line in function findNeighboringPointsOnArc");return[r[(i+r.length-1)%r.length],r[(i+r.length+1)%r.length]]}function jw(t,e){return Pt(e.flatMap(n=>t.id===n.id?null:t.getIntersections(n)))}function ed(t,e,n){const r=t.getShape(),[i,s]=Dw(e,r.start,r.end,n);Za([i,s].map(a=>new Nn(a)));const l=t.cutAtPoints([i,s]).filter(a=>!a.containsPointOnShape(e));xr(t),Fn(...l)}function $w(t,e,n){const[r,i]=Fw(e,t,n);Za([r,i].map(o=>new Nn(o)));const s=t.cutAtPoints([r,i]);if(it(r,i))xr(t);else{const o=s.filter(l=>!l.containsPointOnShape(e));xr(t),Fn(...o)}}function Ww(t,e,n){const[r,i]=Bw(e,t,n);Za([r,i].map(o=>new Nn(o)));const s=t.cutAtPoints([r,i]);if(it(r,i))xr(t);else{const o=s.filter(l=>!l.containsPointOnShape(e));xr(t),Fn(...o)}}const Vw=Ur({types:{},context:{startPoint:null,type:V.ERASER},initial:"INIT",states:{INIT:{description:"Initializing the eraser tool",always:{actions:"INIT_ERASER_TOOL",target:"WAITING_FOR_FIRST_CLICK"}},WAITING_FOR_FIRST_CLICK:{description:"Select a line segment to delete",meta:{instructions:"Select a line segment to delete"},on:{MOUSE_CLICK:{actions:"HANDLE_MOUSE_CLICK",target:"WAITING_FOR_FIRST_CLICK"}}}}},{actions:{INIT_ERASER_TOOL:ue(()=>(console.log("activate eraser tool"),kn(!0),oe(null),me([]),{})),HANDLE_MOUSE_CLICK:ue(({context:t,event:e})=>(Hw(e.worldClickPoint),t))}});function Hw(t){const e=Ki(t,Re());if(!e)return;const n=e.segment.start,r=jw(e.entity,Re());switch(e.entity.getType()){case ie.Line:{const i=e.entity;ed(i,n,r);break}case ie.Circle:{const i=e.entity;$w(i,n,r);break}case ie.Arc:{const i=e.entity;Ww(i,n,r);break}case ie.Rectangle:{const i=e.entity,l=i.getShape().toSegments().map(a=>new nt(a));xr(i),Fn(...l),l.forEach(a=>ed(a,n,r));break}}}function Gw(t,e){const n=Re().map(r=>Ft().includes(r.id)?r.move(e.x-t.x,e.y-t.y):r);bi(n)}const rm=Ur({types:{},context:{startPoint:null,type:V.MOVE},initial:"INIT",states:{INIT:{description:"Initializing the move tool",always:{actions:"INIT_MOVE_TOOL",target:"CHECK_SELECTION"}},CHECK_SELECTION:{description:"Check if there is something selected",always:[{guard:()=>(console.log("check selection: selected entities length > 0: ",Ft().length>0),Ft().length>0),target:"WAITING_FOR_START_MOVE_POINT"},{guard:()=>(console.log("check selection: selected entities length === 0: ",Ft().length===0),Ft().length===0),target:"WAITING_FOR_SELECTION"}]},WAITING_FOR_SELECTION:{description:"Select what you want to move",meta:{instructions:"Select what you want to move"},invoke:{id:"selectToolInsideTheMoveTool",src:ho,onDone:{actions:ue(()=>(console.log("select tool finished selection"),{startPoint:null})),target:"CHECK_SELECTION"}},on:{MOUSE_CLICK:{actions:El("selectToolInsideTheMoveTool",({event:t})=>t)},ESC:{actions:["DESELECT_ENTITIES","INIT_MOVE_TOOL"]},ENTER:{actions:El("selectToolInsideTheMoveTool",({event:t})=>t)},DRAW:{actions:El("selectToolInsideTheMoveTool",({event:t})=>t)}}},WAITING_FOR_START_MOVE_POINT:{description:"Select the start of the move line",meta:{instructions:"Select the start of the move line"},always:{actions:"ENABLE_HELPERS"},on:{MOUSE_CLICK:{actions:"RECORD_START_POINT",target:"WAITING_FOR_END_MOVE_POINT"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}},WAITING_FOR_END_MOVE_POINT:{description:"Select the end of the move line",meta:{instructions:"Select the end of the move line"},on:{DRAW:{actions:["DRAW_TEMP_MOVE_LINE"]},MOUSE_CLICK:{actions:["MOVE_SELECTION","DESELECT_ENTITIES"],target:"WAITING_FOR_SELECTION"},ESC:{actions:"DESELECT_ENTITIES",target:"INIT"}}}}},{actions:{INIT_MOVE_TOOL:()=>{console.log("activate move tool"),kn(!1),oe(null),me([])},ENABLE_HELPERS:()=>{kn(!0)},RECORD_START_POINT:ue(({event:t})=>({startPoint:t.worldClickPoint})),DRAW_TEMP_MOVE_LINE:ue(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling draw temp move line without a start point");const n=new nt(t.startPoint,e.drawInfo.worldMouseLocation);return n.lineColor=Cg,n.lineWidth=Pg,n.lineStyle=Lg,oe(n),t}),MOVE_SELECTION:ue(({context:t,event:e})=>{if(!t.startPoint)throw new Error("[MOVE] Calling move selection without a start point");return Gw(t.startPoint,e.worldClickPoint),me([]),{startPoint:null}}),DESELECT_ENTITIES:ue(()=>(oe(null),me([]),{startPoint:null})),...ho.implementations.actions}}),im={[V.LINE]:Zg,[V.RECTANGLE]:em,[V.CIRCLE]:tm,[V.SELECT]:ho,[V.ERASER]:Vw,[V.MOVE]:rm},Qw=()=>{const[t,e]=A.useState(V.LINE),[n,r]=A.useState(45),[i,s]=A.useState("#FFF"),[o,l]=A.useState(1),a=A.useCallback(()=>{var d,h;e((h=(d=Ue())==null?void 0:d.getSnapshot())==null?void 0:h.context.type),r(yg()),s(Pn()),l(Ln())},[]);A.useEffect(()=>(window.addEventListener(lo.UPDATE_STATE,a),()=>{window.removeEventListener(lo.UPDATE_STATE,a)}),[a]);const c=A.useCallback(d=>{var v;(v=Ue())==null||v.stop();const h=new zt(im[d]);dn(h),e(d)},[]),f=A.useCallback(d=>{r(d),o_(d,!1)},[]);return R.jsxs("div",{className:"controls absolute top-0 left-0 flex flex-col gap-1 m-1",children:[R.jsx(ne,{title:"Select (s)",icon:ze.Direction,onClick:()=>{c(V.SELECT)},active:t===V.SELECT}),R.jsx(ne,{title:"Line (l)",icon:ze.Line,onClick:()=>{c(V.LINE)},active:t===V.LINE}),R.jsx(ne,{title:"Rectangle (r)",icon:ze.Square,onClick:()=>{c(V.RECTANGLE)},active:t===V.RECTANGLE}),R.jsx(ne,{title:"Circle (c)",icon:ze.Circle,onClick:()=>{c(V.CIRCLE)},active:t===V.CIRCLE}),R.jsx(ne,{className:"mt-2",title:"Move",icon:ze.Expand,onClick:()=>c(V.MOVE),active:t===V.MOVE}),R.jsx(ne,{className:"mt-2",title:"Undo (ctrl + z)",icon:ze.AntiClockwise,onClick:()=>Tg()}),R.jsx(ne,{title:"Redo (ctrl + shift + z)",icon:ze.Clockwise,onClick:()=>Ig()}),R.jsx(ne,{className:"mt-2",title:"Delete segments",icon:ze.Crop,onClick:()=>c(V.ERASER),active:t===V.ERASER}),R.jsx(gl,{className:"mt-2",title:"Line color",buttonStyle:{backgroundColor:i},children:x_.map(d=>R.jsx(ne,{title:"Change line color",style:{backgroundColor:d},active:d===i,onClick:()=>c_(d)},"line-color--"+d))}),R.jsx(gl,{title:"Line width",label:String(o)+"px",children:Og(9).map(d=>{const h=d+1;return R.jsx(ne,{title:"Change line width",label:String(h)+"px",active:h===o,onClick:()=>f_(h)},"line-width--"+h)})}),R.jsxs(gl,{title:"Snap angles",label:n+"°",children:[R.jsx(ne,{title:"Add guide every 5 degrees",label:"5°",onClick:()=>f(5),active:n===5}),R.jsx(ne,{title:"Add guide every 15 degrees",label:"15°",onClick:()=>f(15),active:n===15}),R.jsx(ne,{title:"Add guide every 30 degrees",label:"30°",onClick:()=>f(30),active:n===30}),R.jsx(ne,{title:"Add guide every 45 degrees",label:"45°",onClick:()=>f(45),active:n===45}),R.jsx(ne,{title:"Add guide every 90 degrees",label:"90°",onClick:()=>f(90),active:n===90})]}),R.jsx(ne,{className:"relative mt-2",title:"Load from JSON file",icon:ze.Folder,onClick:w1,children:R.jsx("input",{className:"absolute inset-0 opacity-0",type:"file",accept:"*.json",onChange:async d=>{var h;await T_((h=d.target.files)==null?void 0:h[0]),d.target.files=null}})}),R.jsx(ne,{title:"Save to JSON file",icon:ze.Save,onClick:()=>I_()}),R.jsx(ne,{title:"Export to SVG file",label:"SVG",onClick:()=>C_()}),R.jsx(ne,{title:"Export to PNG file",label:"PNG",onClick:()=>L_()}),R.jsx(ne,{className:"mt-2",title:"Github",icon:ze.Github,onClick:()=>window.open("https://github.com/bertyhell/openwebcad","_blank")})]})};function bw(){return R.jsx("div",{children:R.jsx(Qw,{})})}function td(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];for(let i=n;i<t.length;i++){if(n===i)continue;const s=t[i];e.push(...r.getIntersections(s))}}return e}function Du(t,e){let n=null,r=1/0;return t.forEach(i=>{const s=An(i.point,e);s<r&&(r=s,n=i)}),{distance:r,snapPoint:n}}function Uu(t,e,n){const{distance:r,snapPoint:i}=Du(t.filter(l=>l.type!==j.AngleGuide),e);if(r<n)return i;const{distance:s,snapPoint:o}=Du(t.filter(l=>l.type===j.AngleGuide),e);return s<n?o:null}function Yw(t,e){return Og(180/e,n=>{const i=n*e*(Math.PI/180),s=t.x+Math.cos(i),o=t.y+Math.sin(i);return new nt(new z(t.x-1e4*(s-t.x),t.y-1e4*(o-t.y)),new z(t.x+1e4*(s-t.x),t.y+1e4*(o-t.y)))})}function Kw(t,e,n,r,i){let s=null,o=null;const l=[],a=[];e.forEach(v=>{const y=Yw(v,r),_=Ki(n,y);_.distance<y_&&(a.push(_.entity),l.push({point:_.segment.start,type:j.AngleGuide}))});const c=[...t.flatMap(v=>v.getSnapPoints()),...td(Pt(t)).map(v=>({point:v,type:j.Intersection}))],f=Uu(c,n,i);f&&(s=f);const d=[...l,...td([...Pt(t),...a]).map(v=>({point:v,type:j.Intersection}))],h=Uu(d,n,i);return h&&(o=h),{angleGuides:a,entitySnapPoint:s,angleSnapPoint:o}}function Fr(t,e,n,r,i,s=[]){t.strokeStyle=r,t.lineWidth=i,t.setLineDash(s),e&&(t.lineWidth=i+1),n&&t.setLineDash([5,5])}function qw(t,e){e.forEach(n=>{Fr(t.context,Ja(n),Sr(n),n.lineColor,n.lineWidth),n.draw(t)})}function Jw(t,e){e.forEach(n=>{Fr(t.context,Ja(n),Sr(n),"#FF5500",1),n.draw(t)})}function Xw(t,e,n){if(!e)return;const r=Xt(e.point);Fr(t.context,!1,!1,v_,1);const i=t.context;switch(n&&(i.beginPath(),i.moveTo(r.x-U/2,r.y),i.lineTo(r.x+U/2,r.y),i.moveTo(r.x,r.y-U/2),i.lineTo(r.x,r.y+U/2),i.stroke()),e.type){case j.LineEndPoint:i.strokeRect(r.x-U/2,r.y-U/2,U,U);break;case j.LineMidPoint:i.beginPath(),i.moveTo(r.x,r.y-U/2),i.lineTo(r.x-U/2,r.y+U/2),i.lineTo(r.x+U/2,r.y+U/2),i.closePath(),i.stroke();break;case j.AngleGuide:i.beginPath(),i.moveTo(r.x-U/2,r.y-U/2),i.lineTo(r.x+U/2,r.y-U/2),i.lineTo(r.x-U/2,r.y+U/2),i.lineTo(r.x+U/2,r.y+U/2),i.closePath(),i.stroke();break;case j.Intersection:i.beginPath(),i.moveTo(r.x-U/2,r.y-U/2),i.lineTo(r.x+U/2,r.y+U/2),i.moveTo(r.x+U/2,r.y-U/2),i.lineTo(r.x-U/2,r.y+U/2),i.stroke();break;case j.CircleCenter:i.beginPath(),i.arc(r.x,r.y,U/2,0,2*Math.PI),i.stroke();break;case j.CircleCardinal:i.beginPath(),i.moveTo(r.x,r.y-U/2),i.lineTo(r.x-U/2,r.y),i.lineTo(r.x,r.y+U/2),i.lineTo(r.x+U/2,r.y),i.closePath(),i.stroke();break}}function Zw(t,e){e.forEach(n=>{Fr(t.context,Ja(n),Sr(n),Cg,1,[1,5]),n.draw(t)})}function eE(t,e){e&&(Fr(t.context,!1,!1,e.lineColor,e.lineWidth,e.lineStyle),e==null||e.draw(t))}function tE(t,e){e&&(Fr(t.context,!1,!1,"#FFF",1),t.context.beginPath(),t.context.moveTo(t.screenMouseLocation.x,t.screenMouseLocation.y-ys),t.context.lineTo(t.screenMouseLocation.x,t.screenMouseLocation.y+ys),t.context.moveTo(t.screenMouseLocation.x-ys,t.screenMouseLocation.y),t.context.lineTo(t.screenMouseLocation.x+ys,t.screenMouseLocation.y),t.context.stroke())}function nE(t){var e,n;t.canvasSize!==null&&t.context&&(t.context.fillStyle=m_,t.context.fillRect(0,0,(e=t.canvasSize)==null?void 0:e.x,(n=t.canvasSize)==null?void 0:n.y))}function rE(t){nE(t),Zw(t,K1()),qw(t,Re()),Jw(t,J1()),eE(t,vg());const{snapPoint:e}=Du(Pt([Ka(),_g()]),zr()),n=!!e&&qa().some(r=>r.milliSecondsHovered>rc&&it(r.snapPoint.point,e.point));Xw(t,e,n),tE(t,Y1())}function iE(t,e,n,r,i){if(!t)return;const s=e.at(-1);let o;s?An(t.point,s.snapPoint.point)<r?o=[...e.slice(0,e.length-1),{...s,milliSecondsHovered:s.milliSecondsHovered+i}]:s.milliSecondsHovered>=rc?o=[...e,{snapPoint:t,milliSecondsHovered:i}]:o=[...e.slice(0,e.length-1),{snapPoint:t,milliSecondsHovered:i}]:o=[{snapPoint:t,milliSecondsHovered:i}];const l=o.slice(0,__);n(l)}var _t=(t=>(t.MOUSE_CLICK="MOUSE_CLICK",t.ESC="ESC",t.ENTER="ENTER",t.DELETE="DELETE",t.DRAW="DRAW",t))(_t||{});Sl.createRoot(document.getElementById("root")).render(R.jsx(Im.StrictMode,{children:R.jsx(bw,{})}));function sE(){Xa(!0)}function oE(t){var i,s;Xa(!0),r_(new z(t.clientX,t.clientY));const e=X1(),n=Qi(),r=Zt();if(e){const o=new z(n.x-(t.clientX-e.x)/r,n.y-(t.clientY-e.y)/r);ec(new z(t.clientX,t.clientY)),wg(o)}if(dE(),((s=(i=Ue())==null?void 0:i.getSnapshot())==null?void 0:s.context.type)===V.SELECT){const o=Ki(zr(),Re());o.distance<nc?Lu([o.entity.id]):Lu([])}}function lE(){Xa(!1)}function uE(t){const e=Qi(),n=Zt(),r=zr(),i=n*(1-S_*(t.deltaY/Math.abs(t.deltaY)));l_(i);const s=zo(mg());wg(new z(e.x+(r.x-s.x),e.y+(r.y-s.y)))}function aE(t){t.button===oo.Middle&&ec(new z(t.clientX,t.clientY))}function cE(t){if(t.button===oo.Middle&&ec(null),t.button===oo.Left){const e=Uu(Pt([Ka(),_g()]),zr(),tc/Zt()),n=zo(new z(t.clientX,t.clientY)),r=e?e.point:n,i=Ue();i==null||i.send({type:_t.MOUSE_CLICK,worldClickPoint:r,holdingCtrl:t.ctrlKey,holdingShift:t.shiftKey})}}function fE(t){var e,n,r,i,s;t.key==="Escape"?(t.preventDefault(),(e=Ue())==null||e.send({type:_t.ESC})):t.key==="Enter"?(t.preventDefault(),(n=Ue())==null||n.send({type:_t.ENTER})):t.key==="Delete"?(t.preventDefault(),(r=Ue())==null||r.send({type:_t.DELETE})):t.key==="z"&&t.ctrlKey&&!t.shiftKey?(t.preventDefault(),Tg(),oe(null),me([]),(i=Ue())==null||i.send({type:_t.ESC})):t.key==="z"&&t.ctrlKey&&t.shiftKey?(t.preventDefault(),Ig(),oe(null),me([]),(s=Ue())==null||s.send({type:_t.ESC})):t.key==="l"?(t.preventDefault(),dn(new zt(Zg))):t.key==="c"?(t.preventDefault(),dn(new zt(tm))):t.key==="r"?(t.preventDefault(),dn(new zt(em))):t.key==="s"?(t.preventDefault(),dn(new zt(ho))):t.key==="m"&&(t.preventDefault(),dn(new zt(rm)))}function dE(){const t=yg(),e=vg(),n=Re(),r=Zt(),i=zr(),l=qa().filter(a=>a.milliSecondsHovered>rc).map(a=>a.snapPoint.point);if(q1()){let a=null;e&&e.getShape()&&e.getFirstPoint()&&(a=e.getFirstPoint());const{angleGuides:c,entitySnapPoint:f,angleSnapPoint:d}=Kw(n,Pt([a,...l]),i,t,tc/r);s_(c),Eg(f),Sg(d)}}function sm(t,e){var f,d,h,v,y;const n=Ya(),r=mg(),i=zr(),s=Zt(),o=Qi(),l=Z1(),a=e-l;a_(e);const c={context:t,canvasSize:n,worldMouseLocation:i,screenMouseLocation:r,screenOffset:o,screenZoom:s};if((f=Ue())!=null&&f.getSnapshot().can({type:_t.DRAW})&&((d=Ue())==null||d.send({type:_t.DRAW,drawInfo:c})),((y=(v=(h=Ue())==null?void 0:h.getSnapshot())==null?void 0:v.context)==null?void 0:y.type)===V.SELECT){const{distance:_,entity:C}=Ki(zo(r),Re());_<nc&&Lu([C.id])}iE(Ka(),qa(),u_,tc/Zt(),a),rE(c),requestAnimationFrame(_=>{sm(t,_)})}function nd(){console.log("handle window resize",{width:window.innerWidth,height:window.innerHeight}),t_(new z(window.innerWidth,window.innerHeight));const t=Q1();t&&(t.width=window.innerWidth,t.height=window.innerHeight)}function hE(){const t=document.getElementsByTagName("canvas")[0];if(t){n_(t),t.addEventListener("mousedown",aE),t.addEventListener("mousemove",oE),t.addEventListener("mouseup",cE),t.addEventListener("wheel",uE),t.addEventListener("mouseout",lE),t.addEventListener("mouseenter",sE),document.addEventListener("keyup",fE),window.addEventListener("resize",nd),nd();const e=t.getContext("2d");if(!e)return;sm(e,0);const n=new zt(im[V.LINE]);n.start(),dn(n)}}document.addEventListener("DOMContentLoaded",()=>{hE()});
